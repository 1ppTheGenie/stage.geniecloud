{"version":3,"file":"_LandingPages.js","sources":["../../../../../../genie-components/src/components/_Gallery.jsx","../../../../../../genie-components/src/components/AutoComplete.jsx","../../../../../../genie-components/src/components/HomeValuationResult.jsx","../../../../../../genie-components/src/components/_HomeValuation.jsx","../../../../../../genie-components/src/landing/_LandingPages.jsx"],"sourcesContent":["import { For, onMount, createSignal, createEffect } from \"solid-js\";\r\n\r\nimport \"@/assets/css/gallery.css\";\r\nimport Icon from \"@/assets/icon-magnify.svg\";\r\n\r\nexport default props => {\r\n\tconst [currentPhoto, setCurrentPhoto] = createSignal(0);\r\n\tconst [photos, setPhotoCount] = createSignal(0);\r\n\r\n\tonMount(() => {\r\n\t\t//window.gHub.lazyLoader(\"#property-gallery img.lazy\");\r\n\t\tsetPhotoCount(document.querySelectorAll(\".property-images\").length);\r\n\t});\r\n\r\n\tcreateEffect(() => {\r\n\t\tconst left =\r\n\t\t\tdocument.querySelectorAll(\".property-images\")[currentPhoto()].offsetLeft;\r\n\r\n\t\tdocument.getElementById(\"property-gallery\").style.left = `-${left}px`;\r\n\t});\r\n\r\n\tconst moveGallery = direction => {\r\n\t\tsetCurrentPhoto(current =>\r\n\t\t\tMath.min(Math.max(current + direction, 0), photos() - 1)\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<For each={props.images}>\r\n\t\t\t\t{(img, index) => (\r\n\t\t\t\t\t<div class=\"property-images\">\r\n\t\t\t\t\t\t<div class=\"property-image\">\r\n\t\t\t\t\t\t\t<div class=\"property-single-image\">\r\n\t\t\t\t\t\t\t\t<div class=\"close\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\twidth=\"24px\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"24px\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"#fff\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t\t\t\t\t\t<g data-name=\"Layer 2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<g data-name=\"close\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform=\"rotate(180 12 12)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={img}\r\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\r\n\t\t\t\t\t\t\t\t\talt=\"Featured image from the property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclass=\"image-overlay-content\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tdocument.body.classList.toggle(\"lightbox\");\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentPhoto(index);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<div class=\"zoom-image\"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</For>\r\n\r\n\t\t\t<button onClick={() => moveGallery(-1)}></button>\r\n\t\t\t<button onClick={() => moveGallery(1)}></button>\r\n\t\t</>\r\n\t);\r\n};\r\n","import { onMount } from \"solid-js\";\r\n\r\nexport const AutoComplete = props => {\r\n\tlet acInput;\r\n\r\n\tonMount(() => {\r\n\t\twindow.gHub.autoComplete(acInput, props.placeChanged);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div style={props.containerStyle}>\r\n\t\t\t<input ref={acInput} type=\"text\" style={props.inputStyle} />\r\n\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { createSignal, Show } from \"solid-js\";\r\nimport { currency, dateFormat, useAgentData } from \"@/utilities\";\r\nimport { LeafletMap, LeadCaptureForm, Marker, ClosePopup } from \"@/components\";\r\n\r\nexport const HomeValuationResult = props => {\r\n\tconst { place, property, withLeadCapture = true } = props;\r\n\tconst [leadCaptured, setLeadCaptured] = createSignal(!withLeadCapture);\r\n\r\n  const getLeadNote = () => {\r\n    let formattedNote = \"Custom valuation request for\";    \r\n\r\n    //landing page data\r\n    if(property()?.propertyID && property()?.address)\r\n      formattedNote = `${formattedNote} ${property().address}, ${property().zip}`;\r\n    //direct property api result data\r\n    else if (property()?.propertyID && property()?.siteAddress)\r\n      formattedNote = `${formattedNote} ${property().siteAddress}, ${property().siteAddressZip}`;\r\n    else if(place()?.formatted_address)\r\n      formattedNote = `${formattedNote} ${place().formatted_address}`;\r\n    else\r\n      formattedNote = \"A new home valuation lead from TheGenie!\";\r\n\r\n    return formattedNote;\r\n  };\r\n  \r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h2 class=\"home-value-title no-background\">\r\n\t\t\t\tGet your personalized home report\r\n\t\t\t</h2>\r\n\t\t\t<div class=\"home-value-result\">\r\n\t\t\t\t<ClosePopup />\r\n\r\n\t\t\t\t<LeafletMap\r\n\t\t\t\t\tid=\"genie-result-map\"\r\n\t\t\t\t\tstyle=\"width:100%; height:380px\"\r\n\t\t\t\t\tmapStyle=\"satellite-streets-v11\"\r\n\t\t\t\t\tcenter={[\r\n\t\t\t\t\t\tplace().geometry.location.lat(),\r\n\t\t\t\t\t\tplace().geometry.location.lng(),\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tzoom={22}>\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tposition={[\r\n\t\t\t\t\t\t\tplace().geometry.location.lat(),\r\n\t\t\t\t\t\t\tplace().geometry.location.lng(),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</LeafletMap>\r\n\r\n\t\t\t\t<div style=\"margin:-5vh 5vw;padding-bottom: 4vh;z-index:999999;position:relative;\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"invert center\"\r\n\t\t\t\t\t\tstyle=\"padding: 1vw; border-radius: 10px; box-shadow: 0px 2px 10px #0003;\">\r\n\t\t\t\t\t\t{leadCaptured && <h3>Home Value Range Report for</h3>}\r\n\r\n\t\t\t\t\t\t<h4 style=\"font-size: 100%\">{place().formatted_address}</h4>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Show when={withLeadCapture && !leadCaptured()}>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tFill out the fields below and we'll send you your personalized\r\n\t\t\t\t\t\t\treport\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<LeadCaptureForm\r\n\t\t\t\t\t\t\tsetLeadCaptured={setLeadCaptured}\r\n\t\t\t\t\t\t\tleadNote={getLeadNote()}\r\n              genieTags=\"RequestCustomValuation, OptInContact\"              \r\n\t\t\t\t\t\t\texistingData={property() && { propertyId: property().propertyID }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Show>\r\n\r\n\t\t\t\t\t<Show when={leadCaptured()}>\r\n\t\t\t\t\t\t<PropertyResponse property={property()} />\r\n\t\t\t\t\t</Show>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst PropertyResponse = props => {\r\n\tconst { property } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{typeof property === \"undefined\" && (\r\n\t\t\t\t<p class=\"invert\" style=\"text-align:left;padding:2vw\">\r\n\t\t\t\t\tSorry, we were not able to locate a home valuation for your property\r\n\t\t\t\t\tabove. Not a problem, we will look into this and get back to you\r\n\t\t\t\t\tshortly. I look forward to discussing the information with you very\r\n\t\t\t\t\tsoon and to help you get top dollar for your home.\r\n\t\t\t\t\t<Signature />\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{typeof property !== \"undefined\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div class=\"invert\" style=\"text-align:left;padding:1vw;margin:2vh 0\">\r\n\t\t\t\t\t\t{property.firstOwnerFirstName &&\r\n\t\t\t\t\t\t\tproperty.firstOwnerFirstName !== \"\" && (\r\n\t\t\t\t\t\t\t\t<p style=\"text-transform:capitalize\">\r\n\t\t\t\t\t\t\t\t\tHi {property.firstOwnerFirstName.toLowerCase()}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tHere is the initial valuation we found for your address. This\r\n\t\t\t\t\t\t\tautomated valuation is one way to get a general idea, but it is\r\n\t\t\t\t\t\t\timportant to realize an algorithm can't provide the accuracy\r\n\t\t\t\t\t\t\tyou'll want if you are thinking about selling. Many factors that\r\n\t\t\t\t\t\t\tcan't be squeezed into a data field impact your market value, from\r\n\t\t\t\t\t\t\tupdates and improvements you have (or have not yet) made, to\r\n\t\t\t\t\t\t\twhat's located next door or a block away, to recent, sometimes\r\n\t\t\t\t\t\t\trapidly changing, market trends. Our role as realtors is to take\r\n\t\t\t\t\t\t\tall of this into consideration. If you are thinking about selling,\r\n\t\t\t\t\t\t\tplease call for a real-time, real-world value for your most\r\n\t\t\t\t\t\t\timportant investment! Looking forward to helping you get top\r\n\t\t\t\t\t\t\tdollar for your home.\r\n\t\t\t\t\t\t\t<Signature />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<h3 style=\"margin-bottom:1vh;color:var(--theme-heading-color);\">\r\n\t\t\t\t\t\tConfirm Home Details\r\n\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t<div class=\"invert home-value-details\">\r\n\t\t\t\t\t\t{[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: Intl.NumberFormat(\"en-US\").format(\r\n\t\t\t\t\t\t\t\t\tproperty.sumBuildingSqFt\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\ttitle: \"SQUARE FT\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ value: property.bedrooms, title: \"BEDS\" },\r\n\t\t\t\t\t\t\t{ value: property.bathrooms, title: \"FULL BATHS\" },\r\n\t\t\t\t\t\t\t{ value: property.yearBuilt, title: \"BUILT IN\" },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: property.saleDate\r\n\t\t\t\t\t\t\t\t\t? dateFormat(Date.parse(property.saleDate))\r\n\t\t\t\t\t\t\t\t\t: \"n/a\",\r\n\t\t\t\t\t\t\t\ttitle: \"PURCHASED\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ value: \"Unknown\", title: \"LAST RENO\" },\r\n\t\t\t\t\t\t].map((s, i) => (\r\n\t\t\t\t\t\t\t<div key={s.title}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={`/_assets/_img/valuation-icon-${i + 1}.png`}\r\n\t\t\t\t\t\t\t\t\talt={`${s.title} icon`}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<h4>{s.title}</h4>\r\n\t\t\t\t\t\t\t\t<h5>{s.value}</h5>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"home-value-estimate\"\r\n\t\t\t\t\t\tstyle=\"color:var(--theme-heading-color)\">\r\n\t\t\t\t\t\t<h4>Estimated Value Range:</h4>\r\n\t\t\t\t\t\t<h5>{`${currency(property.avmLow)} - ${currency(\r\n\t\t\t\t\t\t\tproperty.avmHigh\r\n\t\t\t\t\t\t)}`}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst Signature = () => {\r\n\tconst agent = useAgentData();\r\n\r\n\treturn (\r\n\t\t<Show when={!agent.loading && agent()}>\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\tSincerely,\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\t{agent()?.displayName}\r\n\t\t\t<br />\r\n\t\t\t{agent()?.phone}\r\n\t\t\t<br />\r\n\t\t\t{agent()?.email}\r\n\t\t</Show>\r\n\t);\r\n};\r\n","import { createResource, createSignal, Suspense, Show } from \"solid-js\";\r\nimport {\r\n\tareaDataStore,\r\n\tuseSettings,\r\n\tContext4Settings,\r\n\tsearchAddress,\r\n} from \"@/utilities\";\r\nimport {\r\n\tAutoComplete,\r\n\tEditable,\r\n\tLeafletMap,\r\n\tLeafletPane,\r\n\tGeoArea,\r\n\tHomeValuationResult,\r\n\tClosePopup,\r\n} from \"@/components\";\r\n\r\nimport \"@/index.css\";\r\nimport \"@/assets/css/home-value.css\";\r\n\r\nexport default props => {\r\n\tconst { buttonCaption = \"Get your Value!\" } = props;\r\n\tconst { areaId, mapStyle, withLeadCapture } = useSettings(Context4Settings);\r\n\r\n\tconst [showResult, setShowResult] = createSignal(false);\r\n\tconst [place, setPlace] = createSignal();\r\n\tconst [placeID, setPlaceID] = createSignal();\r\n\tconst [property] = createResource(placeID, searchAddress); \r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Show when={showResult() === true}>\r\n\t\t\t\t<HomeValuationResult\r\n\t\t\t\t\tplace={place}\r\n\t\t\t\t\tproperty={property}\r\n\t\t\t\t\twithLeadCapture={true}\r\n\t\t\t\t/>\r\n\t\t\t</Show>\r\n\r\n\t\t\t<Show when={showResult() === false}>\r\n\t\t\t\t<h2 class=\"home-value-title no-background\">Let's find your home</h2>\r\n\t\t\t\t<div\r\n\t\t\t\t\tid=\"map-place-getter\"\r\n\t\t\t\t\tstyle=\"border-radius: 20px; width: 50vw; min-height: 450px;\">\r\n\t\t\t\t\t<ClosePopup />\r\n\r\n\t\t\t\t\t<LeafletMap\r\n\t\t\t\t\t\tstyle=\"width:100%;height:450px;margin:0;\"\r\n\t\t\t\t\t\tmapStyle={mapStyle || \"satellite-streets-v11\"}\r\n\t\t\t\t\t\tzoom={18}>\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Suspense>\r\n\t\t\t\t\t\t\t\t<GeoArea areaId={areaId} fillColor=\"var (--theme-color)\" />\r\n\t\t\t\t\t\t\t</Suspense>\r\n\r\n\t\t\t\t\t\t\t<LeafletPane>\r\n\t\t\t\t\t\t\t\t<div style=\"min-width:80%\">\r\n\t\t\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\t\t\tcontainerStyle=\"display:flex;min-width:80%;\"\r\n\t\t\t\t\t\t\t\t\t\tinputStyle=\"padding:10px 15px; border-radius:20px;border:2px solid black;outline:none;flex-basis:70%;flex-grow:1\"\r\n\t\t\t\t\t\t\t\t\t\tplaceChanged={place => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetPlaceID(place.place_id);\r\n\t\t\t\t\t\t\t\t\t\t\tsetPlace(place);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"border-radius:20px;border:2px solid black;background-color:black;color:#fff;margin-left:-35px;outline:none;cursor:pointer\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n                        if(place()) \r\n                          setShowResult(true);\r\n                      }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{buttonCaption}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</AutoComplete>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</LeafletPane>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t</LeafletMap>\r\n\t\t\t\t</div>\r\n\t\t\t</Show>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n","import { render } from \"solid-js/web\";\r\n//import { lazy } from \"solid-js\";\r\n\r\nimport {\r\n\tinitAutocomplete,\r\n\tsearchAddress,\r\n\tinitMaps,\r\n\tbuildMap,\r\n\tcreateLead,\r\n\tupdateLead,\r\n\tuseSettings,\r\n\tContext4Settings,\r\n\tlandingPageData,\r\n\tcurrency,\r\n\taddDynamicPopup,\r\n\tgetCtaData,\r\n\tformatFormNote,\r\n\tisMobileDevice,\r\n\tformatPhoneNumber,\r\n\tInsensitiveURLSearchParams,\r\n} from \"@/utilities\";\r\n\r\nimport \"@/index.css\";\r\n\r\nimport Gallery from \"@/components/_Gallery\";\r\nimport HomeValuation from \"@/components/_HomeValuation\";\r\nimport LeadCtaTag from \"@/components/_LeadCtaTag\";\r\n\r\nconst VIEWED = \"Viewed Landing Page\";\r\n\r\nexport default () => {\r\n\twindow.gHub.searchAddress = searchAddress;\r\n\r\n\twindow.gHub.lazyLoader = selector => {\r\n\t\tconst lazyImages = [].slice.call(document.querySelectorAll(selector));\r\n\r\n\t\tconst lazyImageObserver = new IntersectionObserver(entries => {\r\n\t\t\tentries.forEach(entry => {\r\n\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\tconst lazyImage = entry.target;\r\n\t\t\t\t\tlazyImage.src = lazyImage.dataset.src;\r\n\t\t\t\t\tlazyImage.classList.remove(\"lazy\");\r\n\t\t\t\t\tlazyImageObserver.unobserve(lazyImage);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tlazyImages.forEach(lazyImage => lazyImageObserver.observe(lazyImage));\r\n\t};\r\n\r\n\twindow.gHub.currency = c => currency(c);\r\n\r\n\twindow.gHub.makeMap = async (id, options = null, layers = null) => {\r\n\t\tawait initMaps();\r\n\r\n\t\tconst map = buildMap(\r\n\t\t\ttypeof id === \"string\" ? document.getElementById(id) : id,\r\n\t\t\toptions\r\n\t\t);\r\n\r\n\t\tif (layers && layers.listings) {\r\n\t\t\tconst group = new window.L.featureGroup();\r\n\r\n\t\t\tlayers.listings.forEach(l => {\r\n\t\t\t\tif (!isNaN(l.lat) && !isNaN(l.lng)) {\r\n\t\t\t\t\tlet datatURI, size, anchor;\r\n\r\n\t\t\t\t\tconst color =\r\n\t\t\t\t\t\tl.color ||\r\n\t\t\t\t\t\twindow.gHub.getCssVar(`--${l.state}`, document.body).trim();\r\n\r\n\t\t\t\t\tswitch (l.iconType ?? \"circle\") {\r\n\t\t\t\t\t\tcase \"flag\":\r\n\t\t\t\t\t\t\tsize = [55 * scale, 38 * scale];\r\n\t\t\t\t\t\t\tanchor = [27 * scale, 38 * scale];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.flagURI(\r\n\t\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\t\twindow.gHub.currency(\r\n\t\t\t\t\t\t\t\t\tparseInt(l.state == \"sold\" ? l.salePrice : l.listPrice)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"dot\":\r\n\t\t\t\t\t\t\tsize = [15, 15];\r\n\t\t\t\t\t\t\tanchor = [9, 9];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.circleURI(color, \"\", 8);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsize = [34, 34];\r\n\t\t\t\t\t\t\tanchor = [12, 12];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.circleURI(color, l.caption || i + 1, 12);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar icon = window.L.icon({\r\n\t\t\t\t\t\ticonUrl: datatURI,\r\n\t\t\t\t\t\ticonSize: size,\r\n\t\t\t\t\t\ticonAnchor: anchor,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\twindow.L.marker([l.lat, l.lng], { icon: icon }).addTo(group);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroup.addTo(map);\r\n\r\n\t\t\tif (options.fitMarkers && Object.keys(group.getBounds()).length > 0) {\r\n\t\t\t\tmap.fitBounds(group.getBounds(), { padding: [60, 60] });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layers && layers.geoJson && options.fitMarkers) {\r\n\t\t\twindow.L.geoJSON(layers.geoJson, {\r\n\t\t\t\tonEachFeature: (feature, layer) => {\r\n\t\t\t\t\tmap.fitBounds(layer.getBounds(), { zoom: 22 });\r\n\t\t\t\t\tmap.invalidateSize();\r\n\t\t\t\t},\r\n\t\t\t}).addTo(map);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t};\r\n\r\n\twindow.gHub.autoComplete = (input, setPlace, bounds = null) => {\r\n\t\tinitAutocomplete(() => {\r\n\t\t\t/*var defaultBounds = new google.maps.LatLngBounds(\r\n\t\t\t\tnew google.maps.LatLng(40.518, 29.215),\r\n\t\t\t\tnew google.maps.LatLng(41.242, 30.37)\r\n\t\t\t);*/\r\n\r\n\t\t\tconst places = new google.maps.places.Autocomplete(input, {\r\n\t\t\t\tcomponentRestrictions: { country: \"us\" },\r\n\t\t\t\ttypes: [\"address\"],\r\n\t\t\t});\r\n\t\t\tgoogle.maps.event.addListener(\r\n\t\t\t\tplaces,\r\n\t\t\t\t\"place_changed\",\r\n\t\t\t\t() => setPlace && setPlace(places.getPlace())\r\n\t\t\t);\r\n\t\t});\r\n\t};\r\n\r\n\twindow.gHub.spinner = (fill, style = \"\") => {\r\n\t\tlet petals = \"\";\r\n\r\n\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\tpetals += `<g transform=\"rotate(${\r\n\t\t\t\ti * 30\r\n\t\t\t} 50 50)\"><rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"white\"><animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"${\r\n\t\t\t\t-0.9166 - i * -0.08333\r\n\t\t\t}s\" repeatCount=\"indefinite\"></animate></rect></g>`;\r\n\t\t}\r\n\r\n\t\treturn `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" style=\"${style}\"><circle cx=\"50\" cy=\"50\" r=\"47\" fill=\"${fill}\"/>${petals}</svg>`;\r\n\t};\r\n\r\n\twindow.gHub.getCssVar = (name, el) =>\r\n\t\tgetComputedStyle(el ?? document.body).getPropertyValue(name);\r\n\r\n\twindow.gHub.hex2rgba = (hex, alpha = 1) => {\r\n\t\tconst re = hex.length === 6 || hex.length === 8 ? /\\w\\w/g : /\\w/g;\r\n\t\tconst [r, g, b] = hex.match(re).map(x => parseInt(x, 16));\r\n\t\treturn `rgba(${r},${g},${b},${alpha})`;\r\n\t};\r\n\r\n\twindow.gHub.circleURI = (color, caption = \"\", size = 12) => {\r\n\t\tconst text =\r\n\t\t\tcaption === \"\"\r\n\t\t\t\t? \"\"\r\n\t\t\t\t: `<text x=\"12\" y=\"16\" fill=\"#fff\" text-anchor=\"middle\" style=\"font-family:sans-serif;font-weight:800;font-size:12px\">${caption}</text>`;\r\n\r\n\t\tconst svg = `\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size * 2 + 4}\" height=\"${\r\n\t\t\tsize * 2 + 4\r\n\t\t}\">\r\n\t\t<defs>\r\n\t\t\t<filter id=\"shadow\" x=\"0\" y=\"0\" width=\"${size}\" height=\"${size}\">\r\n\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/> \r\n\t\t\t\t<feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\r\n\t\t\t\t<feComponentTransfer>\r\n\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.5\"/>\r\n\t\t\t\t</feComponentTransfer>\r\n\t\t\t\t<feMerge> \r\n\t\t\t\t\t<feMergeNode/> \r\n\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"/> \r\n\t\t\t\t</feMerge>\r\n\t\t\t</filter>\r\n\t\t</defs>\r\n\t\t<circle fill=\"${color}\" cx=\"${size}\" cy=\"${size}\" r=\"${size}\" filter=\"url(#shadow)\" />\r\n\t\t${text}\r\n\t</svg>`;\r\n\r\n\t\treturn \"data:image/svg+xml,\" + encodeURIComponent(svg);\r\n\t};\r\n\r\n\twindow.gHub.flagURI = (color, price) => {\r\n\t\tconst svg = `\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11\" height=\"7.5\" viewBox=\"0 0 110 75\">\r\n\t\t<defs>\r\n\t\t\t<filter id=\"f1\" x=\"0\" y=\"0\" width=\"12\" height=\"12\">\r\n\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/> \r\n\t\t\t<feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\r\n\t\t\t<feComponentTransfer>\r\n\t\t\t<feFuncA type=\"linear\" slope=\"0.5\"/>\r\n\t\t\t</feComponentTransfer>\r\n\t\t\t<feMerge> \r\n\t\t\t<feMergeNode/> \r\n\t\t\t<feMergeNode in=\"SourceGraphic\"/> \r\n\t\t\t</feMerge>\r\n\t\t\t</filter>\r\n\t\t</defs>\r\n\t\t<path fill=\"${color}\" stroke=\"#fff\" stroke-width=\"3\" filter=\"url(#f1)\" d=\"M105.333,0.5H5.5c-2.75,0-5,2.25-5,5v38.333c0,2.75,2.25,5,5,5h38.733l10.101,20.834l12.152-20.834h38.848c2.75,0,5-2.25,5-5V5.5C110.333,2.75,108.083,0.5,105.333,0.5z\"/>\r\n\r\n\t\t<text x=\"55\" y=\"35\" style=\"font-size:28px;font-weight:bold;font-family:sans-serif\" text-anchor=\"middle\" fill=\"#FFFFFF\">${price}</text>\r\n\t</svg>`;\r\n\r\n\t\treturn \"data:image/svg+xml,\" + encodeURIComponent(svg);\r\n\t};\r\n\r\n\twindow.gHub.redirectToParentAsset = (additionalParams = {}) => {\r\n\t\tconst url = `${window.location.origin}${window.location.pathname\r\n\t\t\t.replace(\"/index.html\", \"\")\r\n\t\t\t.split(\"/\")\r\n\t\t\t.slice(0, -1)\r\n\t\t\t.join(\"/\")}/index.html`;\r\n\t\tconst urlParams = new URLSearchParams(window.location.search);\r\n\r\n\t\t// Remove the override\r\n\t\turlParams.delete(\"lpo\");\r\n\r\n\t\t// Add any additional params\r\n\t\tObject.keys(additionalParams).forEach(key =>\r\n\t\t\turlParams.append(key, additionalParams[key])\r\n\t\t);\r\n\r\n\t\twindow.location.href = `${url}?${urlParams.toString()}`;\r\n\t};\r\n\r\n\twindow.gHub.randomPriceString = (max = 2000001, min = 200000) => {\r\n\t\t// Format a random number\r\n\t\tconst formattedNumber = Math.floor(Math.random() * (max - min) + min)\r\n\t\t\t.toString()\r\n\t\t\t.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n\r\n\t\t// Replace numbers with letters\r\n\t\treturn formattedNumber\r\n\t\t\t.replace(/1/g, \"I\")\r\n\t\t\t.replace(/2/g, \"A\")\r\n\t\t\t.replace(/3/g, \"E\")\r\n\t\t\t.replace(/4/g, \"H\")\r\n\t\t\t.replace(/5/g, \"S\")\r\n\t\t\t.replace(/7/g, \"I\")\r\n\t\t\t.replace(/8/g, \"B\")\r\n\t\t\t.replace(/9/g, \"G\");\r\n\t};\r\n\r\n\t//this was the one giving casing issues so just want to centralize it.\r\n\twindow.gHub.getPropertyIdFromUrl = () => {\r\n\t\treturn new InsensitiveURLSearchParams(window.location.search).get(\r\n\t\t\t\"propertyId\"\r\n\t\t);\r\n\t};\r\n\r\n\twindow.gHub.getLeadId = (settings = useSettings(Context4Settings)) => {\r\n\t\treturn settings.leadId || settings.genieLeadId || window.gHub.leadId;\r\n\t};\r\n\r\n\tdocument.addEventListener(\"trigger-update-lead\", async e => {\r\n\t\tconst leadId = window.gHub.getLeadId();\r\n\t\tif (leadId) {\r\n\t\t\tawait updateLead({\r\n\t\t\t\tgenieLeadId: leadId,\r\n\t\t\t\t...e.detail,\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\twindow.gHub.getLandingPageData = async (skipLeadCreate = false) => {\r\n\t\tconst urlParams = Object.fromEntries(\r\n\t\t\tnew URLSearchParams(window.location.search)\r\n\t\t);\r\n\r\n\t\turlParams.agentId = window.gHub.agentId;\r\n\t\turlParams.hideAVM = window.gHub.hideAVM ?? false;\r\n\t\turlParams.skipLeadCreate = skipLeadCreate;\r\n\r\n\t\t//since we are converting to an object here we want in format of propertyId but from url it could be either Id or id\r\n\t\tconst propertyId = window.gHub.getPropertyIdFromUrl();\r\n\r\n\t\tif (propertyId) {\r\n\t\t\t//just in case it was lower in the URL remove it to avoid confusion\r\n\t\t\tdelete urlParams.propertyid;\r\n\t\t\turlParams.propertyId = propertyId;\r\n\t\t}\r\n\r\n\t\treturn await landingPageData(urlParams);\r\n\t};\r\n\r\n\twindow.gHub.mergeTrackingData = (\r\n\t\tpostTracking = {},\r\n\t\tsettings = useSettings(Context4Settings)\r\n\t) => {\r\n\t\tconst defaultTrackingData = window.gHub.defaults.trackingData || {};\r\n\r\n\t\t//I think this was legacy since it is going to utm_ while our create lead expects utmX, however this should handle all utmSource, utmsource, utm_source\r\n\t\tlet trackingDataFromSettings = settings.trackingdata\r\n\t\t\t? Object.keys(settings.trackingdata).reduce((destination, key) => {\r\n\t\t\t\t\tdestination[\r\n\t\t\t\t\t\tkey.toLowerCase().replace(\"_\", \"\").replace(\"utm\", \"utm_\")\r\n\t\t\t\t\t] = settings.trackingdata[key];\r\n\t\t\t\t\treturn destination;\r\n\t\t\t  }, {})\r\n\t\t\t: {};\r\n\r\n\t\t// if we have tracking data then source will be populated\r\n\t\tif (trackingDataFromSettings.utm_source) {\r\n\t\t\ttrackingDataFromSettings = {\r\n\t\t\t\tutmSource: capture.utm_source ?? null,\r\n\t\t\t\tutmMedium: capture.utm_medium ?? null,\r\n\t\t\t\tutmCampaign: capture.utm_campaign ?? null,\r\n\t\t\t\tutmTerm: capture.utm_term ?? null,\r\n\t\t\t\tutmContent: capture.utm_content ?? null,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tpostTracking = {\r\n\t\t\t...defaultTrackingData,\r\n\t\t\t...trackingDataFromSettings,\r\n\t\t\t...postTracking,\r\n\t\t};\r\n\r\n\t\tif (!postTracking.utmSource || postTracking.utmSource === \"url\") {\r\n\t\t\t//in the event someone lands on the page that was not driven by a short URL with tracking data\r\n\t\t\tconst pageUtmSource = document.getElementById(\"pageUtmSource\");\r\n\t\t\tconst pageUtmCampaign = document.getElementById(\"pageUtmCampaign\");\r\n\t\t\tpostTracking.utmSource = pageUtmSource?.value || window.location.href;\r\n\t\t\tpostTracking.utmCampaign = pageUtmCampaign?.value;\r\n\t\t}\r\n\r\n\t\treturn postTracking;\r\n\t};\r\n\r\n\twindow.gHub.formatNewLeadReferringUrl = (postedData, settings) => {\r\n\t\tlet referringUrl = `${window.location.origin}${window.location.pathname}?referral=true`;\r\n\r\n\t\tif (postedData.propertyId) {\r\n\t\t\treferringUrl += `&propertyId=${postedData.propertyId}`;\r\n\t\t}\r\n\r\n\t\tif (settings.mlsNumber) {\r\n\t\t\treferringUrl += `&mlsNumber=${settings.mlsNumber}`;\r\n\t\t}\r\n\r\n\t\tif (settings.mlsId) {\r\n\t\t\treferringUrl += `&mlsId=${settings.mlsId}`;\r\n\t\t}\r\n\r\n\t\treturn referringUrl;\r\n\t};\r\n\r\n\t//TODO: not sure if the best spot and if we should be string stuff like this on the gHub but\r\n\t//setting here so the can prepop form inputs if desired.\r\n\twindow.gHub.setFormPrepopInputs = (email, phone) => {\r\n\t\tif (email) window.gHub.leadEmailAddress = email;\r\n\r\n\t\tif (phone) window.gHub.leadPhoneNumber = formatPhoneNumber(phone);\r\n\t};\r\n\r\n\twindow.gHub.addLead = async (note, data = null) => {\r\n\t\tconst settings = useSettings(Context4Settings);\r\n\r\n\t\twindow.gHub.defaults = window.gHub.defaults || {};\r\n\r\n\t\tlet postedData = {\r\n\t\t\tagentId: settings.agentId,\r\n\t\t\tareaId: settings.leadareaId || settings.areaId,\r\n\t\t\tpropertyId:\r\n\t\t\t\tsettings.propertyId ??\r\n\t\t\t\twindow.gHub.defaults.leadPropertyId ??\r\n\t\t\t\twindow.gHub.getPropertyIdFromUrl(),\r\n\t\t\tfirstName: settings.firstname ?? null,\r\n\t\t\tlastName: settings.lastname ?? null,\r\n\t\t\tfullName: window.gHub.defaults.fullName ?? null,\r\n\t\t\temailAddress: settings.emailaddress ?? null,\r\n\t\t\tnote: note,\r\n\t\t\t...data,\r\n\t\t};\r\n\r\n\t\tconst leadId = window.gHub.getLeadId(settings);\r\n\r\n\t\tif (leadId) {\r\n\t\t\tif (note !== VIEWED) {\r\n\t\t\t\tpostedData.genieLeadId = leadId;\r\n\t\t\t\tpostedData.email = postedData.emailAddress;\r\n\r\n\t\t\t\tawait updateLead(postedData);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpostedData.referringUrl = window.gHub.formatNewLeadReferringUrl(\r\n\t\t\t\tpostedData,\r\n\t\t\t\tsettings\r\n\t\t\t);\r\n\t\t\tpostedData.trackingData = window.gHub.mergeTrackingData(\r\n\t\t\t\tpostedData.trackingData,\r\n\t\t\t\tsettings\r\n\t\t\t);\r\n\r\n\t\t\t// Merge in any additional default settings\r\n\t\t\tif (window.gHub.defaults.notePrompt) {\r\n\t\t\t\tpostedData.note = `${window.gHub.defaults.notePrompt}: ${postedData.note}`;\r\n\t\t\t}\r\n\r\n\t\t\tconst r = await createLead(postedData);\r\n\r\n\t\t\tif (r.result?.key) {\r\n\t\t\t\twindow.gHub.leadId = r.result.key;\r\n\t\t\t\twindow.gHub.setFormPrepopInputs(\r\n\t\t\t\t\tpostedData.emailAddress,\r\n\t\t\t\t\tpostedData.phoneNumber\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn r.result;\r\n\t\t}\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Home Valuation component in popup\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\".request-home-value\").forEach(el => {\r\n\t\tel.addEventListener(\"click\", event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\twindow.gHub.popHomeValue();\r\n\t\t});\r\n\t});\r\n\r\n\twindow.gHub.popHomeValue = () => {\r\n\t\tconst dynamicPopupId = \"genie-homeValuePopup\";\r\n\r\n\t\tif (addDynamicPopup(dynamicPopupId)) {\r\n\t\t\tconst settings = useSettings(Context4Settings);\r\n\t\t\tconst App = () => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Context4Settings.Provider value={settings}>\r\n\t\t\t\t\t\t<HomeValuation />\r\n\t\t\t\t\t</Context4Settings.Provider>\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\t\trender(App, document.getElementById(dynamicPopupId));\r\n\t\t}\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Opt-in popup\r\n\t *\r\n\t ***********************/\r\n\twindow.gHub.createScrollTracker = (direction, ctaData) => {\r\n\t\tlet lastScrollTop = 0;\r\n\t\tlet scrollAmount = 0;\r\n\r\n\t\treturn function checkScrollAndShowModal(scrollPercentage) {\r\n\t\t\tfunction onScroll() {\r\n\t\t\t\tlet scrollTop =\r\n\t\t\t\t\twindow.pageYOffset || document.documentElement.scrollTop;\r\n\t\t\t\tlet scrollableHeight =\r\n\t\t\t\t\tdocument.documentElement.scrollHeight - window.innerHeight;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t(direction === \"down\" && scrollTop > lastScrollTop) ||\r\n\t\t\t\t\t(direction === \"up\" && scrollTop < lastScrollTop)\r\n\t\t\t\t) {\r\n\t\t\t\t\tscrollAmount += Math.abs(scrollTop - lastScrollTop);\r\n\r\n\t\t\t\t\tlet percentScrolled = (scrollAmount / scrollableHeight) * 100;\r\n\r\n\t\t\t\t\tif (percentScrolled >= scrollPercentage) {\r\n\t\t\t\t\t\twindow.gHub.showOptIn(ctaData);\r\n\t\t\t\t\t\twindow.removeEventListener(\"scroll\", onScroll);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscrollAmount = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlastScrollTop = scrollTop <= 0 ? 0 : scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\twindow.addEventListener(\"scroll\", onScroll);\r\n\t\t};\r\n\t};\r\n\r\n\twindow.gHub.toggleMobileBanner = (data, show) => {\r\n\t\tconst mobileBanner = document.getElementById(\"js-mobile-banner\");\r\n\r\n\t\tif (!show && mobileBanner) {\r\n\t\t\tmobileBanner.style.display = \"none\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mobileBannerText = document.getElementById(\"js-mobile-banner-text\");\r\n\t\tconst mobileBannerCta = document.getElementById(\"js-mobile-banner-cta\");\r\n\t\tconst mobileBannerClose = document.getElementById(\"js-mobile-banner-close\");\r\n\r\n\t\tif (\r\n\t\t\tmobileBanner &&\r\n\t\t\tmobileBannerCta &&\r\n\t\t\tmobileBannerClose &&\r\n\t\t\tmobileBannerText\r\n\t\t) {\r\n\t\t\tmobileBannerText.value = data.ctaMobileBannerText;\r\n\r\n\t\t\tmobileBannerCta.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (window.gHub.getLeadId())\r\n\t\t\t\t\twindow.gHub.addLead(data.ctaMobileBannerNote, {\r\n\t\t\t\t\t\tgenieTags: data.ctaMobileBannerTags,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t//as long as the CTA has not been accepted we allow the mobile banner to re-trigger the display\r\n\t\t\t\twindow.gHub.ctaDisplayed = false;\r\n\t\t\t\twindow.gHub.showOptIn(data);\r\n\t\t\t});\r\n\r\n\t\t\tmobileBannerClose.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tmobileBanner.style.display = \"none\";\r\n\t\t\t});\r\n\r\n\t\t\tmobileBanner.style.display = \"block\";\r\n\t\t}\r\n\t};\r\n\r\n\twindow.gHub.hookShowOptIn = (\r\n\t\tctaIdUrlParam,\r\n\t\tctaIdShortDataValue,\r\n\t\thasLeadData\r\n\t) => {\r\n\t\t//url param will take precedence over what is supplied in short data\r\n\t\tconst ctaId = parseInt(ctaIdUrlParam) || parseInt(ctaIdShortDataValue);\r\n\t\tconst data = getCtaData(ctaId);\r\n\r\n\t\tif (!data.enabled) return;\r\n\r\n\t\tif (data.showMobileBanner && isMobileDevice()) {\r\n\t\t\twindow.gHub.toggleMobileBanner(data, true);\r\n\t\t}\r\n\r\n\t\tconst ctaHomeValueKey = 1; //home value has special handling and just pops an existing modal\r\n\r\n\t\tif (ctaId === ctaHomeValueKey)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.gHub.popHomeValue();\r\n\t\t\t}, data.delay * 1000);\r\n\t\telse if (hasLeadData) {\r\n\t\t\t//all the CTA's need a lead in context\r\n\t\t\tif (data.scrollUpPercentage > 0) {\r\n\t\t\t\tconst checkUpwardScrollAndShowModal = window.gHub.createScrollTracker(\r\n\t\t\t\t\t\"up\",\r\n\t\t\t\t\tdata\r\n\t\t\t\t);\r\n\t\t\t\tcheckUpwardScrollAndShowModal(data.scrollUpPercentage);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.scrollDownPercentage > 0) {\r\n\t\t\t\tconst checkDownwardScrollAndShowModal = window.gHub.createScrollTracker(\r\n\t\t\t\t\t\"down\",\r\n\t\t\t\t\tdata\r\n\t\t\t\t);\r\n\t\t\t\tcheckDownwardScrollAndShowModal(data.scrollDownPercentage);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.delay > 0) {\r\n\t\t\t\tsetTimeout(() => window.gHub.showOptIn(data), data.delay * 1000);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\twindow.gHub.showOptIn = data => {\r\n\t\tconst settings = useSettings(Context4Settings);\r\n\r\n\t\tif (window.gHub.getLeadId(settings) && !window.gHub.ctaDisplayed) {\r\n\t\t\tconst dynamicPopupId = \"genie-leadCtaTagPopup\";\r\n\t\t\tif (addDynamicPopup(dynamicPopupId)) {\r\n\t\t\t\twindow.gHub.ctaDisplayed = true;\r\n\t\t\t\tconst App = () => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Context4Settings.Provider value={settings}>\r\n\t\t\t\t\t\t\t<LeadCtaTag ctaData={data} />\r\n\t\t\t\t\t\t</Context4Settings.Provider>\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\t\t\t\trender(App, document.getElementById(dynamicPopupId));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Get short/qr data\r\n\t *\r\n\t ***********************/\r\n\twindow.gHub.initLandingPageData = urlParamCtaid => {\r\n\t\t(async () => {\r\n\t\t\tconst lpData = await window.gHub.getLandingPageData();\r\n\r\n\t\t\tif (lpData.lead && lpData.lead.genieLeadId) {\r\n\t\t\t\tconst settings = useSettings(Context4Settings);\r\n\t\t\t\tsettings.trackingdata = lpData.lead.trackingData; //unsure on the casing descrepancy here but add lead maps it;\r\n\t\t\t\twindow.gHub.leadId = lpData.lead.genieLeadId;\r\n\r\n\t\t\t\tif (lpData.address && lpData.zip)\r\n\t\t\t\t\twindow.gHub.leadAddress = `${lpData.address}, ${lpData.zip}`;\r\n\r\n\t\t\t\twindow.gHub.setFormPrepopInputs(\r\n\t\t\t\t\tlpData.lead.emailAddress,\r\n\t\t\t\t\tlpData.lead.phoneNumber\r\n\t\t\t\t);\r\n\t\t\t\twindow.gHub.hookShowOptIn(urlParamCtaid, lpData.lead.ctaId, true);\r\n\t\t\t}\r\n\t\t})();\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Global Url Param hook\r\n\t *\r\n\t ***********************/\r\n\tconst urlParams = new InsensitiveURLSearchParams(\r\n\t\twindow.location.search\r\n\t).getObjectLower();\r\n\r\n\tif (parseInt(urlParams.crlead) === 1) {\r\n\t\tconst pid = urlParams.propertyid;\r\n\r\n\t\tif (pid) {\r\n\t\t\t//only found the crLead in one spot so adding an applicable note\r\n\t\t\twindow.gHub.addLead(\"Manually entered address property comparison\", {\r\n\t\t\t\tpropertyId: pid,\r\n\t\t\t});\r\n\t\t}\r\n\t} else if (urlParams.token) {\r\n\t\twindow.gHub.initLandingPageData(urlParams.ctaid);\r\n\t} else {\r\n\t\twindow.gHub.hookShowOptIn(urlParams.ctaid, null, false);\r\n\t}\r\n\r\n\t/***********************\r\n\t *\r\n\t * Vanilla version of the jQuery slide toggle\r\n\t *\r\n\t * Toggling element needs a data-container attrbute with selector, eg <a data-container=\"#my-sliding-div\">, <a data-container=\".a-sliding-ul\">\r\n\t * Note that with a class-based selector, only the first element matched will toggle.\r\n\t *\r\n\t * Toggled element can have a a --toggle-height css var to set a minimum height when closed, eg <a style=\"--toggle-height: 200px;\">\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\".toggle\").forEach(el => {\r\n\t\tconst container = document.querySelector(el.dataset.container);\r\n\r\n\t\tif (container) {\r\n\t\t\tcontainer.classList.add(\"toggle-container\");\r\n\r\n\t\t\tel.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (!container.classList.contains(\"active\")) {\r\n\t\t\t\t\tcontainer.classList.add(\"active\");\r\n\t\t\t\t\tcontainer.style.height = \"auto\";\r\n\r\n\t\t\t\t\tconst height = container.clientHeight + \"px\";\r\n\r\n\t\t\t\t\tcontainer.style.height = \"0px\";\r\n\r\n\t\t\t\t\tsetTimeout(() => (container.style.height = height), 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.style.height = \"0px\";\r\n\r\n\t\t\t\t\tcontainer.addEventListener(\r\n\t\t\t\t\t\t\"transitionend\",\r\n\t\t\t\t\t\t() => container.classList.remove(\"active\"),\r\n\t\t\t\t\t\t{ once: true }\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t/***********************\r\n\t *\r\n\t * Scroll-to wrapper\r\n\t *\r\n\t * Add data-scroll-to attribute with selector, eg <a data-scroll-to=\"#my-sliding-div\">, <a data-scroll-to=\".a-sliding-ul\">\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\"[data-scroll-to]\").forEach(el =>\r\n\t\tel.addEventListener(\"click\", e => {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst target = document.querySelector(el.getAttribute(\"data-scroll-to\"));\r\n\r\n\t\t\tif (target) {\r\n\t\t\t\tconst y = target.getBoundingClientRect().top;\r\n\r\n\t\t\t\twindow.scrollTo({\r\n\t\t\t\t\ttop: y + window.pageYOffset - 80,\r\n\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t);\r\n\r\n\tdocument.querySelectorAll(\".funnel-create-lead\").forEach(el =>\r\n\t\tel.addEventListener(\"submit\", e => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t(async () => {\r\n\t\t\t\tconst popup = document.getElementById(\r\n\t\t\t\t\tel.dataset[\"thank-you\"] || \"form-thank-you\"\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (popup) {\r\n\t\t\t\t\tconst hidePopup = () => {\r\n\t\t\t\t\t\tpopup.classList.remove(\"visible\");\r\n\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t.getElementById(\"fl-thankyou-modal\")\r\n\t\t\t\t\t\t\t.classList.remove(\"hide\");\r\n\t\t\t\t\t\tpopup\r\n\t\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t\t.removeEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\t\t\t// These really need removing and some generic event code running instead\r\n\t\t\t\t\t\tconst modal = document.querySelector(\".modal.in\");\r\n\r\n\t\t\t\t\t\tif (modal) {\r\n\t\t\t\t\t\t\tmodal.classList.remove(\"in\");\r\n\t\t\t\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst backdrop = document.getElementById(\"backdrop\");\r\n\r\n\t\t\t\t\t\tif (backdrop) backdrop.style.display = \"none\";\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tpopup.classList.add(\"visible\");\r\n\r\n\t\t\t\t\tconst thankModal = document.getElementById(\"fl-thankyou-modal\");\r\n\r\n\t\t\t\t\tif (thankModal) thankModal.classList.add(\"hide\");\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t.addEventListener(\"click\", hidePopup);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet data = {};\r\n\r\n\t\t\t\tnew FormData(e.target).forEach((value, key) => (data[key] = value));\r\n\r\n\t\t\t\t//some forms are more complex so we want to format a more applicable message, if a formatter is not provided it will take what is given\r\n\t\t\t\tformatFormNote(data);\r\n\r\n\t\t\t\tconst lead = await window.gHub.addLead(data.note, data);\r\n\r\n\t\t\t\t//window.gHub.leadId is set in addLead in success so adding a check here, a lot of hooks on this event do not have null handling\r\n\t\t\t\tif (window.gHub.leadId)\r\n\t\t\t\t\tdocument.dispatchEvent(\r\n\t\t\t\t\t\tnew CustomEvent(\"genie-lead-created\", { detail: lead })\r\n\t\t\t\t\t);\r\n\t\t\t})();\r\n\t\t})\r\n\t);\r\n\r\n\tconst tagsAttr = \"data-genie-tags\";\r\n\tconst downloadAttr = \"data-download-url\";\r\n\tdocument.querySelectorAll(`[${downloadAttr}]`).forEach(el => {\r\n\t\tel.addEventListener(\"click\", event => {\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tlet downloadedNote;\r\n\r\n\t\t\tconst downloadFile = () => {\r\n\t\t\t\tconst anchor = document.createElement(\"a\");\r\n\t\t\t\tanchor.href = el.getAttribute(downloadAttr);\r\n\t\t\t\tanchor.target = \"_blank\";\r\n\t\t\t\tanchor.download = el.getAttribute(downloadAttr);\r\n\t\t\t\tanchor.click();\r\n\r\n\t\t\t\tlet downloadUrl = anchor.href;\r\n\r\n\t\t\t\tif (downloadUrl && downloadUrl.startsWith(\"/\"))\r\n\t\t\t\t\tdownloadUrl = `${window.location.origin}${downloadUrl}`;\r\n\r\n\t\t\t\tdownloadedNote = `File Downloaded - ${downloadUrl}`;\r\n\t\t\t};\r\n\r\n\t\t\tconst popup = document.getElementById(\"download-report\");\r\n\t\t\tif (popup && window.gHub.isLeadCapture) {\r\n\t\t\t\tconst hidePopup = () => {\r\n\t\t\t\t\tpopup.classList.remove(\"visible\");\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t.removeEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\"#download-report-submit\")\r\n\t\t\t\t\t\t.removeEventListener(\"click\", submitForm);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst submitForm = event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tconst address = document.getElementById(\"popup-email\").value;\r\n\r\n\t\t\t\t\tif (address) {\r\n\t\t\t\t\t\tdownloadFile();\r\n\t\t\t\t\t\thidePopup();\r\n\r\n\t\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\t\temailAddress: address,\r\n\t\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr), // Support tags on the element\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.getElementById(\"popup-valid-email\").style.display =\r\n\t\t\t\t\t\t\t\"block\";\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tpopup.classList.add(\"visible\");\r\n\r\n\t\t\t\tpopup\r\n\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t.addEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\tpopup\r\n\t\t\t\t\t.querySelector(\"#download-report-submit\")\r\n\t\t\t\t\t.addEventListener(\"click\", submitForm);\r\n\t\t\t} else {\r\n\t\t\t\tdownloadFile();\r\n\r\n\t\t\t\tif (window.gHub.getLeadId()) {\r\n\t\t\t\t\t//no lead capture here but we want to record the activty by passing the tags along\r\n\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr), // Support tags on the element\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tdocument.querySelectorAll(`[${tagsAttr}]`).forEach(el => {\r\n\t\t// Skip if managed by the downloadUrl handler\r\n\t\tif (!el.hasAttribute(downloadAttr)) {\r\n\t\t\tel.addEventListener(\"click\", () => {\r\n\t\t\t\t//the downloadUrl handler captures the email so this one is a bit different in that we MUST have lead in context\r\n\t\t\t\t//to fire of the update here.\r\n\t\t\t\tif (window.gHub.getLeadId()) {\r\n\t\t\t\t\t//TODO: consolidate duplicate code\r\n\t\t\t\t\tlet downloadedNote = \"File Downloaded\";\r\n\t\t\t\t\tlet downloadUrl = el.getAttribute(\"href\");\r\n\r\n\t\t\t\t\tif (downloadUrl) {\r\n\t\t\t\t\t\tif (downloadUrl.startsWith(\"/\"))\r\n\t\t\t\t\t\t\tdownloadUrl = `${window.location.origin}${downloadUrl}`;\r\n\r\n\t\t\t\t\t\tdownloadedNote = `${downloadedNote} - ${downloadUrl}`;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tdocument\r\n\t\t.querySelectorAll(`.genie-alternate:nth-child(odd)`)\r\n\t\t.forEach(el =>\r\n\t\t\tel.classList.add(\r\n\t\t\t\twindow.gHub.alternateShade && window.gHub.alternateShade !== \"\"\r\n\t\t\t\t\t? window.gHub.alternateShade\r\n\t\t\t\t\t: \"dark\"\r\n\t\t\t)\r\n\t\t);\r\n\r\n\twindow.requestAnimationFrame(() => window.gHub.lazyLoader(\"img.lazy\"));\r\n\r\n\twindow.gHub.galleryButton = (button, gallery) => {\r\n\t\tlet v = 1;\r\n\t\tconst captions = [\"Show Fewer\", \"Show More\"];\r\n\t\tbutton.addEventListener(\r\n\t\t\t\"click\",\r\n\t\t\te => (e.target.innerText = captions[(v ^= 1)])\r\n\t\t);\r\n\r\n\t\t/*\r\n\t\t ToDo: hide button when the container doesn't overflow\r\n\t\tconst resizeObserver = new ResizeObserver(() => {\r\n\t\t\tbutton.style.display = gallery.clientHeight === gallery.scrollHeight ? \"none\" : \"block\";\r\n\t\t});\r\n\t\tresizeObserver.observe(gallery);\r\n\t\t*/\r\n\t};\r\n\r\n\tif (typeof window.gHub.galleryImages !== \"undefined\") {\r\n\t\tconst gallery = document.getElementById(\"property-gallery\");\r\n\r\n\t\tif (gallery) {\r\n\t\t\t//const Gallery = lazy(() => import(\"@/components/_Gallery\"));\r\n\t\t\tconst GalleryComponent = () => (\r\n\t\t\t\t<Gallery images={window.gHub.galleryImages} />\r\n\t\t\t);\r\n\r\n\t\t\trender(GalleryComponent, gallery);\r\n\t\t}\r\n\t}\r\n\r\n\tconst timedPopup = document.querySelector(\".timed-popup\");\r\n\tif (timedPopup) {\r\n\t\tsetTimeout(() => {\r\n\t\t\ttimedPopup.style.display = \"block\";\r\n\t\t}, 30000);\r\n\r\n\t\ttimedPopup\r\n\t\t\t.querySelectorAll(\"[data-dismiss='modal']\")\r\n\t\t\t.forEach(\r\n\t\t\t\tel =>\r\n\t\t\t\t\tel.addEventListener(\r\n\t\t\t\t\t\t\"click\",\r\n\t\t\t\t\t\t() => (timedPopup.style.display = \"none\")\r\n\t\t\t\t\t),\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t}\r\n\r\n\tdocument.dispatchEvent(new Event(\"genie-landing-loaded\"), true);\r\n\treturn null;\r\n};\r\n"],"names":["Gallery","props","currentPhoto","setCurrentPhoto","createSignal","photos","setPhotoCount","onMount","document","querySelectorAll","length","createEffect","left","offsetLeft","getElementById","style","moveGallery","direction","current","Math","min","max","_$createComponent","For","each","images","children","img","index","_el$3","_tmpl$2","_el$4","firstChild","_el$5","_el$6","_el$7","nextSibling","_el$8","_$setAttribute","$$click","body","classList","toggle","_el$","_tmpl$","_el$2","_$delegateEvents","AutoComplete","acInput","window","gHub","autoComplete","placeChanged","_ref$","_$use","_$insert","_$effect","_p$","_v$","containerStyle","_v$2","inputStyle","_$style","undefined","HomeValuationResult","place","property","withLeadCapture","leadCaptured","setLeadCaptured","getLeadNote","formattedNote","propertyID","address","zip","siteAddress","siteAddressZip","formatted_address","_tmpl$3","ClosePopup","LeafletMap","id","mapStyle","center","geometry","location","lat","lng","zoom","Marker","position","_tmpl$4","Show","when","LeadCaptureForm","leadNote","genieTags","existingData","_$memo","propertyId","PropertyResponse","_tmpl$5","Signature","_el$10","_tmpl$6","_el$11","_c$","firstOwnerFirstName","_el$18","_tmpl$10","toLowerCase","_tmpl$7","_el$14","_tmpl$8","value","Intl","NumberFormat","format","sumBuildingSqFt","title","bedrooms","bathrooms","yearBuilt","saleDate","dateFormat","Date","parse","map","s","i","_el$20","_tmpl$11","_el$21","_el$22","_el$23","_el$15","_tmpl$9","_el$16","_el$17","currency","avmLow","avmHigh","agent","useAgentData","loading","_tmpl$12","displayName","phone","email","HomeValuation","buttonCaption","areaId","useSettings","Context4Settings","showResult","setShowResult","setPlace","placeID","setPlaceID","createResource","searchAddress","Suspense","GeoArea","fillColor","LeafletPane","place_id","VIEWED","_LandingPages","lazyLoader","selector","lazyImages","slice","call","lazyImageObserver","IntersectionObserver","entries","forEach","entry","isIntersecting","lazyImage","target","src","dataset","remove","unobserve","observe","c","makeMap","options","layers","initMaps","buildMap","listings","group","L","featureGroup","l","isNaN","datatURI","size","anchor","color","getCssVar","state","trim","iconType","scale","flagURI","parseInt","salePrice","listPrice","circleURI","caption","icon","iconUrl","iconSize","iconAnchor","marker","addTo","fitMarkers","Object","keys","getBounds","fitBounds","padding","geoJson","geoJSON","onEachFeature","feature","layer","invalidateSize","input","bounds","initAutocomplete","places","google","maps","Autocomplete","componentRestrictions","country","types","event","addListener","getPlace","spinner","fill","petals","name","el","getComputedStyle","getPropertyValue","hex2rgba","hex","alpha","re","r","g","b","match","x","text","svg","encodeURIComponent","price","redirectToParentAsset","additionalParams","url","origin","pathname","replace","split","join","urlParams","URLSearchParams","search","delete","key","append","href","toString","randomPriceString","floor","random","getPropertyIdFromUrl","InsensitiveURLSearchParams","get","getLeadId","settings","leadId","genieLeadId","addEventListener","e","updateLead","detail","getLandingPageData","skipLeadCreate","fromEntries","agentId","hideAVM","propertyid","landingPageData","mergeTrackingData","postTracking","defaultTrackingData","defaults","trackingData","trackingDataFromSettings","trackingdata","reduce","destination","utm_source","utmSource","capture","utmMedium","utm_medium","utmCampaign","utm_campaign","utmTerm","utm_term","utmContent","utm_content","pageUtmSource","pageUtmCampaign","formatNewLeadReferringUrl","postedData","referringUrl","mlsNumber","mlsId","setFormPrepopInputs","leadEmailAddress","leadPhoneNumber","formatPhoneNumber","addLead","note","data","leadareaId","leadPropertyId","firstName","firstname","lastName","lastname","fullName","emailAddress","emailaddress","notePrompt","createLead","result","phoneNumber","preventDefault","popHomeValue","dynamicPopupId","addDynamicPopup","render","App","Provider","createScrollTracker","ctaData","lastScrollTop","scrollAmount","scrollPercentage","onScroll","scrollTop","pageYOffset","documentElement","scrollableHeight","scrollHeight","innerHeight","abs","showOptIn","removeEventListener","toggleMobileBanner","show","mobileBanner","display","mobileBannerText","mobileBannerCta","mobileBannerClose","ctaMobileBannerText","ctaMobileBannerNote","ctaMobileBannerTags","ctaDisplayed","hookShowOptIn","ctaIdUrlParam","ctaIdShortDataValue","hasLeadData","ctaId","getCtaData","enabled","showMobileBanner","isMobileDevice","setTimeout","delay","scrollUpPercentage","scrollDownPercentage","LeadCtaTag","initLandingPageData","urlParamCtaid","lpData","lead","leadAddress","getObjectLower","crlead","pid","token","ctaid","container","querySelector","add","contains","height","once","clientHeight","getAttribute","y","getBoundingClientRect","top","scrollTo","behavior","popup","hidePopup","modal","backdrop","thankModal","FormData","formatFormNote","dispatchEvent","CustomEvent","tagsAttr","downloadAttr","downloadedNote","downloadFile","createElement","download","click","downloadUrl","startsWith","isLeadCapture","submitForm","hasAttribute","alternateShade","requestAnimationFrame","galleryButton","button","gallery","v","captions","innerText","galleryImages","GalleryComponent","timedPopup","Event"],"mappings":"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"}