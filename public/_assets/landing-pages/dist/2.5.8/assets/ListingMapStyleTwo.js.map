{"version":3,"file":"ListingMapStyleTwo.js","sources":["../../../../../../genie-components/src/embeds/ListingMapStyleTwo.jsx"],"sourcesContent":["import { format } from \"date-fns\";\r\n/* prettier-ignore */\r\nimport { HomeTypes, LeafletMap,GeoArea,\tListingsTable, ListingsShowing, Pagination,CircleMarker } from \"@/components\";\r\nimport { usePagination, filterListings } from \"@/utilities\";\r\n\r\nexport default () => {\r\n\tconst { currentPage, setPage, pageOffset, pageSize } = usePagination();\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPage(1);\r\n\t}, [period, setPage]);\r\n\r\n\tconst currentListings = filterListings(\r\n\t\tlistings,\r\n\t\tpropertyTypeID,\r\n\t\tperiod,\r\n\t\tsettings.mode\r\n\t);\r\n\tconst visibleListings = currentListings.slice(\r\n\t\tpageOffset,\r\n\t\tpageOffset + pageSize\r\n\t);\r\n\tconst color = window.gHub\r\n\t\t.getCssVar(`--${settings.mode.toLowerCase()}`, document.body)\r\n\t\t.trim();\r\n\r\n\tlet icon, subtitle;\r\n\tswitch (settings.mode.toLowerCase()) {\r\n\t\tcase \"active\":\r\n\t\t\ticon = \"home-speaker\";\r\n\t\t\tsubtitle = \"Active Listings\";\r\n\t\t\tbreak;\r\n\t\tcase \"pending\":\r\n\t\t\ticon = \"home-dot\";\r\n\t\t\tsubtitle = \"Pending Listings\";\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\ticon = \"home-speaker\";\r\n\t\t\tsubtitle = `${period} Month Sales`;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div style={{ display: \"flex\", width: \"100%\", marginBottom: 0 }}>\r\n\t\t\t\t<svg\r\n\t\t\t\t\tstyle={{ width: \"8vw\", height: \"8vw\", marginRight: \"2rem\" }}\r\n\t\t\t\t\tviewBox=\"0 0 200 200\">\r\n\t\t\t\t\t<rect\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\trx=\"15\"\r\n\t\t\t\t\t\tfillOpacity=\"100%\"\r\n\t\t\t\t\t\tfill={color}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M0 0 L0 140 L160 0 Z\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\"\r\n\t\t\t\t\t\tfillOpacity=\"0.1\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx=\"5%\"\r\n\t\t\t\t\t\ty=\"10%\"\r\n\t\t\t\t\t\tfont-size=\"165%\"\r\n\t\t\t\t\t\tfont-weight=\"bold\"\r\n\t\t\t\t\t\tdominantBaseline=\"hanging\"\r\n\t\t\t\t\t\tstyle=\"text-transform: uppercase\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\">\r\n\t\t\t\t\t\t{settings.mode}\r\n\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx=\"5%\"\r\n\t\t\t\t\t\ty=\"30%\"\r\n\t\t\t\t\t\tfont-weight=\"900\"\r\n\t\t\t\t\t\tfont-size=\"400%\"\r\n\t\t\t\t\t\tdominantBaseline=\"hanging\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\">\r\n\t\t\t\t\t\t{currentListings.length}\r\n\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tx=\"60%\"\r\n\t\t\t\t\t\ty=\"35%\"\r\n\t\t\t\t\t\twidth=\"35%\"\r\n\t\t\t\t\t\tpreserveAspectRatio=\"xMidYMid meet\"\r\n\t\t\t\t\t\thref={`/_assets/_img/icons/${icon}.svg`}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<rect\r\n\t\t\t\t\t\tid=\"rounded-rect\"\r\n\t\t\t\t\t\twidth=\"12%\"\r\n\t\t\t\t\t\theight=\"5%\"\r\n\t\t\t\t\t\tfill=\"var(--theme-heading-color)\"\r\n\t\t\t\t\t\tfillOpacity=\"0.1\"\r\n\t\t\t\t\t\ty=\"19%\"\r\n\t\t\t\t\t\tx=\"1%\"\r\n\t\t\t\t\t\trx=\"0.5%\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx=\"50%\"\r\n\t\t\t\t\t\ty=\"90%\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\"\r\n\t\t\t\t\t\tfont-size=\"180%\"\r\n\t\t\t\t\t\tfont-weight=\"bold\"\r\n\t\t\t\t\t\ttextAnchor=\"middle\">\r\n\t\t\t\t\t\t{format(new Date(), \"MMM yyyy\")}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2\r\n\t\t\t\t\t\tclass=\"upper\"\r\n\t\t\t\t\t\tstyle={`margin-bottom: 0.5rem; font-size: 220%; font-weight: 99; align-self: self-start; color: ${color}`}>\r\n\t\t\t\t\t\t{areaName}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4\r\n\t\t\t\t\t\tclass=\"upper\"\r\n\t\t\t\t\t\tstyle={`margin: 0.5rem 0; font-weight: 300; align-self: self-start; color: ${color}`}>\r\n\t\t\t\t\t\tMarket Report\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\ttextAlign: \"right\",\r\n\t\t\t\t\t\tflexGrow: 1,\r\n\t\t\t\t\t\tcolor: color,\r\n\t\t\t\t\t\talignSelf: \"flex-end\",\r\n\t\t\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<h3 style=\"font-size: 175%\">{subtitle}</h3>\r\n\t\t\t\t\t<h4 style=\"font-weight: 300; font-size: 100%; color: var(--theme-body-color)\">\r\n\t\t\t\t\t\t{format(new Date(), \"EEEE, MMMM d, yyyy\")}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<HomeTypes\r\n\t\t\t\tcontainer={`MarketActivity-${settings.areaid}`}\r\n\t\t\t\tstyle=\"margin: 0.5rem\"\r\n\t\t\t\tshowPeriod={settings.mode.toLowerCase() === \"sold\"}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\twidth: `100%`,\r\n\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\tgridTemplateColumns: \"300px 1fr\",\r\n\t\t\t\t\tborderRadius: \"15px\",\r\n\t\t\t\t\tborder: \"2px solid\",\r\n\t\t\t\t\tborderColor: color,\r\n\t\t\t\t\tmarginBottom: \"0.25rem\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<LeafletMap\r\n\t\t\t\t\tmapStyle={settings.mapstyle || \"satellite-streets-v11\"}\r\n\t\t\t\t\tzoomControl={true}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: `100%`,\r\n\t\t\t\t\t\theight: `100%`,\r\n\t\t\t\t\t\tborderRadius: \"15px\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<GeoArea\r\n\t\t\t\t\t\tareaId={settings.areaid}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: \"#feff00\",\r\n\t\t\t\t\t\t\tfillOpacity: 0,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{visibleListings &&\r\n\t\t\t\t\t\tvisibleListings.map((l, i) => (\r\n\t\t\t\t\t\t\t<CircleMarker\r\n\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\tcaption={pageOffset * pageSize + i + 1}\r\n\t\t\t\t\t\t\t\tkey={i + pageOffset * pageSize}\r\n\t\t\t\t\t\t\t\tposition={[l.latitude, l.longitude]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</LeafletMap>\r\n\t\t\t\t<ListingsTable\r\n\t\t\t\t\tmode={() => settings.mode}\r\n\t\t\t\t\tlistings={visibleListings}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\tcolor: \"var(--theme-body-color)\",\r\n\t\t\t\t\t\tborderRadius: \"15px\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<div style=\"font-size:80%\">\r\n\t\t\t\t\t<ListingsShowing\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\tpageOffset={pageOffset}\r\n\t\t\t\t\t\tdata={currentListings}\r\n\t\t\t\t\t\tmode={() => settings.mode}\r\n\t\t\t\t\t\tperiod={period}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\tdata={() => currentListings.length}\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\tpageChange={page => setPage(page)}\r\n\t\t\t\t\tstyle=\"align-self:flex-end; margin: 0.25rem 0\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n"],"names":["ListingMapStyleTwo","currentPage","setPage","pageOffset","pageSize","usePagination","useEffect","period","currentListings","filterListings","listings","propertyTypeID","settings","mode","visibleListings","slice","color","window","gHub","getCssVar","toLowerCase","document","body","trim","icon","subtitle","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_el$7","_el$8","_el$9","_el$0","_el$1","_el$10","_el$11","_el$12","_el$13","style","setProperty","length","_$setAttribute","_$insert","format","Date","areaName","removeProperty","_$effect","_p$","_v$","_v$2","e","_$style","t","undefined","_$createComponent","HomeTypes","container","areaid","showPeriod","_el$14","_tmpl$2","LeafletMap","mapStyle","mapstyle","zoomControl","width","height","borderRadius","children","GeoArea","areaId","fillOpacity","_$memo","map","l","i","CircleMarker","caption","key","position","latitude","longitude","ListingsTable","_el$15","_tmpl$3","_el$16","ListingsShowing","data","Pagination","pageChange","page"],"mappings":"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"}