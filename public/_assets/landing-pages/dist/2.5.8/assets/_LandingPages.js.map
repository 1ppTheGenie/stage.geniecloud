{"version":3,"file":"_LandingPages.js","sources":["../../../../../../genie-components/src/components/_Gallery.jsx","../../../../../../genie-components/src/components/AutoComplete.jsx","../../../../../../genie-components/src/components/HomeValuationResult.jsx","../../../../../../genie-components/src/components/_HomeValuation.jsx","../../../../../../genie-components/src/landing/_LandingPages.jsx"],"sourcesContent":["import { For, onMount, createSignal, createEffect } from \"solid-js\";\r\n\r\nimport \"@/assets/css/gallery.css\";\r\nimport Icon from \"@/assets/icon-magnify.svg\";\r\n\r\nexport default props => {\r\n\tconst [currentPhoto, setCurrentPhoto] = createSignal(0);\r\n\tconst [photos, setPhotoCount] = createSignal(0);\r\n\r\n\tonMount(() => {\r\n\t\t//window.gHub.lazyLoader(\"#property-gallery img.lazy\");\r\n\t\tsetPhotoCount(document.querySelectorAll(\".property-images\").length);\r\n\t});\r\n\r\n\tcreateEffect(() => {\r\n\t\tconst left =\r\n\t\t\tdocument.querySelectorAll(\".property-images\")[currentPhoto()].offsetLeft;\r\n\r\n\t\tdocument.getElementById(\"property-gallery\").style.left = `-${left}px`;\r\n\t});\r\n\r\n\tconst moveGallery = direction => {\r\n\t\tsetCurrentPhoto(current =>\r\n\t\t\tMath.min(Math.max(current + direction, 0), photos() - 1)\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<For each={props.images}>\r\n\t\t\t\t{(img, index) => (\r\n\t\t\t\t\t<div class=\"property-images\">\r\n\t\t\t\t\t\t<div class=\"property-image\">\r\n\t\t\t\t\t\t\t<div class=\"property-single-image\">\r\n\t\t\t\t\t\t\t\t<div class=\"close\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\twidth=\"24px\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"24px\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"#fff\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t\t\t\t\t\t<g data-name=\"Layer 2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<g data-name=\"close\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform=\"rotate(180 12 12)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={img}\r\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\r\n\t\t\t\t\t\t\t\t\talt=\"Featured image from the property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclass=\"image-overlay-content\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tdocument.body.classList.toggle(\"lightbox\");\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentPhoto(index);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<div class=\"zoom-image\"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</For>\r\n\r\n\t\t\t<button onClick={() => moveGallery(-1)}></button>\r\n\t\t\t<button onClick={() => moveGallery(1)}></button>\r\n\t\t</>\r\n\t);\r\n};\r\n","import { onMount } from \"solid-js\";\r\n\r\nexport const AutoComplete = props => {\r\n\tlet acInput;\r\n\r\n\tonMount(() => {\r\n\t\twindow.gHub.autoComplete(acInput, props.placeChanged);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div style={props.containerStyle}>\r\n\t\t\t<input ref={acInput} type=\"text\" style={props.inputStyle} />\r\n\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { createSignal, Show } from \"solid-js\";\r\nimport { currency, dateFormat, useAgentData } from \"@/utilities\";\r\nimport { LeafletMap, LeadCaptureForm, Marker, ClosePopup } from \"@/components\";\r\n\r\nexport const HomeValuationResult = props => {\r\n\tconst { place, property, withLeadCapture = true } = props;\r\n\tconst [leadCaptured, setLeadCaptured] = createSignal(!withLeadCapture);\r\n\r\n  const getLeadNote = () => {\r\n    let formattedNote = \"Custom valuation request for\";    \r\n\r\n    //landing page data\r\n    if(property()?.propertyID && property()?.address)\r\n      formattedNote = `${formattedNote} ${property().address}, ${property().zip}`;\r\n    //direct property api result data\r\n    else if (property()?.propertyID && property()?.siteAddress)\r\n      formattedNote = `${formattedNote} ${property().siteAddress}, ${property().siteAddressZip}`;\r\n    else if(place()?.formatted_address)\r\n      formattedNote = `${formattedNote} ${place().formatted_address}`;\r\n    else\r\n      formattedNote = \"A new home valuation lead from TheGenie!\";\r\n\r\n    return formattedNote;\r\n  };\r\n  \r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h2 class=\"home-value-title no-background\">\r\n\t\t\t\tGet your personalized home report\r\n\t\t\t</h2>\r\n\t\t\t<div class=\"home-value-result\">\r\n\t\t\t\t<ClosePopup />\r\n\r\n\t\t\t\t<LeafletMap\r\n\t\t\t\t\tid=\"genie-result-map\"\r\n\t\t\t\t\tstyle=\"width:100%; height:380px\"\r\n\t\t\t\t\tmapStyle=\"satellite-streets-v11\"\r\n\t\t\t\t\tcenter={[\r\n\t\t\t\t\t\tplace().geometry.location.lat(),\r\n\t\t\t\t\t\tplace().geometry.location.lng(),\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tzoom={22}>\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tposition={[\r\n\t\t\t\t\t\t\tplace().geometry.location.lat(),\r\n\t\t\t\t\t\t\tplace().geometry.location.lng(),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</LeafletMap>\r\n\r\n\t\t\t\t<div style=\"margin:-5vh 5vw;padding-bottom: 4vh;z-index:999999;position:relative;\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"invert center\"\r\n\t\t\t\t\t\tstyle=\"padding: 1vw; border-radius: 10px; box-shadow: 0px 2px 10px #0003;\">\r\n\t\t\t\t\t\t{leadCaptured && <h3>Home Value Range Report for</h3>}\r\n\r\n\t\t\t\t\t\t<h4 style=\"font-size: 100%\">{place().formatted_address}</h4>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Show when={withLeadCapture && !leadCaptured()}>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tFill out the fields below and we'll send you your personalized\r\n\t\t\t\t\t\t\treport\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<LeadCaptureForm\r\n\t\t\t\t\t\t\tsetLeadCaptured={setLeadCaptured}\r\n\t\t\t\t\t\t\tleadNote={getLeadNote()}\r\n              genieTags=\"RequestCustomValuation, OptInContact\"              \r\n\t\t\t\t\t\t\texistingData={property() && { propertyId: property().propertyID }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Show>\r\n\r\n\t\t\t\t\t<Show when={leadCaptured()}>\r\n\t\t\t\t\t\t<PropertyResponse property={property()} />\r\n\t\t\t\t\t</Show>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst PropertyResponse = props => {\r\n\tconst { property } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{typeof property === \"undefined\" && (\r\n\t\t\t\t<p class=\"invert\" style=\"text-align:left;padding:2vw\">\r\n\t\t\t\t\tSorry, we were not able to locate a home valuation for your property\r\n\t\t\t\t\tabove. Not a problem, we will look into this and get back to you\r\n\t\t\t\t\tshortly. I look forward to discussing the information with you very\r\n\t\t\t\t\tsoon and to help you get top dollar for your home.\r\n\t\t\t\t\t<Signature />\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{typeof property !== \"undefined\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div class=\"invert\" style=\"text-align:left;padding:1vw;margin:2vh 0\">\r\n\t\t\t\t\t\t{property.firstOwnerFirstName &&\r\n\t\t\t\t\t\t\tproperty.firstOwnerFirstName !== \"\" && (\r\n\t\t\t\t\t\t\t\t<p style=\"text-transform:capitalize\">\r\n\t\t\t\t\t\t\t\t\tHi {property.firstOwnerFirstName.toLowerCase()}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tHere is the initial valuation we found for your address. This\r\n\t\t\t\t\t\t\tautomated valuation is one way to get a general idea, but it is\r\n\t\t\t\t\t\t\timportant to realize an algorithm can't provide the accuracy\r\n\t\t\t\t\t\t\tyou'll want if you are thinking about selling. Many factors that\r\n\t\t\t\t\t\t\tcan't be squeezed into a data field impact your market value, from\r\n\t\t\t\t\t\t\tupdates and improvements you have (or have not yet) made, to\r\n\t\t\t\t\t\t\twhat's located next door or a block away, to recent, sometimes\r\n\t\t\t\t\t\t\trapidly changing, market trends. Our role as realtors is to take\r\n\t\t\t\t\t\t\tall of this into consideration. If you are thinking about selling,\r\n\t\t\t\t\t\t\tplease call for a real-time, real-world value for your most\r\n\t\t\t\t\t\t\timportant investment! Looking forward to helping you get top\r\n\t\t\t\t\t\t\tdollar for your home.\r\n\t\t\t\t\t\t\t<Signature />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<h3 style=\"margin-bottom:1vh;color:var(--theme-heading-color);\">\r\n\t\t\t\t\t\tConfirm Home Details\r\n\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t<div class=\"invert home-value-details\">\r\n\t\t\t\t\t\t{[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: Intl.NumberFormat(\"en-US\").format(\r\n\t\t\t\t\t\t\t\t\tproperty.sumBuildingSqFt\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\ttitle: \"SQUARE FT\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ value: property.bedrooms, title: \"BEDS\" },\r\n\t\t\t\t\t\t\t{ value: property.bathrooms, title: \"FULL BATHS\" },\r\n\t\t\t\t\t\t\t{ value: property.yearBuilt, title: \"BUILT IN\" },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: property.saleDate\r\n\t\t\t\t\t\t\t\t\t? dateFormat(Date.parse(property.saleDate))\r\n\t\t\t\t\t\t\t\t\t: \"n/a\",\r\n\t\t\t\t\t\t\t\ttitle: \"PURCHASED\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ value: \"Unknown\", title: \"LAST RENO\" },\r\n\t\t\t\t\t\t].map((s, i) => (\r\n\t\t\t\t\t\t\t<div key={s.title}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={`/_assets/_img/valuation-icon-${i + 1}.png`}\r\n\t\t\t\t\t\t\t\t\talt={`${s.title} icon`}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<h4>{s.title}</h4>\r\n\t\t\t\t\t\t\t\t<h5>{s.value}</h5>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"home-value-estimate\"\r\n\t\t\t\t\t\tstyle=\"color:var(--theme-heading-color)\">\r\n\t\t\t\t\t\t<h4>Estimated Value Range:</h4>\r\n\t\t\t\t\t\t<h5>{`${currency(property.avmLow)} - ${currency(\r\n\t\t\t\t\t\t\tproperty.avmHigh\r\n\t\t\t\t\t\t)}`}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst Signature = () => {\r\n\tconst agent = useAgentData();\r\n\r\n\treturn (\r\n\t\t<Show when={!agent.loading && agent()}>\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\tSincerely,\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\t{agent()?.displayName}\r\n\t\t\t<br />\r\n\t\t\t{agent()?.phone}\r\n\t\t\t<br />\r\n\t\t\t{agent()?.email}\r\n\t\t</Show>\r\n\t);\r\n};\r\n","import { createResource, createSignal, Suspense, Show } from \"solid-js\";\r\nimport {\r\n\tareaDataStore,\r\n\tuseSettings,\r\n\tContext4Settings,\r\n\tsearchAddress,\r\n} from \"@/utilities\";\r\nimport {\r\n\tAutoComplete,\r\n\tEditable,\r\n\tLeafletMap,\r\n\tLeafletPane,\r\n\tGeoArea,\r\n\tHomeValuationResult,\r\n\tClosePopup,\r\n} from \"@/components\";\r\n\r\nimport \"@/index.css\";\r\nimport \"@/assets/css/home-value.css\";\r\n\r\nexport default props => {\r\n\tconst { buttonCaption = \"Get your Value!\" } = props;\r\n\tconst { areaId, mapStyle, withLeadCapture } = useSettings(Context4Settings);\r\n\r\n\tconst [showResult, setShowResult] = createSignal(false);\r\n\tconst [place, setPlace] = createSignal();\r\n\tconst [placeID, setPlaceID] = createSignal();\r\n\tconst [property] = createResource(placeID, searchAddress); \r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Show when={showResult() === true}>\r\n\t\t\t\t<HomeValuationResult\r\n\t\t\t\t\tplace={place}\r\n\t\t\t\t\tproperty={property}\r\n\t\t\t\t\twithLeadCapture={true}\r\n\t\t\t\t/>\r\n\t\t\t</Show>\r\n\r\n\t\t\t<Show when={showResult() === false}>\r\n\t\t\t\t<h2 class=\"home-value-title no-background\">Let's find your home</h2>\r\n\t\t\t\t<div\r\n\t\t\t\t\tid=\"map-place-getter\"\r\n\t\t\t\t\tstyle=\"border-radius: 20px; width: 50vw; min-height: 450px;\">\r\n\t\t\t\t\t<ClosePopup />\r\n\r\n\t\t\t\t\t<LeafletMap\r\n\t\t\t\t\t\tstyle=\"width:100%;height:450px;margin:0;\"\r\n\t\t\t\t\t\tmapStyle={mapStyle || \"satellite-streets-v11\"}\r\n\t\t\t\t\t\tzoom={18}>\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Suspense>\r\n\t\t\t\t\t\t\t\t<GeoArea areaId={areaId} fillColor=\"var (--theme-color)\" />\r\n\t\t\t\t\t\t\t</Suspense>\r\n\r\n\t\t\t\t\t\t\t<LeafletPane>\r\n\t\t\t\t\t\t\t\t<div style=\"min-width:80%\">\r\n\t\t\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\t\t\tcontainerStyle=\"display:flex;min-width:80%;\"\r\n\t\t\t\t\t\t\t\t\t\tinputStyle=\"padding:10px 15px; border-radius:20px;border:2px solid black;outline:none;flex-basis:70%;flex-grow:1\"\r\n\t\t\t\t\t\t\t\t\t\tplaceChanged={place => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetPlaceID(place.place_id);\r\n\t\t\t\t\t\t\t\t\t\t\tsetPlace(place);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"border-radius:20px;border:2px solid black;background-color:black;color:#fff;margin-left:-35px;outline:none;cursor:pointer\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n                        if(place()) \r\n                          setShowResult(true);\r\n                      }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{buttonCaption}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</AutoComplete>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</LeafletPane>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t</LeafletMap>\r\n\t\t\t\t</div>\r\n\t\t\t</Show>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n","import { render } from \"solid-js/web\";\r\n//import { lazy } from \"solid-js\";\r\n\r\nimport {\r\n\tinitAutocomplete,\r\n\tsearchAddress,\r\n\tinitMaps,\r\n\tbuildMap,\r\n\tcreateLead,\r\n\tupdateLead,\r\n\tuseSettings,\r\n\tContext4Settings,\r\n\tlandingPageData,\r\n\tcurrency,\r\n\taddDynamicPopup,\r\n\tgetCtaData,\r\n\tformatFormNote,\r\n\tisMobileDevice,\r\n\tformatPhoneNumber,\r\n\tInsensitiveURLSearchParams,\r\n} from \"@/utilities\";\r\n\r\nimport \"@/index.css\";\r\n\r\nimport Gallery from \"@/components/_Gallery\";\r\nimport HomeValuation from \"@/components/_HomeValuation\";\r\nimport LeadCtaTag from \"@/components/_LeadCtaTag\";\r\n\r\nconst VIEWED = \"Viewed Landing Page\";\r\n\r\nexport default () => {\r\n\twindow.gHub.searchAddress = searchAddress;\r\n\r\n\twindow.gHub.lazyLoader = selector => {\r\n\t\tconst lazyImages = [].slice.call(document.querySelectorAll(selector));\r\n\r\n\t\tconst lazyImageObserver = new IntersectionObserver(entries => {\r\n\t\t\tentries.forEach(entry => {\r\n\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\tconst lazyImage = entry.target;\r\n\t\t\t\t\tlazyImage.src = lazyImage.dataset.src;\r\n\t\t\t\t\tlazyImage.classList.remove(\"lazy\");\r\n\t\t\t\t\tlazyImageObserver.unobserve(lazyImage);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tlazyImages.forEach(lazyImage => lazyImageObserver.observe(lazyImage));\r\n\t};\r\n\r\n\twindow.gHub.currency = c => currency(c);\r\n\r\n\twindow.gHub.makeMap = async (id, options = null, layers = null) => {\r\n\t\tawait initMaps();\r\n\r\n\t\tconst map = buildMap(\r\n\t\t\ttypeof id === \"string\" ? document.getElementById(id) : id,\r\n\t\t\toptions\r\n\t\t);\r\n\r\n\t\tif (layers && layers.listings) {\r\n\t\t\tconst group = new window.L.featureGroup();\r\n\r\n\t\t\tlayers.listings.forEach(l => {\r\n\t\t\t\tif (!isNaN(l.lat) && !isNaN(l.lng)) {\r\n\t\t\t\t\tlet datatURI, size, anchor;\r\n\r\n\t\t\t\t\tconst color =\r\n\t\t\t\t\t\tl.color ||\r\n\t\t\t\t\t\twindow.gHub.getCssVar(`--${l.state}`, document.body).trim();\r\n\r\n\t\t\t\t\tswitch (l.iconType ?? \"circle\") {\r\n\t\t\t\t\t\tcase \"flag\":\r\n\t\t\t\t\t\t\tsize = [55 * scale, 38 * scale];\r\n\t\t\t\t\t\t\tanchor = [27 * scale, 38 * scale];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.flagURI(\r\n\t\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\t\twindow.gHub.currency(\r\n\t\t\t\t\t\t\t\t\tparseInt(l.state == \"sold\" ? l.salePrice : l.listPrice)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"dot\":\r\n\t\t\t\t\t\t\tsize = [15, 15];\r\n\t\t\t\t\t\t\tanchor = [9, 9];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.circleURI(color, \"\", 8);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsize = [34, 34];\r\n\t\t\t\t\t\t\tanchor = [12, 12];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.circleURI(color, l.caption || i + 1, 12);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar icon = window.L.icon({\r\n\t\t\t\t\t\ticonUrl: datatURI,\r\n\t\t\t\t\t\ticonSize: size,\r\n\t\t\t\t\t\ticonAnchor: anchor,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\twindow.L.marker([l.lat, l.lng], { icon: icon }).addTo(group);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroup.addTo(map);\r\n\r\n\t\t\tif (options.fitMarkers && Object.keys(group.getBounds()).length > 0) {\r\n\t\t\t\tmap.fitBounds(group.getBounds(), { padding: [60, 60] });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layers && layers.geoJson && options.fitMarkers) {\r\n\t\t\twindow.L.geoJSON(layers.geoJson, {\r\n\t\t\t\tonEachFeature: (feature, layer) => {\r\n\t\t\t\t\tmap.fitBounds(layer.getBounds(), { zoom: 22 });\r\n\t\t\t\t\tmap.invalidateSize();\r\n\t\t\t\t},\r\n\t\t\t}).addTo(map);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t};\r\n\r\n\twindow.gHub.autoComplete = (input, setPlace, bounds = null) => {\r\n\t\tinitAutocomplete(() => {\r\n\t\t\t/*var defaultBounds = new google.maps.LatLngBounds(\r\n\t\t\t\tnew google.maps.LatLng(40.518, 29.215),\r\n\t\t\t\tnew google.maps.LatLng(41.242, 30.37)\r\n\t\t\t);*/\r\n\r\n\t\t\tconst places = new google.maps.places.Autocomplete(input, {\r\n\t\t\t\tcomponentRestrictions: { country: \"us\" },\r\n\t\t\t\ttypes: [\"address\"],\r\n\t\t\t});\r\n\t\t\tgoogle.maps.event.addListener(\r\n\t\t\t\tplaces,\r\n\t\t\t\t\"place_changed\",\r\n\t\t\t\t() => setPlace && setPlace(places.getPlace())\r\n\t\t\t);\r\n\t\t});\r\n\t};\r\n\r\n\twindow.gHub.spinner = (fill, style = \"\") => {\r\n\t\tlet petals = \"\";\r\n\r\n\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\tpetals += `<g transform=\"rotate(${\r\n\t\t\t\ti * 30\r\n\t\t\t} 50 50)\"><rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"white\"><animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"${\r\n\t\t\t\t-0.9166 - i * -0.08333\r\n\t\t\t}s\" repeatCount=\"indefinite\"></animate></rect></g>`;\r\n\t\t}\r\n\r\n\t\treturn `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" style=\"${style}\"><circle cx=\"50\" cy=\"50\" r=\"47\" fill=\"${fill}\"/>${petals}</svg>`;\r\n\t};\r\n\r\n\twindow.gHub.getCssVar = (name, el) =>\r\n\t\tgetComputedStyle(el ?? document.body).getPropertyValue(name);\r\n\r\n\twindow.gHub.hex2rgba = (hex, alpha = 1) => {\r\n\t\tconst re = hex.length === 6 || hex.length === 8 ? /\\w\\w/g : /\\w/g;\r\n\t\tconst [r, g, b] = hex.match(re).map(x => parseInt(x, 16));\r\n\t\treturn `rgba(${r},${g},${b},${alpha})`;\r\n\t};\r\n\r\n\twindow.gHub.circleURI = (color, caption = \"\", size = 12) => {\r\n\t\tconst text =\r\n\t\t\tcaption === \"\"\r\n\t\t\t\t? \"\"\r\n\t\t\t\t: `<text x=\"12\" y=\"16\" fill=\"#fff\" text-anchor=\"middle\" style=\"font-family:sans-serif;font-weight:800;font-size:12px\">${caption}</text>`;\r\n\r\n\t\tconst svg = `\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size * 2 + 4}\" height=\"${\r\n\t\t\tsize * 2 + 4\r\n\t\t}\">\r\n\t\t<defs>\r\n\t\t\t<filter id=\"shadow\" x=\"0\" y=\"0\" width=\"${size}\" height=\"${size}\">\r\n\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/> \r\n\t\t\t\t<feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\r\n\t\t\t\t<feComponentTransfer>\r\n\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.5\"/>\r\n\t\t\t\t</feComponentTransfer>\r\n\t\t\t\t<feMerge> \r\n\t\t\t\t\t<feMergeNode/> \r\n\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"/> \r\n\t\t\t\t</feMerge>\r\n\t\t\t</filter>\r\n\t\t</defs>\r\n\t\t<circle fill=\"${color}\" cx=\"${size}\" cy=\"${size}\" r=\"${size}\" filter=\"url(#shadow)\" />\r\n\t\t${text}\r\n\t</svg>`;\r\n\r\n\t\treturn \"data:image/svg+xml,\" + encodeURIComponent(svg);\r\n\t};\r\n\r\n\twindow.gHub.flagURI = (color, price) => {\r\n\t\tconst svg = `\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11\" height=\"7.5\" viewBox=\"0 0 110 75\">\r\n\t\t<defs>\r\n\t\t\t<filter id=\"f1\" x=\"0\" y=\"0\" width=\"12\" height=\"12\">\r\n\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/> \r\n\t\t\t<feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\r\n\t\t\t<feComponentTransfer>\r\n\t\t\t<feFuncA type=\"linear\" slope=\"0.5\"/>\r\n\t\t\t</feComponentTransfer>\r\n\t\t\t<feMerge> \r\n\t\t\t<feMergeNode/> \r\n\t\t\t<feMergeNode in=\"SourceGraphic\"/> \r\n\t\t\t</feMerge>\r\n\t\t\t</filter>\r\n\t\t</defs>\r\n\t\t<path fill=\"${color}\" stroke=\"#fff\" stroke-width=\"3\" filter=\"url(#f1)\" d=\"M105.333,0.5H5.5c-2.75,0-5,2.25-5,5v38.333c0,2.75,2.25,5,5,5h38.733l10.101,20.834l12.152-20.834h38.848c2.75,0,5-2.25,5-5V5.5C110.333,2.75,108.083,0.5,105.333,0.5z\"/>\r\n\r\n\t\t<text x=\"55\" y=\"35\" style=\"font-size:28px;font-weight:bold;font-family:sans-serif\" text-anchor=\"middle\" fill=\"#FFFFFF\">${price}</text>\r\n\t</svg>`;\r\n\r\n\t\treturn \"data:image/svg+xml,\" + encodeURIComponent(svg);\r\n\t};\r\n\r\n\twindow.gHub.redirectToParentAsset = (additionalParams = {}) => {\r\n\t\tconst url = `${window.location.origin}${window.location.pathname\r\n\t\t\t.replace(\"/index.html\", \"\")\r\n\t\t\t.split(\"/\")\r\n\t\t\t.slice(0, -1)\r\n\t\t\t.join(\"/\")}/index.html`;\r\n\t\tconst urlParams = new URLSearchParams(window.location.search);\r\n\r\n\t\t// Remove the override\r\n\t\turlParams.delete(\"lpo\");\r\n\r\n\t\t// Add any additional params\r\n\t\tObject.keys(additionalParams).forEach(key =>\r\n\t\t\turlParams.append(key, additionalParams[key])\r\n\t\t);\r\n\r\n\t\twindow.location.href = `${url}?${urlParams.toString()}`;\r\n\t};\r\n\r\n\twindow.gHub.randomPriceString = (max = 2000001, min = 200000) => {\r\n\t\t// Format a random number\r\n\t\tconst formattedNumber = Math.floor(Math.random() * (max - min) + min)\r\n\t\t\t.toString()\r\n\t\t\t.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n\r\n\t\t// Replace numbers with letters\r\n\t\treturn formattedNumber\r\n\t\t\t.replace(/1/g, \"I\")\r\n\t\t\t.replace(/2/g, \"A\")\r\n\t\t\t.replace(/3/g, \"E\")\r\n\t\t\t.replace(/4/g, \"H\")\r\n\t\t\t.replace(/5/g, \"S\")\r\n\t\t\t.replace(/7/g, \"I\")\r\n\t\t\t.replace(/8/g, \"B\")\r\n\t\t\t.replace(/9/g, \"G\");\r\n\t};\r\n\r\n\t//this was the one giving casing issues so just want to centralize it.\r\n\twindow.gHub.getPropertyIdFromUrl = () => {\r\n\t\treturn new InsensitiveURLSearchParams(window.location.search).get(\r\n\t\t\t\"propertyId\"\r\n\t\t);\r\n\t};\r\n\r\n\twindow.gHub.getLeadId = (settings = useSettings(Context4Settings)) => {\r\n\t\treturn settings.leadId || settings.genieLeadId || window.gHub.leadId;\r\n\t};\r\n\r\n\tdocument.addEventListener(\"trigger-update-lead\", async e => {\r\n\t\tconst leadId = window.gHub.getLeadId();\r\n\t\tif (leadId) {\r\n\t\t\tawait updateLead({\r\n\t\t\t\tgenieLeadId: leadId,\r\n\t\t\t\t...e.detail,\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\twindow.gHub.getLandingPageData = async (skipLeadCreate = false) => {\r\n\t\tconst urlParams = Object.fromEntries(\r\n\t\t\tnew URLSearchParams(window.location.search)\r\n\t\t);\r\n\r\n\t\turlParams.agentId = window.gHub.agentId;\r\n\t\turlParams.hideAVM = window.gHub.hideAVM ?? false;\r\n\t\turlParams.skipLeadCreate = skipLeadCreate;\r\n\r\n\t\t//since we are converting to an object here we want in format of propertyId but from url it could be either Id or id\r\n\t\tconst propertyId = window.gHub.getPropertyIdFromUrl();\r\n\r\n\t\tif (propertyId) {\r\n\t\t\t//just in case it was lower in the URL remove it to avoid confusion\r\n\t\t\tdelete urlParams.propertyid;\r\n\t\t\turlParams.propertyId = propertyId;\r\n\t\t}\r\n\r\n\t\treturn await landingPageData(urlParams);\r\n\t};\r\n\r\n\twindow.gHub.mergeTrackingData = (\r\n\t\tpostTracking = {},\r\n\t\tsettings = useSettings(Context4Settings)\r\n\t) => {\r\n\t\tconst defaultTrackingData = window.gHub.defaults.trackingData || {};\r\n\r\n\t\t//I think this was legacy since it is going to utm_ while our create lead expects utmX, however this should handle all utmSource, utmsource, utm_source\r\n\t\tlet trackingDataFromSettings = settings.trackingdata\r\n\t\t\t? Object.keys(settings.trackingdata).reduce((destination, key) => {\r\n\t\t\t\t\tdestination[\r\n\t\t\t\t\t\tkey.toLowerCase().replace(\"_\", \"\").replace(\"utm\", \"utm_\")\r\n\t\t\t\t\t] = settings.trackingdata[key];\r\n\t\t\t\t\treturn destination;\r\n\t\t\t  }, {})\r\n\t\t\t: {};\r\n\r\n\t\t// if we have tracking data then source will be populated\r\n\t\tif (trackingDataFromSettings.utm_source) {\r\n\t\t\ttrackingDataFromSettings = {\r\n\t\t\t\tutmSource: capture.utm_source ?? null,\r\n\t\t\t\tutmMedium: capture.utm_medium ?? null,\r\n\t\t\t\tutmCampaign: capture.utm_campaign ?? null,\r\n\t\t\t\tutmTerm: capture.utm_term ?? null,\r\n\t\t\t\tutmContent: capture.utm_content ?? null,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tpostTracking = {\r\n\t\t\t...defaultTrackingData,\r\n\t\t\t...trackingDataFromSettings,\r\n\t\t\t...postTracking,\r\n\t\t};\r\n\r\n\t\tif (!postTracking.utmSource || postTracking.utmSource === \"url\") {\r\n\t\t\t//in the event someone lands on the page that was not driven by a short URL with tracking data\r\n\t\t\tconst pageUtmSource = document.getElementById(\"pageUtmSource\");\r\n\t\t\tconst pageUtmCampaign = document.getElementById(\"pageUtmCampaign\");\r\n\t\t\tpostTracking.utmSource = pageUtmSource?.value || window.location.href;\r\n\t\t\tpostTracking.utmCampaign = pageUtmCampaign?.value;\r\n\t\t}\r\n\r\n\t\treturn postTracking;\r\n\t};\r\n\r\n\twindow.gHub.formatNewLeadReferringUrl = (postedData, settings) => {\r\n\t\tlet referringUrl = `${window.location.origin}${window.location.pathname}?referral=true`;\r\n\r\n\t\tif (postedData.propertyId) {\r\n\t\t\treferringUrl += `&propertyId=${postedData.propertyId}`;\r\n\t\t}\r\n\r\n\t\tif (settings.mlsNumber) {\r\n\t\t\treferringUrl += `&mlsNumber=${settings.mlsNumber}`;\r\n\t\t}\r\n\r\n\t\tif (settings.mlsId) {\r\n\t\t\treferringUrl += `&mlsId=${settings.mlsId}`;\r\n\t\t}\r\n\r\n\t\treturn referringUrl;\r\n\t};\r\n\r\n\t//TODO: not sure if the best spot and if we should be string stuff like this on the gHub but\r\n\t//setting here so the can prepop form inputs if desired.\r\n\twindow.gHub.setFormPrepopInputs = (email, phone) => {\r\n\t\tif (email) window.gHub.leadEmailAddress = email;\r\n\r\n\t\tif (phone) window.gHub.leadPhoneNumber = formatPhoneNumber(phone);\r\n\t};\r\n\r\n\twindow.gHub.addLead = async (note, data = null) => {\r\n\t\tconst settings = useSettings(Context4Settings);\r\n\r\n\t\twindow.gHub.defaults = window.gHub.defaults || {};\r\n\r\n\t\tlet postedData = {\r\n\t\t\tagentId: settings.agentId,\r\n\t\t\tareaId: settings.leadareaId || settings.areaId,\r\n\t\t\tpropertyId:\r\n\t\t\t\tsettings.propertyId ??\r\n\t\t\t\twindow.gHub.defaults.leadPropertyId ??\r\n\t\t\t\twindow.gHub.getPropertyIdFromUrl(),\r\n\t\t\tfirstName: settings.firstname ?? null,\r\n\t\t\tlastName: settings.lastname ?? null,\r\n\t\t\tfullName: window.gHub.defaults.fullName ?? null,\r\n\t\t\temailAddress: settings.emailaddress ?? null,\r\n\t\t\tnote: note,\r\n\t\t\t...data,\r\n\t\t};\r\n\r\n\t\tconst leadId = window.gHub.getLeadId(settings);\r\n\r\n\t\tif (leadId) {\r\n\t\t\tif (note !== VIEWED) {\r\n\t\t\t\tpostedData.genieLeadId = leadId;\r\n\t\t\t\tpostedData.email = postedData.emailAddress;\r\n\r\n\t\t\t\tawait updateLead(postedData);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tpostedData.referringUrl = window.gHub.formatNewLeadReferringUrl(\r\n\t\t\t\tpostedData,\r\n\t\t\t\tsettings\r\n\t\t\t);\r\n\t\t\tpostedData.trackingData = window.gHub.mergeTrackingData(\r\n\t\t\t\tpostedData.trackingData,\r\n\t\t\t\tsettings\r\n\t\t\t);\r\n\r\n\t\t\t// Merge in any additional default settings\r\n\t\t\tif (window.gHub.defaults.notePrompt) {\r\n\t\t\t\tpostedData.note = `${window.gHub.defaults.notePrompt}: ${postedData.note}`;\r\n\t\t\t}\r\n\r\n\t\t\tconst r = await createLead(postedData);\r\n\r\n\t\t\tif (r.result?.key) {\r\n\t\t\t\twindow.gHub.leadId = r.result.key;\r\n\t\t\t\twindow.gHub.setFormPrepopInputs(\r\n\t\t\t\t\tpostedData.emailAddress,\r\n\t\t\t\t\tpostedData.phoneNumber\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn r.result;\r\n\t\t}\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Home Valuation component in popup\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\".request-home-value\").forEach(el => {\r\n\t\tel.addEventListener(\"click\", event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\twindow.gHub.popHomeValue();\r\n\t\t});\r\n\t});\r\n\r\n\twindow.gHub.popHomeValue = () => {\r\n\t\tconst dynamicPopupId = \"genie-homeValuePopup\";\r\n\r\n\t\tif (addDynamicPopup(dynamicPopupId)) {\r\n\t\t\tconst settings = useSettings(Context4Settings);\r\n\t\t\tconst App = () => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Context4Settings.Provider value={settings}>\r\n\t\t\t\t\t\t<HomeValuation />\r\n\t\t\t\t\t</Context4Settings.Provider>\r\n\t\t\t\t);\r\n\t\t\t};\r\n\r\n\t\t\trender(App, document.getElementById(dynamicPopupId));\r\n\t\t}\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Opt-in popup\r\n\t *\r\n\t ***********************/\r\n\twindow.gHub.createScrollTracker = (direction, ctaData) => {\r\n\t\tlet lastScrollTop = 0;\r\n\t\tlet scrollAmount = 0;\r\n\r\n\t\treturn function checkScrollAndShowModal(scrollPercentage) {\r\n\t\t\tfunction onScroll() {\r\n\t\t\t\tlet scrollTop =\r\n\t\t\t\t\twindow.pageYOffset || document.documentElement.scrollTop;\r\n\t\t\t\tlet scrollableHeight =\r\n\t\t\t\t\tdocument.documentElement.scrollHeight - window.innerHeight;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t(direction === \"down\" && scrollTop > lastScrollTop) ||\r\n\t\t\t\t\t(direction === \"up\" && scrollTop < lastScrollTop)\r\n\t\t\t\t) {\r\n\t\t\t\t\tscrollAmount += Math.abs(scrollTop - lastScrollTop);\r\n\r\n\t\t\t\t\tlet percentScrolled = (scrollAmount / scrollableHeight) * 100;\r\n\r\n\t\t\t\t\tif (percentScrolled >= scrollPercentage) {\r\n\t\t\t\t\t\twindow.gHub.showOptIn(ctaData);\r\n\t\t\t\t\t\twindow.removeEventListener(\"scroll\", onScroll);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscrollAmount = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlastScrollTop = scrollTop <= 0 ? 0 : scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\twindow.addEventListener(\"scroll\", onScroll);\r\n\t\t};\r\n\t};\r\n\r\n\twindow.gHub.toggleMobileBanner = (data, show) => {\r\n\t\tconst mobileBanner = document.getElementById(\"js-mobile-banner\");\r\n\r\n\t\tif (!show && mobileBanner) {\r\n\t\t\tmobileBanner.style.display = \"none\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst mobileBannerText = document.getElementById(\"js-mobile-banner-text\");\r\n\t\tconst mobileBannerCta = document.getElementById(\"js-mobile-banner-cta\");\r\n\t\tconst mobileBannerClose = document.getElementById(\"js-mobile-banner-close\");\r\n\r\n\t\tif (\r\n\t\t\tmobileBanner &&\r\n\t\t\tmobileBannerCta &&\r\n\t\t\tmobileBannerClose &&\r\n\t\t\tmobileBannerText\r\n\t\t) {\r\n\t\t\tmobileBannerText.value = data.ctaMobileBannerText;\r\n\r\n\t\t\tmobileBannerCta.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (window.gHub.getLeadId())\r\n\t\t\t\t\twindow.gHub.addLead(data.ctaMobileBannerNote, {\r\n\t\t\t\t\t\tgenieTags: data.ctaMobileBannerTags,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t//as long as the CTA has not been accepted we allow the mobile banner to re-trigger the display\r\n\t\t\t\twindow.gHub.ctaDisplayed = false;\r\n\t\t\t\twindow.gHub.showOptIn(data);\r\n\t\t\t});\r\n\r\n\t\t\tmobileBannerClose.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tmobileBanner.style.display = \"none\";\r\n\t\t\t});\r\n\r\n\t\t\tmobileBanner.style.display = \"block\";\r\n\t\t}\r\n\t};\r\n\r\n\twindow.gHub.hookShowOptIn = (\r\n\t\tctaIdUrlParam,\r\n\t\tctaIdShortDataValue,\r\n\t\thasLeadData\r\n\t) => {\r\n\t\t//url param will take precedence over what is supplied in short data\r\n\t\tconst ctaId = parseInt(ctaIdUrlParam) || parseInt(ctaIdShortDataValue);\r\n\t\tconst data = getCtaData(ctaId);\r\n\r\n\t\tif (!data.enabled) return;\r\n\r\n\t\tif (data.showMobileBanner && isMobileDevice()) {\r\n\t\t\twindow.gHub.toggleMobileBanner(data, true);\r\n\t\t}\r\n\r\n\t\tconst ctaHomeValueKey = 1; //home value has special handling and just pops an existing modal\r\n\r\n\t\tif (ctaId === ctaHomeValueKey)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\twindow.gHub.popHomeValue();\r\n\t\t\t}, data.delay * 1000);\r\n\t\telse if (hasLeadData) {\r\n\t\t\t//all the CTA's need a lead in context\r\n\t\t\tif (data.scrollUpPercentage > 0) {\r\n\t\t\t\tconst checkUpwardScrollAndShowModal = window.gHub.createScrollTracker(\r\n\t\t\t\t\t\"up\",\r\n\t\t\t\t\tdata\r\n\t\t\t\t);\r\n\t\t\t\tcheckUpwardScrollAndShowModal(data.scrollUpPercentage);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.scrollDownPercentage > 0) {\r\n\t\t\t\tconst checkDownwardScrollAndShowModal = window.gHub.createScrollTracker(\r\n\t\t\t\t\t\"down\",\r\n\t\t\t\t\tdata\r\n\t\t\t\t);\r\n\t\t\t\tcheckDownwardScrollAndShowModal(data.scrollDownPercentage);\r\n\t\t\t}\r\n\r\n\t\t\tif (data.delay > 0) {\r\n\t\t\t\tsetTimeout(() => window.gHub.showOptIn(data), data.delay * 1000);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\twindow.gHub.showOptIn = data => {\r\n\t\tconst settings = useSettings(Context4Settings);\r\n\r\n\t\tif (window.gHub.getLeadId(settings) && !window.gHub.ctaDisplayed) {\r\n\t\t\tconst dynamicPopupId = \"genie-leadCtaTagPopup\";\r\n\t\t\tif (addDynamicPopup(dynamicPopupId)) {\r\n\t\t\t\twindow.gHub.ctaDisplayed = true;\r\n\t\t\t\tconst App = () => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Context4Settings.Provider value={settings}>\r\n\t\t\t\t\t\t\t<LeadCtaTag ctaData={data} />\r\n\t\t\t\t\t\t</Context4Settings.Provider>\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\t\t\t\trender(App, document.getElementById(dynamicPopupId));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Get short/qr data\r\n\t *\r\n\t ***********************/\r\n\twindow.gHub.initLandingPageData = urlParamCtaid => {\r\n\t\t(async () => {\r\n\t\t\tconst lpData = await window.gHub.getLandingPageData();\r\n\r\n\t\t\tif (lpData.lead && lpData.lead.genieLeadId) {\r\n\t\t\t\tconst settings = useSettings(Context4Settings);\r\n\t\t\t\tsettings.trackingdata = lpData.lead.trackingData; //unsure on the casing descrepancy here but add lead maps it;\r\n\t\t\t\twindow.gHub.leadId = lpData.lead.genieLeadId;\r\n\r\n\t\t\t\tif (lpData.address && lpData.zip)\r\n\t\t\t\t\twindow.gHub.leadAddress = `${lpData.address}, ${lpData.zip}`;\r\n\r\n\t\t\t\twindow.gHub.setFormPrepopInputs(\r\n\t\t\t\t\tlpData.lead.emailAddress,\r\n\t\t\t\t\tlpData.lead.phoneNumber\r\n\t\t\t\t);\r\n\t\t\t\twindow.gHub.hookShowOptIn(urlParamCtaid, lpData.lead.ctaId, true);\r\n\t\t\t}\r\n\t\t})();\r\n\t};\r\n\r\n\t/***********************\r\n\t *\r\n\t * Global Url Param hook\r\n\t *\r\n\t ***********************/\r\n\tconst urlParams = new InsensitiveURLSearchParams(\r\n\t\twindow.location.search\r\n\t).getObjectLower();\r\n\r\n\tif (parseInt(urlParams.crlead) === 1) {\r\n\t\tconst pid = urlParams.propertyid;\r\n\r\n\t\tif (pid) {\r\n\t\t\t//only found the crLead in one spot so adding an applicable note\r\n\t\t\twindow.gHub.addLead(\"Manually entered address property comparison\", {\r\n\t\t\t\tpropertyId: pid,\r\n\t\t\t});\r\n\t\t}\r\n\t} else if (urlParams.token) {\r\n\t\twindow.gHub.initLandingPageData(urlParams.ctaid);\r\n\t} else {\r\n\t\twindow.gHub.hookShowOptIn(urlParams.ctaid, null, false);\r\n\t}\r\n\r\n\t/***********************\r\n\t *\r\n\t * Vanilla version of the jQuery slide toggle\r\n\t *\r\n\t * Toggling element needs a data-container attrbute with selector, eg <a data-container=\"#my-sliding-div\">, <a data-container=\".a-sliding-ul\">\r\n\t * Note that with a class-based selector, only the first element matched will toggle.\r\n\t *\r\n\t * Toggled element can have a a --toggle-height css var to set a minimum height when closed, eg <a style=\"--toggle-height: 200px;\">\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\".toggle\").forEach(el => {\r\n\t\tconst container = document.querySelector(el.dataset.container);\r\n\r\n\t\tif (container) {\r\n\t\t\tcontainer.classList.add(\"toggle-container\");\r\n\r\n\t\t\tel.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (!container.classList.contains(\"active\")) {\r\n\t\t\t\t\tcontainer.classList.add(\"active\");\r\n\t\t\t\t\tcontainer.style.height = \"auto\";\r\n\r\n\t\t\t\t\tconst height = container.clientHeight + \"px\";\r\n\r\n\t\t\t\t\tcontainer.style.height = \"0px\";\r\n\r\n\t\t\t\t\tsetTimeout(() => (container.style.height = height), 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.style.height = \"0px\";\r\n\r\n\t\t\t\t\tcontainer.addEventListener(\r\n\t\t\t\t\t\t\"transitionend\",\r\n\t\t\t\t\t\t() => container.classList.remove(\"active\"),\r\n\t\t\t\t\t\t{ once: true }\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t/***********************\r\n\t *\r\n\t * Scroll-to wrapper\r\n\t *\r\n\t * Add data-scroll-to attribute with selector, eg <a data-scroll-to=\"#my-sliding-div\">, <a data-scroll-to=\".a-sliding-ul\">\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\"[data-scroll-to]\").forEach(el =>\r\n\t\tel.addEventListener(\"click\", e => {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst target = document.querySelector(el.getAttribute(\"data-scroll-to\"));\r\n\r\n\t\t\tif (target) {\r\n\t\t\t\tconst y = target.getBoundingClientRect().top;\r\n\r\n\t\t\t\twindow.scrollTo({\r\n\t\t\t\t\ttop: y + window.pageYOffset - 80,\r\n\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t);\r\n\r\n\tdocument.querySelectorAll(\".funnel-create-lead\").forEach(el =>\r\n\t\tel.addEventListener(\"submit\", e => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t(async () => {\r\n\t\t\t\tconst popup = document.getElementById(\r\n\t\t\t\t\tel.dataset[\"thank-you\"] || \"form-thank-you\"\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (popup) {\r\n\t\t\t\t\tconst hidePopup = () => {\r\n\t\t\t\t\t\tpopup.classList.remove(\"visible\");\r\n\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t.getElementById(\"fl-thankyou-modal\")\r\n\t\t\t\t\t\t\t.classList.remove(\"hide\");\r\n\t\t\t\t\t\tpopup\r\n\t\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t\t.removeEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\t\t\t// These really need removing and some generic event code running instead\r\n\t\t\t\t\t\tconst modal = document.querySelector(\".modal.in\");\r\n\r\n\t\t\t\t\t\tif (modal) {\r\n\t\t\t\t\t\t\tmodal.classList.remove(\"in\");\r\n\t\t\t\t\t\t\tmodal.style.display = \"none\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst backdrop = document.getElementById(\"backdrop\");\r\n\r\n\t\t\t\t\t\tif (backdrop) backdrop.style.display = \"none\";\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tpopup.classList.add(\"visible\");\r\n\r\n\t\t\t\t\tconst thankModal = document.getElementById(\"fl-thankyou-modal\");\r\n\r\n\t\t\t\t\tif (thankModal) thankModal.classList.add(\"hide\");\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t.addEventListener(\"click\", hidePopup);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet data = {};\r\n\r\n\t\t\t\tnew FormData(e.target).forEach((value, key) => (data[key] = value));\r\n\r\n\t\t\t\t//some forms are more complex so we want to format a more applicable message, if a formatter is not provided it will take what is given\r\n\t\t\t\tformatFormNote(data);\r\n\r\n\t\t\t\tconst lead = await window.gHub.addLead(data.note, data);\r\n\r\n\t\t\t\t//window.gHub.leadId is set in addLead in success so adding a check here, a lot of hooks on this event do not have null handling\r\n\t\t\t\tif (window.gHub.leadId)\r\n\t\t\t\t\tdocument.dispatchEvent(\r\n\t\t\t\t\t\tnew CustomEvent(\"genie-lead-created\", { detail: lead })\r\n\t\t\t\t\t);\r\n\t\t\t})();\r\n\t\t})\r\n\t);\r\n\r\n\tconst tagsAttr = \"data-genie-tags\";\r\n\tconst downloadAttr = \"data-download-url\";\r\n\tdocument.querySelectorAll(`[${downloadAttr}]`).forEach(el => {\r\n\t\tel.addEventListener(\"click\", event => {\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tlet downloadedNote;\r\n\r\n\t\t\tconst downloadFile = () => {\r\n\t\t\t\tconst anchor = document.createElement(\"a\");\r\n\t\t\t\tanchor.href = el.getAttribute(downloadAttr);\r\n\t\t\t\tanchor.target = \"_blank\";\r\n\t\t\t\tanchor.download = el.getAttribute(downloadAttr);\r\n\t\t\t\tanchor.click();\r\n\r\n\t\t\t\tlet downloadUrl = anchor.href;\r\n\r\n\t\t\t\tif (downloadUrl && downloadUrl.startsWith(\"/\"))\r\n\t\t\t\t\tdownloadUrl = `${window.location.origin}${downloadUrl}`;\r\n\r\n\t\t\t\tdownloadedNote = `File Downloaded - ${downloadUrl}`;\r\n\t\t\t};\r\n\r\n\t\t\tconst popup = document.getElementById(\"download-report\");\r\n\t\t\tif (popup && window.gHub.isLeadCapture) {\r\n\t\t\t\tconst hidePopup = () => {\r\n\t\t\t\t\tpopup.classList.remove(\"visible\");\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t.removeEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\"#download-report-submit\")\r\n\t\t\t\t\t\t.removeEventListener(\"click\", submitForm);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst submitForm = event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tconst address = document.getElementById(\"popup-email\").value;\r\n\r\n\t\t\t\t\tif (address) {\r\n\t\t\t\t\t\tdownloadFile();\r\n\t\t\t\t\t\thidePopup();\r\n\r\n\t\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\t\temailAddress: address,\r\n\t\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr), // Support tags on the element\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.getElementById(\"popup-valid-email\").style.display =\r\n\t\t\t\t\t\t\t\"block\";\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tpopup.classList.add(\"visible\");\r\n\r\n\t\t\t\tpopup\r\n\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t.addEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\tpopup\r\n\t\t\t\t\t.querySelector(\"#download-report-submit\")\r\n\t\t\t\t\t.addEventListener(\"click\", submitForm);\r\n\t\t\t} else {\r\n\t\t\t\tdownloadFile();\r\n\r\n\t\t\t\tif (window.gHub.getLeadId()) {\r\n\t\t\t\t\t//no lead capture here but we want to record the activty by passing the tags along\r\n\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr), // Support tags on the element\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tdocument.querySelectorAll(`[${tagsAttr}]`).forEach(el => {\r\n\t\t// Skip if managed by the downloadUrl handler\r\n\t\tif (!el.hasAttribute(downloadAttr)) {\r\n\t\t\tel.addEventListener(\"click\", () => {\r\n\t\t\t\t//the downloadUrl handler captures the email so this one is a bit different in that we MUST have lead in context\r\n\t\t\t\t//to fire of the update here.\r\n\t\t\t\tif (window.gHub.getLeadId()) {\r\n\t\t\t\t\t//TODO: consolidate duplicate code\r\n\t\t\t\t\tlet downloadedNote = \"File Downloaded\";\r\n\t\t\t\t\tlet downloadUrl = el.getAttribute(\"href\");\r\n\r\n\t\t\t\t\tif (downloadUrl) {\r\n\t\t\t\t\t\tif (downloadUrl.startsWith(\"/\"))\r\n\t\t\t\t\t\t\tdownloadUrl = `${window.location.origin}${downloadUrl}`;\r\n\r\n\t\t\t\t\t\tdownloadedNote = `${downloadedNote} - ${downloadUrl}`;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tdocument\r\n\t\t.querySelectorAll(`.genie-alternate:nth-child(odd)`)\r\n\t\t.forEach(el =>\r\n\t\t\tel.classList.add(\r\n\t\t\t\twindow.gHub.alternateShade && window.gHub.alternateShade !== \"\"\r\n\t\t\t\t\t? window.gHub.alternateShade\r\n\t\t\t\t\t: \"dark\"\r\n\t\t\t)\r\n\t\t);\r\n\r\n\twindow.requestAnimationFrame(() => window.gHub.lazyLoader(\"img.lazy\"));\r\n\r\n\twindow.gHub.galleryButton = (button, gallery) => {\r\n\t\tlet v = 1;\r\n\t\tconst captions = [\"Show Fewer\", \"Show More\"];\r\n\t\tbutton.addEventListener(\r\n\t\t\t\"click\",\r\n\t\t\te => (e.target.innerText = captions[(v ^= 1)])\r\n\t\t);\r\n\r\n\t\t/*\r\n\t\t ToDo: hide button when the container doesn't overflow\r\n\t\tconst resizeObserver = new ResizeObserver(() => {\r\n\t\t\tbutton.style.display = gallery.clientHeight === gallery.scrollHeight ? \"none\" : \"block\";\r\n\t\t});\r\n\t\tresizeObserver.observe(gallery);\r\n\t\t*/\r\n\t};\r\n\r\n\tif (typeof window.gHub.galleryImages !== \"undefined\") {\r\n\t\tconst gallery = document.getElementById(\"property-gallery\");\r\n\r\n\t\tif (gallery) {\r\n\t\t\t//const Gallery = lazy(() => import(\"@/components/_Gallery\"));\r\n\t\t\tconst GalleryComponent = () => (\r\n\t\t\t\t<Gallery images={window.gHub.galleryImages} />\r\n\t\t\t);\r\n\r\n\t\t\trender(GalleryComponent, gallery);\r\n\t\t}\r\n\t}\r\n\r\n\tconst timedPopup = document.querySelector(\".timed-popup\");\r\n\tif (timedPopup) {\r\n\t\tsetTimeout(() => {\r\n\t\t\ttimedPopup.style.display = \"block\";\r\n\t\t}, 30000);\r\n\r\n\t\ttimedPopup\r\n\t\t\t.querySelectorAll(\"[data-dismiss='modal']\")\r\n\t\t\t.forEach(\r\n\t\t\t\tel =>\r\n\t\t\t\t\tel.addEventListener(\r\n\t\t\t\t\t\t\"click\",\r\n\t\t\t\t\t\t() => (timedPopup.style.display = \"none\")\r\n\t\t\t\t\t),\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t}\r\n\r\n\tdocument.dispatchEvent(new Event(\"genie-landing-loaded\"), true);\r\n\treturn null;\r\n};\r\n"],"names":["props","currentPhoto","setCurrentPhoto","createSignal","photos","setPhotoCount","onMount","document","querySelectorAll","length","createEffect","left","offsetLeft","getElementById","style","moveGallery","direction","Math","min","max","current","_$createComponent","For","each","images","children","img","index","_el$3","_tmpl$2","_el$4","firstChild","_el$5","_el$6","_el$7","nextSibling","_el$8","$$click","body","classList","toggle","_el$","_tmpl$","_el$2","_$delegateEvents","AutoComplete","acInput","window","gHub","autoComplete","placeChanged","_ref$","_$use","_$insert","_$effect","_p$","_v$","containerStyle","_v$2","inputStyle","e","_$style","t","undefined","HomeValuationResult","place","property","withLeadCapture","leadCaptured","setLeadCaptured","getLeadNote","formattedNote","propertyID","address","zip","siteAddress","siteAddressZip","formatted_address","_tmpl$3","ClosePopup","LeafletMap","id","mapStyle","center","geometry","location","lat","lng","zoom","Marker","position","_tmpl$4","Show","when","LeadCaptureForm","leadNote","genieTags","existingData","_$memo","propertyId","PropertyResponse","_tmpl$5","Signature","_el$0","_tmpl$6","_el$1","_c$","firstOwnerFirstName","_el$16","_tmpl$0","toLowerCase","_tmpl$7","_el$12","_tmpl$8","value","Intl","NumberFormat","format","sumBuildingSqFt","title","bedrooms","bathrooms","yearBuilt","saleDate","dateFormat","Date","parse","map","s","i","_el$18","_tmpl$1","_el$19","_el$20","_el$21","_$setAttribute","_el$13","_tmpl$9","_el$14","_el$15","currency","avmLow","avmHigh","agent","useAgentData","loading","_tmpl$10","displayName","phone","email","buttonCaption","areaId","useSettings","Context4Settings","showResult","setShowResult","setPlace","placeID","setPlaceID","createResource","searchAddress","Suspense","GeoArea","fillColor","LeafletPane","place_id","VIEWED","_LandingPages","lazyLoader","selector","lazyImages","slice","call","lazyImageObserver","IntersectionObserver","entries","forEach","entry","isIntersecting","lazyImage","target","src","dataset","remove","unobserve","observe","c","makeMap","options","layers","initMaps","buildMap","listings","group","L","featureGroup","l","isNaN","datatURI","size","anchor","color","getCssVar","state","trim","iconType","scale","flagURI","parseInt","salePrice","listPrice","circleURI","caption","icon","iconUrl","iconSize","iconAnchor","marker","addTo","fitMarkers","Object","keys","getBounds","fitBounds","padding","geoJson","geoJSON","onEachFeature","feature","layer","invalidateSize","input","bounds","initAutocomplete","places","google","maps","Autocomplete","componentRestrictions","country","types","event","addListener","getPlace","spinner","fill","petals","name","el","getComputedStyle","getPropertyValue","hex2rgba","hex","alpha","re","r","g","b","match","x","text","svg","encodeURIComponent","price","redirectToParentAsset","additionalParams","url","origin","pathname","replace","split","join","urlParams","URLSearchParams","search","delete","key","append","href","toString","randomPriceString","floor","random","getPropertyIdFromUrl","InsensitiveURLSearchParams","get","getLeadId","settings","leadId","genieLeadId","addEventListener","updateLead","detail","getLandingPageData","skipLeadCreate","fromEntries","agentId","hideAVM","propertyid","landingPageData","mergeTrackingData","postTracking","defaultTrackingData","defaults","trackingData","trackingDataFromSettings","trackingdata","reduce","destination","utm_source","utmSource","capture","utmMedium","utm_medium","utmCampaign","utm_campaign","utmTerm","utm_term","utmContent","utm_content","pageUtmSource","pageUtmCampaign","formatNewLeadReferringUrl","postedData","referringUrl","mlsNumber","mlsId","setFormPrepopInputs","leadEmailAddress","leadPhoneNumber","formatPhoneNumber","addLead","note","data","leadareaId","leadPropertyId","firstName","firstname","lastName","lastname","fullName","emailAddress","emailaddress","notePrompt","createLead","result","phoneNumber","preventDefault","popHomeValue","dynamicPopupId","addDynamicPopup","render","App","Provider","HomeValuation","createScrollTracker","ctaData","lastScrollTop","scrollAmount","scrollPercentage","onScroll","scrollTop","pageYOffset","documentElement","scrollableHeight","scrollHeight","innerHeight","abs","showOptIn","removeEventListener","toggleMobileBanner","show","mobileBanner","display","mobileBannerText","mobileBannerCta","mobileBannerClose","ctaMobileBannerText","ctaMobileBannerNote","ctaMobileBannerTags","ctaDisplayed","hookShowOptIn","ctaIdUrlParam","ctaIdShortDataValue","hasLeadData","ctaId","getCtaData","enabled","showMobileBanner","isMobileDevice","setTimeout","delay","scrollUpPercentage","scrollDownPercentage","LeadCtaTag","initLandingPageData","urlParamCtaid","lpData","lead","leadAddress","getObjectLower","crlead","pid","token","ctaid","container","querySelector","add","contains","height","once","clientHeight","getAttribute","y","getBoundingClientRect","top","scrollTo","behavior","popup","hidePopup","modal","backdrop","thankModal","FormData","formatFormNote","dispatchEvent","CustomEvent","tagsAttr","downloadAttr","downloadedNote","downloadFile","createElement","download","click","downloadUrl","startsWith","isLeadCapture","submitForm","hasAttribute","alternateShade","requestAnimationFrame","galleryButton","button","gallery","v","captions","innerText","galleryImages","GalleryComponent","Gallery","timedPopup","Event"],"mappings":"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"}