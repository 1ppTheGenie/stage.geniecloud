import{z as W,i as t,b as a,e as P,s as S,F as Y,t as h,y as j,c as M,a as H,S as N,f as O,m as D,d as Z}from"./index.js";import{H as q,b as K,P as Q}from"./_LeadCtaTag.js";import{c as J,w as X,a as ee,C as te,k as ie,r as ae,n as p,o as le,v as ne}from"./index2.js";import{G as re,C as se,L as oe}from"./LeafletMap.js";import{L as ce}from"./ListingsShowing.js";var de=h("<div id=listing-grid-view>"),ge=h('<svg viewBox="0 0 100 50"><image width=100% height=100% preserveAspectRatio="xMinYMid slice"></image><circle cx=5 cy=5 r=3.5 fill-opacity=0.6></circle><text font-size=5 x=5 y=5 text-anchor=middle dominant-baseline=middle fill=#fff></text><polygon points="275,0 424,0 0,425 0,275"fill-opacity=0.6></polygon><clipPath id=polyClip1 clipPathUnits=objectBoundingBox><path d="m 0 0 h 1 v 1 h -0.7 c -0.3 0 -0.3 0 -0.3 -1"></path></clipPath><rect x=50% width=50% height=30% clip-path=url(#polyClip1) fill-opacity=0.6></rect><text text-anchor=end font-size=5 x=95 y=2 dominant-baseline=hanging fill=#fff></text><text text-anchor=end font-size=7 x=95 y=8 dominant-baseline=hanging fill=#fff></text><g transform=translate(0,38)><rect height=12 width=100 fill-opacity=0.6></rect><text x=50 y=4 fill=var(--theme-body-background) text-anchor=middle dominant-baseline=middle font-size=5></text><text x=50 y=10 fill=var(--theme-body-background) text-anchor=middle dominant-baseline=middle font-size=4><tspan></tspan><tspan>BR | </tspan><tspan></tspan><tspan>BA | </tspan><tspan font-size=3> SQFT');const T={active:"--active-green",new:"--new-blue",pending:"--pending-yellow",sold:"--sold-red"},U="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=",he=({listings:l,mode:n})=>{const b=W(()=>`var(${T[n().toLowerCase()]})`);return(()=>{var _=de();return t(_,a(Y,{get each(){return l()},children:(r,z)=>(()=>{var $=ge(),o=$.firstChild,x=o.nextSibling,C=x.nextSibling,c=C.nextSibling,f=c.nextSibling,v=f.nextSibling,u=v.nextSibling,s=u.nextSibling,d=s.nextSibling,w=d.firstChild,i=w.nextSibling,g=i.nextSibling,y=g.firstChild,L=y.nextSibling,A=L.nextSibling,k=A.nextSibling,B=k.nextSibling;return o.addEventListener("error",e=>{e.target.getAttribute("href")!==U&&e.target.setAttribute("href",U)}),t(C,()=>z()+1),t(u,n=="Sold"?"Sold at":"Asking"),t(s,()=>J(r.priceHigh)),t(i,()=>X(r)),t(y,()=>r.bedrooms),t(A,()=>r.bathroomsTotal),t(g,()=>Intl.NumberFormat("en-US").format(r.sqft),B),P(e=>{var m=`${r.mlsNumber}:${r.latitude}:${r.longitude}`,V=r.photoPrimaryUrl,E=b(),G=b(),I=b(),R=`var(${T[n]})`;return m!==e.e&&S($,"key",e.e=m),V!==e.t&&S(o,"href",e.t=V),E!==e.a&&S(x,"fill",e.a=E),G!==e.o&&S(c,"fill",e.o=G),I!==e.i&&S(v,"fill",e.i=I),R!==e.n&&S(w,"fill",e.n=R),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),$})()})),_})()};var ve=h('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 448 512"><path fill=var(--theme-heading-color) d="M96 288H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM96 96H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z">');const me=(l={})=>(()=>{var n=ve();return j(n,l,!0,!0),n})();var pe=h('<svg viewBox="0 0 512 512"><path fill=var(--theme-heading-color) d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z">');const xe=(l={})=>(()=>{var n=pe();return j(n,l,!0,!0),n})();var fe=h('<h4 class="center upper subheading-market-activity"style=margin-bottom:5px> '),ue=h('<h1 class="center upper heading-market-activity"style=margin:0>Market Activity'),ye=h("<div>"),be=h('<div style="display:flex;flex-direction:row;justify-content:space-between;margin:1vh 0;font-size:85%;align-items:center;width:100%"><span>View Option</span><span>Status</span><select style="padding:0.25rem 0.5rem"></select><span>Sort By</span><select style="padding:0.25rem 0.5rem"></select><span>'),F=h("<option style=text-transform:capitalize>"),$e=h('<div class=map-key style=position:absolute;z-index:700;top:65px><svg style=width:380px;height:270px><rect width=100% height=15% fill=var(--theme-body-background)></rect><rect width=100% height=80% fill=#000 fill-opacity=0.57 y=15%></rect><text x=20 y=27 style=font-size:150% fill=var(--theme-body-color)></text><g style="transform:translate(20px, 70px)">'),we=h('<svg><g><circle cx=20 cy=5 r=17></circle><text x=20 y=5 fill=var(--white) text-Anchor=middle dominant-Baseline=middle style="font-size:100%;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></text><text x=50 y=7 fill=var(--white) dominant-Baseline=middle style="font-size:100%;font-weight:700;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></svg>',!1,!0,!1);const Me=()=>{const l=ee(te),[n,b]=M("Most Recent"),[_,r]=M("List"),[z,$]=M([]),[o,x]=M([]),[C]=M(!1),{currentPage:c,setPage:f,pageOffset:v,pageSize:u,setPageSize:s}=ie(8),[d,w]=M(l.mode?l.mode.charAt(0).toUpperCase()+l.mode.slice(1):"New");return H(()=>d()&&f(1)),H(()=>$(ae(le.listings,p.propertyTypeID,p.areaPeriod,d(),n()))),H(()=>x(z().slice(v(),v()+u()))),[(()=>{var i=fe(),g=i.firstChild;return t(i,()=>p.areaName,g),t(i,()=>p.propertyTypeID===0?"Homes":"Condos",null),i})(),ue(),a(q,{get container(){return`MarketActivity-${l.areaid}`},style:""}),(()=>{var i=ye();return t(i,a(Se,{setStatus:w}),null),t(i,a(oe,{get mapStyle(){return l.mapstyle||"satellite-streets-v11"},zoomControl:!0,style:"width:100%;height:100%;",get children(){return[a(re,{get areaId(){return l.areaid},style:"color:#feff00;fill-opacity:0"}),a(N,{get when(){return o().length},get children(){return o().map((g,y)=>a(se,{get color(){return ne(`--${d().toLowerCase()}`,document.getElementsByClassName("genie-wrap marketactivity")[0]).trim()},caption:y+1,key:y+v*u,get position(){return[g.latitude,g.longitude]}}))}})]}}),null),P(g=>O(i,`position:relative;width:100%;height:${C?"650px":"400px"}`,g)),i})(),D(()=>D(()=>o().length>0)()&&(()=>{var i=be(),g=i.firstChild,y=g.nextSibling,L=y.nextSibling,A=L.nextSibling,k=A.nextSibling,B=k.nextSibling;return t(i,a(xe,{style:"width:20px;height:auto",onClick:()=>{s(10),r("List")}}),y),t(i,a(me,{style:"width:20px;height:auto",onClick:()=>{s(8),r("Grid")}}),y),L.addEventListener("change",e=>{f(1),w(e.target.value)}),t(L,()=>["Pending","New","Active","Sold"].map(e=>(()=>{var m=F();return m.value=e,t(m,e),m})())),k.addEventListener("change",e=>{f(1),b(e.target.value)}),t(k,()=>["Most Recent","Price High","Price Low","Days on Market"].map(e=>(()=>{var m=F();return m.value=e,t(m,e),m})())),t(B,a(ce,{pageSize:u,currentPage:c,pageOffset:v,data:z,mode:d,get period(){return p.areaPeriod}})),P(()=>L.value=d()),P(()=>k.value=n()),i})()),a(N,{get when(){return _()==="List"},get children(){return a(K,{mode:d,listings:o,style:"width: 100%; color: var(--theme-body-color)"})}}),a(N,{get when(){return _()==="Grid"},get children(){return a(he,{mode:d,listings:o,style:"width: 100%; color: var(--theme-body-color)"})}}),a(Q,{data:z,currentPage:c,pageSize:u,pageChange:i=>f(i),style:"align-self: flex-end"})]},Se=({setStatus:l})=>{const n=[{total:p?.overall?.new,label:"New (active)",status:"new"},{total:p?.overall?.active,label:"Active",status:"active"},{total:p?.overall?.pending,label:"Pending",status:"pending"},{total:p.overall?.sold,label:"Sold",status:"sold"}];return(()=>{var b=$e(),_=b.firstChild,r=_.firstChild,z=r.nextSibling,$=z.nextSibling,o=$.nextSibling;return t($,()=>p.areaName),t(o,()=>n.map((x,C)=>(()=>{var c=we(),f=c.firstChild,v=f.nextSibling,u=v.nextSibling;return c.$$click=s=>l(x.status),S(c,"key",C),t(v,()=>x.total),t(u,()=>x.label),P(s=>{var d=`transform: translateY(${C*50}px)`,w=`var(--${x.status})`;return s.e=O(c,d,s.e),w!==s.t&&S(f,"fill",s.t=w),s},{e:void 0,t:void 0}),c})())),b})()};Z(["click"]);export{Me as default};
//# sourceMappingURL=MarketActivity.js.map
