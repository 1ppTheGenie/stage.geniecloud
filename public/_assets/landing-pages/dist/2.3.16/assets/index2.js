import{$ as h,p as H,q as M,v as B,c as O,w as G,j as P,a as b,o as K,x as V}from"./index.js";const W="genie-embed/v2/",J=async e=>(await g("get-agent-data",{agent_id:e})).result.agent,X=async e=>{const t=await g("get-area-data",e);return{stats:t.result.statistics,areaName:t.result.areaName}},Y=async(e,t,s)=>(t=!isNaN(t)&&parseInt(t)>0?t:12,(await g("get-area-properties",{areaId:e,areaPeriod:t,agentId:s})).result),Q=async e=>{const t=await g("get-area-monthly",e,"POST");return{stats:t.result.statistics,areaName:t.result.areaName}},pe=async e=>{const t=await g("get-area-polygon",{areaId:e});return t.success?t.result.polygon:{}},ge=async e=>await g("add-lead",e,"POST"),ye=async e=>await g("update-lead",e,"POST"),he=async e=>await g("get-landing-data",e),be=async e=>{if(e){const t=await g("address-search",{place_id:e});if(t.success===!0&&t.result.properties&&t.result.properties.length>0)return t.result.properties[0]}};async function g(e,t=null,s="GET"){let n=`${window.gHub.apiUrl}${W}${e}`;const a=new Headers;a.append("Content-Type","application/json"),a.append("Accept","application/json");const r={method:s,mode:"cors",cache:"no-cache",headers:a,referrerPolicy:"no-referrer"};return s==="POST"?r.body=t&&JSON.stringify(t):t&&(n+=`?${new URLSearchParams(Object.entries(t)).toString()}`),(await fetch(n,r)).json()}const k=Symbol("store-raw"),S=Symbol("store-node"),p=Symbol("store-has"),U=Symbol("store-self");function z(e){let t=e[h];if(!t&&(Object.defineProperty(e,h,{value:t=new Proxy(e,te)}),!Array.isArray(e))){const s=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let a=0,r=s.length;a<r;a++){const o=s[a];n[o].get&&Object.defineProperty(e,o,{enumerable:n[o].enumerable,get:n[o].get.bind(t)})}}return t}function N(e){let t;return e!=null&&typeof e=="object"&&(e[h]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function m(e,t=new Set){let s,n,a,r;if(s=e!=null&&e[k])return s;if(!N(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,c=e.length;o<c;o++)a=e[o],(n=m(a,t))!==a&&(e[o]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let l=0,i=o.length;l<i;l++)r=o[l],!c[r].get&&(a=e[r],(n=m(a,t))!==a&&(e[r]=n))}return e}function I(e,t){let s=e[t];return s||Object.defineProperty(e,t,{value:s=Object.create(null)}),s}function T(e,t,s){if(e[t])return e[t];const[n,a]=O(s,{equals:!1,internal:!0});return n.$=a,e[t]=n}function Z(e,t){const s=Reflect.getOwnPropertyDescriptor(e,t);return!s||s.get||!s.configurable||t===h||t===S||(delete s.value,delete s.writable,s.get=()=>e[h][t]),s}function x(e){M()&&T(I(e,S),U)()}function ee(e){return x(e),Reflect.ownKeys(e)}const te={get(e,t,s){if(t===k)return e;if(t===h)return s;if(t===H)return x(e),s;const n=I(e,S),a=n[t];let r=a?a():e[t];if(t===S||t===p||t==="__proto__")return r;if(!a){const o=Object.getOwnPropertyDescriptor(e,t);M()&&(typeof r!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(r=T(n,t,r)())}return N(r)?z(r):r},has(e,t){return t===k||t===h||t===H||t===S||t===p||t==="__proto__"?!0:(M()&&T(I(e,p),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ee,getOwnPropertyDescriptor:Z};function C(e,t,s,n=!1){if(!n&&e[t]===s)return;const a=e[t],r=e.length;s===void 0?(delete e[t],e[p]&&e[p][t]&&a!==void 0&&e[p][t].$()):(e[t]=s,e[p]&&e[p][t]&&a===void 0&&e[p][t].$());let o=I(e,S),c;if((c=T(o,t,a))&&c.$(()=>s),Array.isArray(e)&&e.length!==r){for(let l=e.length;l<r;l++)(c=o[l])&&c.$();(c=T(o,"length",r))&&c.$(e.length)}(c=o[U])&&c.$()}function q(e,t){const s=Object.keys(t);for(let n=0;n<s.length;n+=1){const a=s[n];C(e,a,t[a])}}function se(e,t){if(typeof t=="function"&&(t=t(e)),t=m(t),Array.isArray(t)){if(e===t)return;let s=0,n=t.length;for(;s<n;s++){const a=t[s];e[s]!==a&&C(e,s,a)}C(e,"length",n)}else q(e,t)}function D(e,t,s=[]){let n,a=e;if(t.length>1){n=t.shift();const o=typeof n,c=Array.isArray(e);if(Array.isArray(n)){for(let l=0;l<n.length;l++)D(e,[n[l]].concat(t),s);return}else if(c&&o==="function"){for(let l=0;l<e.length;l++)n(e[l],l)&&D(e,[l].concat(t),s);return}else if(c&&o==="object"){const{from:l=0,to:i=e.length-1,by:f=1}=n;for(let u=l;u<=i;u+=f)D(e,[u].concat(t),s);return}else if(t.length>1){D(e[n],t,[n].concat(s));return}a=e[n],s=[n].concat(s)}let r=t[0];typeof r=="function"&&(r=r(a,s),r===a)||n===void 0&&r==null||(r=m(r),n===void 0||N(a)&&N(r)&&!Array.isArray(r)?q(a,r):C(e,n,r))}function j(...[e,t]){const s=m(e||{}),n=Array.isArray(s),a=z(s);function r(...o){B(()=>{n&&o.length===1?se(s,o[0]):D(s,o)})}return[a,r]}const we=(e=!1)=>(window.gHub.propertyCaptions??"homes,home").split(",")[e?1:0],A=window.gHub.areaId,$=window.gHub.agentId,[y,re]=j({period:parseInt(window?.gHub?.areaPeriod??(document.getElementsByClassName("genie-embed").length?parseInt(document.getElementsByClassName("genie-embed")[0].getAttribute("data-genie-areaperiod")):12),10),propertyType:parseInt(window?.gHub?.propertyType??0,10)}),[Se,R]=j({loading:!0,listings:[],get active(){return[this.listings.reduce(w([1],0),0),this.listings.reduce(w([1],1),0)]},get sold(){return[this.listings.reduce(w([2],0),0),this.listings.reduce(w([2],1),0)]},get pending(){return[this.listings.reduce(w([3,4],0),0),this.listings.reduce(w([3,4],1),0)]}}),[De,L]=j({loading:!0,propertyTypeID:y.propertyType,stats:{},get propertyStats(){return this.stats.propertyTypeData&&this.stats.propertyTypeData[y.propertyType].statistics},get bedroomStats(){return this.propertyStats&&this.propertyStats.bedroomStats},get topSize(){return typeof this.bedroomStats<"u"?this.bedroomStats.reduce((e,t)=>e.sold>t.sold?e:t):{}},get percentChange(){return this.propertyStats&&this.propertyStats.avgSalePrice/this.propertyStats.previousPeriod.avgSalePrice-1},get totalSold(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.sold+this.stats.propertyTypeData[1].statistics.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.sold},get totalSoldLastPeriod(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.previousPeriod.sold+this.stats.propertyTypeData[1].statistics.previousPeriod.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.previousPeriod.sold},get soldDelta(){return this.totalSold/this.totalSoldLastPeriod-1},areaPeriod:y.period,areaId:A}),[me,ne]=j({loading:!0,propertyTypeID:y.propertyType,stats:{}});G(()=>{const[e,t]=O(y.period),[s]=P(e,async r=>{if(!isNaN(r))return await X({areaId:A,agentId:$,areaPeriod:r})}),[n]=P(A,async r=>await Q({areaId:r,agentId:$})),[a]=P(e,async r=>{if(!isNaN(r))return await Y(A,r,$)});return b(()=>{t(y.period),L({loading:!0,areaPeriod:y.period})}),b(()=>{L({propertyTypeID:y.propertyType})}),b(()=>{!s.loading&&typeof s()<"u"&&L({loading:!1,areaName:s().areaName,overall:s().stats.overall,stats:s().stats})}),b(()=>{!n.loading&&typeof n()<"u"&&ne({loading:!1,areaName:n().areaName,stats:[...n().stats]})}),b(()=>{!a.loading&&typeof a()<"u"&&R({listings:a()})}),b(()=>{R({loading:a.loading})}),[s,n,a,r=>t(r)]});const w=(e,t)=>(s,{statusTypeID:n,propertyTypeID:a})=>e.indexOf(n)>-1&&a===t?s+=1:s;function E(e){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(e)}function v(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function F(e){v(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||E(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var ae=36e5;function oe(e,t){return v(2,arguments),F(e).getTime()-F(t).getTime()}var _={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},ie="trunc";function ce(e){return e?_[e]:_[ie]}function le(e,t,s){v(2,arguments);var n=oe(e,t)/ae;return ce(s?.roundingMethod)(n)}const ue=V(),Te=(e,t={month:"2-digit",day:"2-digit",year:"numeric"})=>new Intl.DateTimeFormat("en-US",t).format(e),Pe=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}).format(e),Ae=e=>new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2}).format(e),Oe=(e,t)=>getComputedStyle(t??document.body).getPropertyValue(e),Ne=e=>`${e.streetNumber} ${e.streetName}`,Ie=()=>{},Ce=(e=10,t=1)=>{const[s,n]=O(e),[a,r]=O(t);return{pageSize:s,setPageSize:n,currentPage:a,setPage:r,pageOffset:()=>(a()-1)*s()}},de=e=>{const s={...typeof window.gHub<"u"?window.gHub:{},...e};K(()=>{s.areaPeriod&&re({period:parseInt(s.areaPeriod)})});const n=r=>r.toLowerCase().replaceAll("_","");return Object.keys(s).forEach(r=>delete Object.assign(s,{[n(r)]:s[r]})[r]),new Proxy(s,{get(r,o){return r[n(o)]},set(r,o,c){return Reflect.set(r,n(o),c)}})},je=(e,t,s,n="active",a)=>{let r,o;const c=new Date;c.setMonth(c.getMonth()-s);const l=new Date;switch(n.toString().toLocaleLowerCase()){case"sold":o=(i,f)=>{const u=Date.parse(i.soldDate),d=Date.parse(f.soldDate);return u<d?1:u>d?-1:0},r=e.filter(i=>i.statusType.toLowerCase()==="sold"&&i.propertyTypeID===t&&i.soldDate!==null&&Date.parse(i.soldDate)>=c.getTime());break;case"new":r=e.filter(i=>i.statusType.toLowerCase()==="active"&&Math.floor(le(Date.parse(i.listDate),l)/24)>-30&&i.propertyTypeID===t),o=(i,f)=>{const u=Date.parse(i.listDate),d=Date.parse(f.listDate);return u>d?-1:u<d?1:0};break;case"pending":o=(i,f)=>{const u=Date.parse(i.listDate),d=Date.parse(f.listDate);return u<d?1:u>d?-1:0},r=e.filter(i=>(i.statusType.toLowerCase()==="pending"||i.statusType.toLowerCase()==="contingent")&&i.propertyTypeID===t);break;case"active":default:o=(i,f)=>{const u=Date.parse(i.listDate),d=Date.parse(f.listDate);return u<d?1:u>d?-1:0},r=e.filter(i=>i.statusType.toLowerCase()===n.toLowerCase()&&i.propertyTypeID===t);break}return r.sort(o),r},$e=()=>{const{agentId:e}=de(ue),[t]=P(e,J);return t};export{ue as C,E as _,de as a,ye as b,Pe as c,Te as d,ge as e,Ce as f,y as g,De as h,Se as i,m as j,je as k,he as l,me as m,Oe as n,Ne as o,Ae as p,we as q,v as r,be as s,F as t,$e as u,pe as v,re as w,Ie as x};
//# sourceMappingURL=index2.js.map
