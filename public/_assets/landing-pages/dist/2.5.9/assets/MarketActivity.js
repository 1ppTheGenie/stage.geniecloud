import{g as H,i as e,b as n,e as B,s as L,F as W,t as h,y as j,c as M,a as V,S as E,f as O,d as Y}from"./index.js";import{H as Z,b as q,P as K}from"./_LeadCtaTag.js";import{c as Q,w as J,a as X,C as ee,k as te,r as ie,n as u,o as ne,v as ae}from"./index2.js";import{G as le,C as se,L as re}from"./LeafletMap.js";import{L as oe}from"./ListingsShowing.js";const ce=h('<div id="listing-grid-view">'),de=h('<svg viewBox="0 0 100 50"><image width="100%" height="100%" preserveAspectRatio="xMinYMid slice"></image><circle cx="5" cy="5" r="3.5" fill-opacity="0.6"></circle><text font-size="5" x="5" y="5" text-anchor="middle" dominant-baseline="middle" fill="#fff"></text><polygon points="275,0 424,0 0,425 0,275" fill-opacity="0.6"></polygon><clipPath id="polyClip1" clipPathUnits="objectBoundingBox"><path d="m 0 0 h 1 v 1 h -0.7 c -0.3 0 -0.3 0 -0.3 -1"></path></clipPath><rect x="50%" width="50%" height="30%" clip-path="url(#polyClip1)" fill-opacity="0.6"></rect><text text-anchor="end" font-size="5" x="95" y="2" dominant-baseline="hanging" fill="#fff"></text><text text-anchor="end" font-size="7" x="95" y="8" dominant-baseline="hanging" fill="#fff"></text><g transform="translate(0,38)"><rect height="12" width="100" fill-opacity="0.6"></rect><text x="50" y="4" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="5"></text><text x="50" y="10" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="4"><tspan></tspan><tspan>BR | </tspan><tspan></tspan><tspan>BA | </tspan><tspan font-size="3"> SQFT'),T={active:"--active-green",new:"--new-blue",pending:"--pending-yellow",sold:"--sold-red"},U="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=",ge=({listings:a,mode:l})=>{const y=H(()=>`var(${T[l().toLowerCase()]})`);return(()=>{const S=ce();return e(S,n(W,{get each(){return a()},children:(s,w)=>(()=>{const _=de(),d=_.firstChild,f=d.nextSibling,k=f.nextSibling,v=k.nextSibling,x=v.nextSibling,p=x.nextSibling,$=p.nextSibling,o=$.nextSibling,g=o.nextSibling,b=g.firstChild,i=b.nextSibling,r=i.nextSibling,z=r.firstChild,A=z.nextSibling,C=A.nextSibling,N=C.nextSibling,P=N.nextSibling;return d.addEventListener("error",t=>{t.target.getAttribute("href")!==U&&t.target.setAttribute("href",U)}),e(k,()=>w()+1),e($,l=="Sold"?"Sold at":"Asking"),e(o,()=>Q(s.priceHigh)),e(i,()=>J(s)),e(z,()=>s.bedrooms),e(C,()=>s.bathroomsTotal),e(r,()=>Intl.NumberFormat("en-US").format(s.sqft),P),B(t=>{const c=`${s.mlsNumber}:${s.latitude}:${s.longitude}`,m=s.photoPrimaryUrl,G=y(),I=y(),R=y(),D=`var(${T[l]})`;return c!==t._v$&&L(_,"key",t._v$=c),m!==t._v$2&&L(d,"href",t._v$2=m),G!==t._v$3&&L(f,"fill",t._v$3=G),I!==t._v$4&&L(v,"fill",t._v$4=I),R!==t._v$5&&L(p,"fill",t._v$5=R),D!==t._v$6&&L(b,"fill",t._v$6=D),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),_})()})),S})()},he=h('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="var(--theme-heading-color)" d="M96 288H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM96 96H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z">'),ve=(a={})=>(()=>{const l=he();return j(l,a,!0,!0),l})(),pe=h('<svg viewBox="0 0 512 512"><path fill="var(--theme-heading-color)" d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z">'),me=(a={})=>(()=>{const l=pe();return j(l,a,!0,!0),l})();const ue=h('<h4 class="center upper subheading-market-activity" style="margin-bottom:5px"> '),fe=h('<h1 class="center upper heading-market-activity" style="margin:0">Market Activity'),xe=h("<div>"),$e=h('<div style="display:flex;flex-direction:row;justify-content:space-between;margin:1vh 0;font-size:85%;align-items:center;width:100%"><span>View Option</span><span>Status</span><select style="padding:0.25rem 0.5rem"></select><span>Sort By</span><select style="padding:0.25rem 0.5rem"></select><span>'),F=h('<option style="text-transform:capitalize">'),ye=h('<div class="map-key" style="position:absolute;z-index:700;top:65px"><svg style="width:380px;height:270px"><rect width="100%" height="15%" fill="var(--theme-body-background)"></rect><rect width="100%" height="80%" fill="#000" fill-opacity="0.57" y="15%"></rect><text x="20" y="27" style="font-size:150%" fill="var(--theme-body-color)"></text><g style="transform:translate(20px, 70px)">'),_e=h('<svg><g><circle cx="20" cy="5" r="17"></circle><text x="20" y="5" fill="var(--white)" text-Anchor="middle" dominant-Baseline="middle" style="font-size:100%;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></text><text x="50" y="7" fill="var(--white)" dominant-Baseline="middle" style="font-size:100%;font-weight:700;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></svg>',!1,!0),ke=()=>{const a=X(ee),[l,y]=M("Most Recent"),[S,s]=M("List"),[w,_]=M([]),[d,f]=M([]),[k]=M(!1),{currentPage:v,setPage:x,pageOffset:p,pageSize:$,setPageSize:o}=te(8),[g,b]=M(a.mode?a.mode.charAt(0).toUpperCase()+a.mode.slice(1):"New");return V(()=>g()&&x(1)),V(()=>_(ie(ne.listings,u.propertyTypeID,u.areaPeriod,g(),l()))),V(()=>f(w().slice(p(),p()+$()))),[(()=>{const i=ue(),r=i.firstChild;return e(i,()=>u.areaName,r),e(i,()=>u.propertyTypeID===0?"Homes":"Condos",null),i})(),fe(),n(Z,{get container(){return`MarketActivity-${a.areaid}`},style:""}),(()=>{const i=xe();return e(i,n(be,{setStatus:b}),null),e(i,n(re,{get mapStyle(){return a.mapstyle||"satellite-streets-v11"},zoomControl:!0,style:"width:100%;height:100%;",get children(){return[n(le,{get areaId(){return a.areaid},style:"color:#feff00;fill-opacity:0"}),n(E,{get when(){return d().length},get children(){return d().map((r,z)=>n(se,{get color(){return ae(`--${g().toLowerCase()}`,document.getElementsByClassName("genie-wrap marketactivity")[0]).trim()},caption:z+1,key:z+p*$,get position(){return[r.latitude,r.longitude]}}))}})]}}),null),B(r=>O(i,`position:relative;width:100%;height:${k?"650px":"400px"}`,r)),i})(),H((()=>{const i=H(()=>d().length>0);return()=>i()&&(()=>{const r=$e(),z=r.firstChild,A=z.nextSibling,C=A.nextSibling,N=C.nextSibling,P=N.nextSibling,t=P.nextSibling;return e(r,n(me,{style:"width:20px;height:auto",onClick:()=>{o(10),s("List")}}),A),e(r,n(ve,{style:"width:20px;height:auto",onClick:()=>{o(8),s("Grid")}}),A),C.addEventListener("change",c=>{x(1),b(c.target.value)}),e(C,()=>["Pending","New","Active","Sold"].map(c=>(()=>{const m=F();return m.value=c,e(m,c),m})())),P.addEventListener("change",c=>{x(1),y(c.target.value)}),e(P,()=>["Most Recent","Price High","Price Low","Days on Market"].map(c=>(()=>{const m=F();return m.value=c,e(m,c),m})())),e(t,n(oe,{pageSize:$,currentPage:v,pageOffset:p,data:w,mode:g,get period(){return u.areaPeriod}})),B(()=>C.value=g()),B(()=>P.value=l()),r})()})()),n(E,{get when(){return S()==="List"},get children(){return n(q,{mode:g,listings:d,style:"width: 100%; color: var(--theme-body-color)"})}}),n(E,{get when(){return S()==="Grid"},get children(){return n(ge,{mode:g,listings:d,style:"width: 100%; color: var(--theme-body-color)"})}}),n(K,{data:w,currentPage:v,pageSize:$,pageChange:i=>x(i),style:"align-self: flex-end"})]},be=({setStatus:a})=>{const l=H(()=>[{total:u?.overall?.new,label:"New (active)",status:"new"},{total:u?.overall?.active,label:"Active",status:"active"},{total:u?.overall?.pending,label:"Pending",status:"pending"},{total:u.overall?.sold,label:"Sold",status:"sold"}]);return(()=>{const y=ye(),S=y.firstChild,s=S.firstChild,w=s.nextSibling,_=w.nextSibling,d=_.nextSibling;return e(_,()=>u.areaName),e(d,()=>l().map((f,k)=>(()=>{const v=_e(),x=v.firstChild,p=x.nextSibling,$=p.nextSibling;return v.$$click=o=>a(f.status),e(p,()=>f.total),e($,()=>f.label),B(o=>{const g=`transform: translateY(${k*50}px)`,b=`var(--${f.status})`;return o._v$=O(v,g,o._v$),b!==o._v$2&&L(x,"fill",o._v$2=b),o},{_v$:void 0,_v$2:void 0}),v})())),y})()};Y(["click"]);export{ke as default};
//# sourceMappingURL=MarketActivity.js.map
