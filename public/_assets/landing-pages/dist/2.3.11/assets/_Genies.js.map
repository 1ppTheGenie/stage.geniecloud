{"version":3,"mappings":"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","names":["cssRootOverrides","DATASTUB","CAMELCASE","agentid","renderid","layout","theme","areaid","areaperiod","period","leadareaid","mode","mapstyle","mapicon","mapkey","mlsnumber","mlsid","blurprice","signin","pricepercent","propertytype","nocopyright","openhouse","hideavm","downloadurl","leadcapture","nomargin","defaultSettings","propertyTypeID","areaPeriod","mapStyle","mapKey","mapIcon","blurPrice","hideAVM","pricePercent","signIn","noCopyright","noMargin","_Genies","genies","linkedThemes","document","querySelectorAll","forEach","genieNode","index","embeds","source","Object","fromEntries","URLSearchParams","window","location","search","entries","queryParams","createSignal","keys","reduce","destination","key","toLowerCase","settings","gHub","getAttributeNames","name","startsWith","replace","getAttribute","shorturldataid","agentId","querySelector","r","getShortData","shortID","token","ov","result","property","map","k","v","setOverrideSettings","classList","add","includes","push","link","createElement","rel","type","href","siteUrl","head","appendChild","_$createComponent","Portal","mount","children","Genie","_$mergeProps","isLast","length","props","customs","setCustomizations","msgListener","msg","data","values","onMount","node","innerHTML","addEventListener","onCleanup","removeEventListener","Layout","lazy","__variableDynamicImportRuntimeHelper","__vitePreload","_el$","_tmpl$2","_$style","_$insert","Context4Settings","Provider","value","Suspense","fallback","_tmpl$3","_$Show","when","_el$2","_tmpl$","_el$3","firstChild","_el$4","nextSibling","_el$5","Date","getFullYear","_$effect","_$className"],"sources":["../../../../../../genie-components/src/embeds/_Genies.jsx"],"sourcesContent":["import { lazy, Suspense, createSignal, onMount, onCleanup } from \"solid-js\";\r\nimport { Portal } from \"solid-js/web\";\r\nimport { Context4Settings } from \"@/utilities\";\r\n\r\nimport \"@/index.css\";\r\n\r\nconst cssRootOverrides = {\r\n\t\"--pending\": \"var(--pending-yellow)\",\r\n\t\"--sold\": \"var(--sold-red)\",\r\n\t\"--active\": \"var(--active-green)\",\r\n\t\"--new\": \"var(--new-blue)\",\r\n};\r\n\r\nconst DATASTUB = \"data-genie-\";\r\nconst CAMELCASE = {\r\n\tagentid: \"agentId\",\r\n\trenderid: \"renderId\",\r\n\tlayout: \"layout\",\r\n\ttheme: \"theme\",\r\n\tareaid: \"areaId\",\r\n\tareaid: \"areaID\",\r\n\tareaperiod: \"areaPeriod\",\r\n\tperiod: \"areaPeriod\",\r\n\tleadareaid: \"leadAreaId\",\r\n\tmode: \"mode\",\r\n\tmapstyle: \"mapStyle\",\r\n\tmapicon: \"mapIcon\",\r\n\tmapkey: \"mapKey\",\r\n\tmlsnumber: \"mlsNumber\",\r\n\tmlsid: \"mlsId\",\r\n\tblurprice: \"blurPrice\",\r\n\tsignin: \"signIn\",\r\n\tpricepercent: \"pricePercent\",\r\n\tpropertytype: \"propertyTypeId\",\r\n\tnocopyright: \"noCopyright\",\r\n\topenhouse: \"openHouseTimes\",\r\n\thideavm: \"hideAVM\",\r\n\tdownloadurl: \"downloadUrl\",\r\n\tleadcapture: \"isLeadCapture\",\r\n\tnomargin: \"noMargin\",\r\n};\r\n\r\nconst defaultSettings = {\r\n\tmode: \"sold\",\r\n\tpropertyTypeID: 0,\r\n\tareaPeriod: 6,\r\n\tmapStyle: \"street-v11\",\r\n\tmapKey: false,\r\n\tmapIcon: \"dot\",\r\n\tblurPrice: false,\r\n\thideAVM: false,\r\n\tpricePercent: \"percent\",\r\n\tsignIn: false,\r\n\tnoCopyright: true,\r\n\tnoMargin: true,\r\n};\r\n\r\nexport default () => {\r\n\tconst genies = [];\r\n\tconst linkedThemes = [];\r\n\r\n\tdocument\r\n\t\t.querySelectorAll(`.genie-embed`)\r\n\t\t.forEach((genieNode, index, embeds) => {\r\n\t\t\tconst source = Object.fromEntries(\r\n\t\t\t\tnew URLSearchParams(window.location.search).entries()\r\n\t\t\t);\r\n\t\t\tconst [queryParams] = createSignal(\r\n\t\t\t\tObject.keys(source).reduce((destination, key) => {\r\n\t\t\t\t\tdestination[key.toLowerCase()] = source[key];\r\n\t\t\t\t\treturn destination;\r\n\t\t\t\t}, {})\r\n\t\t\t);\r\n\t\t\tconst settings = {\r\n\t\t\t\t...defaultSettings,\r\n\t\t\t\t...window.gHub,\r\n\t\t\t\t...queryParams,\r\n\t\t\t};\r\n\t\t\tconst attrs = genieNode.getAttributeNames();\r\n\r\n\t\t\tattrs.forEach(name => {\r\n\t\t\t\tif (name.startsWith(DATASTUB)) {\r\n\t\t\t\t\tsettings[CAMELCASE[name.replace(DATASTUB, \"\")]] =\r\n\t\t\t\t\t\tgenieNode.getAttribute(name);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (queryParams.shorturldataid) {\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tconst agentId = document\r\n\t\t\t\t\t\t.querySelector(`div[${DATASTUB}agentid]`)\r\n\t\t\t\t\t\t?.getAttribute(`${DATASTUB}agentid`);\r\n\t\t\t\t\tif (agentId) {\r\n\t\t\t\t\t\tconst r = await getShortData({\r\n\t\t\t\t\t\t\tshortID: queryParams.shorturldataid,\r\n\t\t\t\t\t\t\ttoken: queryParams.token,\r\n\t\t\t\t\t\t\tagentId,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tlet ov = Object.fromEntries(\r\n\t\t\t\t\t\t\tObject.entries(r.result.property).map(([k, v]) => [\r\n\t\t\t\t\t\t\t\tk.toLowerCase(),\r\n\t\t\t\t\t\t\t\tv,\r\n\t\t\t\t\t\t\t])\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// Fudge to prevent identically named param overriding the built in one\r\n\t\t\t\t\t\tif (ov.areaid && !ov.leadareaid) {\r\n\t\t\t\t\t\t\tov.leadareaid = ov.areaid;\r\n\t\t\t\t\t\t\tdelete ov.areaid;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsetOverrideSettings(ov);\r\n\t\t\t\t\t}\r\n\t\t\t\t})();\r\n\t\t\t}\r\n\r\n\t\t\tsettings.layout && genieNode.classList.add(settings.layout);\r\n\t\t\t//settings.theme && genieNode.classList.add(settings.theme);\r\n\r\n\t\t\tif (!linkedThemes.includes(settings.theme)) {\r\n\t\t\t\tlinkedThemes.push(settings.theme);\r\n\r\n\t\t\t\tvar link = document.createElement(\"link\");\r\n\t\t\t\tlink.rel = \"stylesheet\";\r\n\t\t\t\tlink.type = \"text/css\";\r\n\t\t\t\tlink.href = `${window.gHub.siteUrl}_assets/themes/${settings.theme}.css`;\r\n\t\t\t\tdocument.head.appendChild(link);\r\n\t\t\t}\r\n\r\n\t\t\tgenies.push(\r\n\t\t\t\t<Portal mount={genieNode}>\r\n\t\t\t\t\t<Genie {...settings} isLast={index === embeds.length} />\r\n\t\t\t\t</Portal>\r\n\t\t\t);\r\n\t\t});\r\n\r\n\treturn <>{genies}</>;\r\n};\r\n\r\nconst Genie = ({ layout, nocopyright, nomargin, isLast, ...props }) => {\r\n\tconst [customs, setCustomizations] = createSignal();\r\n\r\n\tconst msgListener = msg => {\r\n\t\tif (msg.data.type === \"Customizations\" && msg.data.values) {\r\n\t\t\tsetCustomizations(msg.data.values);\r\n\t\t}\r\n\t};\r\n\r\n\tonMount(() => {\r\n\t\t// Two ways of getting the custom overrides in: from embed HTML or via the IFRAME messaging, the latter being for the Wizard editor\r\n\t\tlet customs = {};\r\n\t\tdocument.querySelectorAll(`[data-genie-custom]`).forEach(node => {\r\n\t\t\tcustoms[node.getAttribute(\"data-custom-id\")] = node.innerHTML;\r\n\t\t});\r\n\t\tif (Object.keys(customs).length > 0) {\r\n\t\t\tsetCustomizations(customs);\r\n\t\t} else {\r\n\t\t\twindow.addEventListener(\"message\", msgListener);\r\n\t\t}\r\n\t});\r\n\r\n\tonCleanup(() => window.removeEventListener(\"message\", msgListener));\r\n\r\n\tconst Layout = lazy(() => import(`../embeds/${layout}.jsx`));\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclass={`genie-wrap ${layout.toLowerCase()}${\r\n\t\t\t\tnomargin ? \" no-margin\" : \"\"\r\n\t\t\t}`}\r\n\t\t\tstyle={cssRootOverrides}>\r\n\t\t\t<Context4Settings.Provider value={props}>\r\n\t\t\t\t<Suspense fallback={<div>Analyzing latest market data...</div>}>\r\n\t\t\t\t\t<Layout />\r\n\t\t\t\t</Suspense>\r\n\t\t\t</Context4Settings.Provider>\r\n\r\n\t\t\t<Show when={!nocopyright}>\r\n\t\t\t\t<footer style=\"padding-bottom:1rem;\">\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\tSource:\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tstyle=\"margin: auto 0.25rem; color: var(--theme-sub-heading-color);\"\r\n\t\t\t\t\t\t\thref=\"https://thegenie.ai\">\r\n\t\t\t\t\t\t\tTheGenie.ai\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t<span>Recipients to verify all information.</span>\r\n\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t{`\\u00a9 ${new Date().getFullYear()} 1parkplace, Inc.`}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</footer>\r\n\t\t\t</Show>\r\n\t\t</div>\r\n\t);\r\n};\r\n"],"file":"assets/_Genies.js"}