{"version":3,"file":"_LandingPages.js","sources":["../../../../../../genie-components/src/components/_Gallery.jsx","../../../../../../genie-components/src/components/AutoComplete.jsx","../../../../../../genie-components/src/components/HomeValuationResult.jsx","../../../../../../genie-components/src/components/_HomeValuation.jsx","../../../../../../genie-components/src/landing/_LandingPages.jsx"],"sourcesContent":["import { For, onMount, createSignal, createEffect } from \"solid-js\";\r\n\r\nimport \"@/assets/css/gallery.css\";\r\nimport Icon from \"@/assets/icon-magnify.svg\";\r\n\r\nexport default props => {\r\n\tconst [currentPhoto, setCurrentPhoto] = createSignal(0);\r\n\tconst [photos, setPhotoCount] = createSignal(0);\r\n\r\n\tonMount(() => {\r\n\t\t//window.gHub.lazyLoader(\"#property-gallery img.lazy\");\r\n\t\tsetPhotoCount(document.querySelectorAll(\".property-images\").length);\r\n\t});\r\n\r\n\tcreateEffect(() => {\r\n\t\tconst left =\r\n\t\t\tdocument.querySelectorAll(\".property-images\")[currentPhoto()].offsetLeft;\r\n\r\n\t\tdocument.getElementById(\"property-gallery\").style.left = `-${left}px`;\r\n\t});\r\n\r\n\tconst moveGallery = direction => {\r\n\t\tsetCurrentPhoto(current =>\r\n\t\t\tMath.min(Math.max(current + direction, 0), photos() - 1)\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<For each={props.images}>\r\n\t\t\t\t{(img, index) => (\r\n\t\t\t\t\t<div class=\"property-images\">\r\n\t\t\t\t\t\t<div class=\"property-image\">\r\n\t\t\t\t\t\t\t<div class=\"property-single-image\">\r\n\t\t\t\t\t\t\t\t<div class=\"close\">\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\twidth=\"24px\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"24px\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"#fff\"\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t\t\t\t\t\t\t\t\t<g data-name=\"Layer 2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<g data-name=\"close\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"24\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttransform=\"rotate(180 12 12)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={img}\r\n\t\t\t\t\t\t\t\t\tloading=\"lazy\"\r\n\t\t\t\t\t\t\t\t\talt=\"Featured image from the property\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclass=\"image-overlay-content\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tdocument.body.classList.toggle(\"lightbox\");\r\n\t\t\t\t\t\t\t\t\t\tsetCurrentPhoto(index);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<div class=\"zoom-image\"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</For>\r\n\r\n\t\t\t<button onClick={() => moveGallery(-1)}></button>\r\n\t\t\t<button onClick={() => moveGallery(1)}></button>\r\n\t\t</>\r\n\t);\r\n};\r\n","import { onMount } from \"solid-js\";\r\n\r\nexport const AutoComplete = props => {\r\n\tlet acInput;\r\n\r\n\tonMount(() => {\r\n\t\twindow.gHub.autoComplete(acInput, props.placeChanged);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<div style={props.containerStyle}>\r\n\t\t\t<input ref={acInput} type=\"text\" style={props.inputStyle} />\r\n\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { createSignal, Show } from \"solid-js\";\r\nimport { currency, dateFormat, useAgentData } from \"@/utilities\";\r\nimport { LeafletMap, LeadCaptureForm, Marker, ClosePopup } from \"@/components\";\r\n\r\nexport const HomeValuationResult = props => {\r\n\tconst { place, property, withLeadCapture = true } = props;\r\n\tconst [leadCaptured, setLeadCaptured] = createSignal(!withLeadCapture);\r\n\r\n  const getLeadNote = () => {\r\n    let formattedNote = \"Custom valuation request for\";    \r\n\r\n    //landing page data\r\n    if(property()?.propertyID && property()?.address)\r\n      formattedNote = `${formattedNote} ${property().address}, ${property().zip}`;\r\n    //direct property api result data\r\n    else if (property()?.propertyID && property()?.siteAddress)\r\n      formattedNote = `${formattedNote} ${property().siteAddress}, ${property().siteAddressZip}`;\r\n    else if(place()?.formatted_address)\r\n      formattedNote = `${formattedNote} ${place().formatted_address}`;\r\n    else\r\n      formattedNote = \"A new home valuation lead from TheGenie!\";\r\n\r\n    return formattedNote;\r\n  };\r\n  \r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h2 class=\"home-value-title no-background\">\r\n\t\t\t\tGet your personalized home report\r\n\t\t\t</h2>\r\n\t\t\t<div class=\"home-value-result\">\r\n\t\t\t\t<ClosePopup />\r\n\r\n\t\t\t\t<LeafletMap\r\n\t\t\t\t\tid=\"genie-result-map\"\r\n\t\t\t\t\tstyle=\"width:100%; height:380px\"\r\n\t\t\t\t\tmapStyle=\"satellite-streets-v11\"\r\n\t\t\t\t\tcenter={[\r\n\t\t\t\t\t\tplace().geometry.location.lat(),\r\n\t\t\t\t\t\tplace().geometry.location.lng(),\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tzoom={22}>\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tposition={[\r\n\t\t\t\t\t\t\tplace().geometry.location.lat(),\r\n\t\t\t\t\t\t\tplace().geometry.location.lng(),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</LeafletMap>\r\n\r\n\t\t\t\t<div style=\"margin:-5vh 5vw;padding-bottom: 4vh;z-index:999999;position:relative;\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"invert center\"\r\n\t\t\t\t\t\tstyle=\"padding: 1vw; border-radius: 10px; box-shadow: 0px 2px 10px #0003;\">\r\n\t\t\t\t\t\t{leadCaptured && <h3>Home Value Range Report for</h3>}\r\n\r\n\t\t\t\t\t\t<h4 style=\"font-size: 100%\">{place().formatted_address}</h4>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Show when={withLeadCapture && !leadCaptured()}>\r\n\t\t\t\t\t\t<h3>\r\n\t\t\t\t\t\t\tFill out the fields below and we'll send you your personalized\r\n\t\t\t\t\t\t\treport\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<LeadCaptureForm\r\n\t\t\t\t\t\t\tsetLeadCaptured={setLeadCaptured}\r\n\t\t\t\t\t\t\tleadNote={getLeadNote()}\r\n              genieTags=\"RequestCustomValuation, OptInContact\"              \r\n\t\t\t\t\t\t\texistingData={property() && { propertyId: property().propertyID }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Show>\r\n\r\n\t\t\t\t\t<Show when={leadCaptured()}>\r\n\t\t\t\t\t\t<PropertyResponse property={property()} />\r\n\t\t\t\t\t</Show>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst PropertyResponse = props => {\r\n\tconst { property } = props;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{typeof property === \"undefined\" && (\r\n\t\t\t\t<p class=\"invert\" style=\"text-align:left;padding:2vw\">\r\n\t\t\t\t\tSorry, we were not able to locate a home valuation for your property\r\n\t\t\t\t\tabove. Not a problem, we will look into this and get back to you\r\n\t\t\t\t\tshortly. I look forward to discussing the information with you very\r\n\t\t\t\t\tsoon and to help you get top dollar for your home.\r\n\t\t\t\t\t<Signature />\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{typeof property !== \"undefined\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div class=\"invert\" style=\"text-align:left;padding:1vw;margin:2vh 0\">\r\n\t\t\t\t\t\t{property.firstOwnerFirstName &&\r\n\t\t\t\t\t\t\tproperty.firstOwnerFirstName !== \"\" && (\r\n\t\t\t\t\t\t\t\t<p style=\"text-transform:capitalize\">\r\n\t\t\t\t\t\t\t\t\tHi {property.firstOwnerFirstName.toLowerCase()}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tHere is the initial valuation we found for your address. This\r\n\t\t\t\t\t\t\tautomated valuation is one way to get a general idea, but it is\r\n\t\t\t\t\t\t\timportant to realize an algorithm can't provide the accuracy\r\n\t\t\t\t\t\t\tyou'll want if you are thinking about selling. Many factors that\r\n\t\t\t\t\t\t\tcan't be squeezed into a data field impact your market value, from\r\n\t\t\t\t\t\t\tupdates and improvements you have (or have not yet) made, to\r\n\t\t\t\t\t\t\twhat's located next door or a block away, to recent, sometimes\r\n\t\t\t\t\t\t\trapidly changing, market trends. Our role as realtors is to take\r\n\t\t\t\t\t\t\tall of this into consideration. If you are thinking about selling,\r\n\t\t\t\t\t\t\tplease call for a real-time, real-world value for your most\r\n\t\t\t\t\t\t\timportant investment! Looking forward to helping you get top\r\n\t\t\t\t\t\t\tdollar for your home.\r\n\t\t\t\t\t\t\t<Signature />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<h3 style=\"margin-bottom:1vh;color:var(--theme-heading-color);\">\r\n\t\t\t\t\t\tConfirm Home Details\r\n\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t<div class=\"invert home-value-details\">\r\n\t\t\t\t\t\t{[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: Intl.NumberFormat(\"en-US\").format(\r\n\t\t\t\t\t\t\t\t\tproperty.sumBuildingSqFt\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\ttitle: \"SQUARE FT\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ value: property.bedrooms, title: \"BEDS\" },\r\n\t\t\t\t\t\t\t{ value: property.bathrooms, title: \"FULL BATHS\" },\r\n\t\t\t\t\t\t\t{ value: property.yearBuilt, title: \"BUILT IN\" },\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tvalue: property.saleDate\r\n\t\t\t\t\t\t\t\t\t? dateFormat(Date.parse(property.saleDate))\r\n\t\t\t\t\t\t\t\t\t: \"n/a\",\r\n\t\t\t\t\t\t\t\ttitle: \"PURCHASED\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ value: \"Unknown\", title: \"LAST RENO\" },\r\n\t\t\t\t\t\t].map((s, i) => (\r\n\t\t\t\t\t\t\t<div key={s.title}>\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={`/_assets/_img/valuation-icon-${i + 1}.png`}\r\n\t\t\t\t\t\t\t\t\talt={`${s.title} icon`}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<h4>{s.title}</h4>\r\n\t\t\t\t\t\t\t\t<h5>{s.value}</h5>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"home-value-estimate\"\r\n\t\t\t\t\t\tstyle=\"color:var(--theme-heading-color)\">\r\n\t\t\t\t\t\t<h4>Estimated Value Range:</h4>\r\n\t\t\t\t\t\t<h5>{`${currency(property.avmLow)} - ${currency(\r\n\t\t\t\t\t\t\tproperty.avmHigh\r\n\t\t\t\t\t\t)}`}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst Signature = () => {\r\n\tconst agent = useAgentData();\r\n\r\n\treturn (\r\n\t\t<Show when={!agent.loading && agent()}>\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\tSincerely,\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\t\t\t{agent()?.displayName}\r\n\t\t\t<br />\r\n\t\t\t{agent()?.phone}\r\n\t\t\t<br />\r\n\t\t\t{agent()?.email}\r\n\t\t</Show>\r\n\t);\r\n};\r\n","import { createResource, createSignal, Suspense, Show } from \"solid-js\";\r\nimport {\r\n\tareaDataStore,\r\n\tuseSettings,\r\n\tContext4Settings,\r\n\tsearchAddress,\r\n} from \"@/utilities\";\r\nimport {\r\n\tAutoComplete,\r\n\tEditable,\r\n\tLeafletMap,\r\n\tLeafletPane,\r\n\tGeoArea,\r\n\tHomeValuationResult,\r\n\tClosePopup,\r\n} from \"@/components\";\r\n\r\nimport \"@/index.css\";\r\nimport \"@/assets/css/home-value.css\";\r\n\r\nexport default props => {\r\n\tconst { buttonCaption = \"Get your Value!\" } = props;\r\n\tconst { areaId, mapStyle, withLeadCapture } = useSettings(Context4Settings);\r\n\r\n\tconst [showResult, setShowResult] = createSignal(false);\r\n\tconst [place, setPlace] = createSignal();\r\n\tconst [placeID, setPlaceID] = createSignal();\r\n\tconst [property] = createResource(placeID, searchAddress); \r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Show when={showResult() === true}>\r\n\t\t\t\t<HomeValuationResult\r\n\t\t\t\t\tplace={place}\r\n\t\t\t\t\tproperty={property}\r\n\t\t\t\t\twithLeadCapture={true}\r\n\t\t\t\t/>\r\n\t\t\t</Show>\r\n\r\n\t\t\t<Show when={showResult() === false}>\r\n\t\t\t\t<h2 class=\"home-value-title no-background\">Let's find your home</h2>\r\n\t\t\t\t<div\r\n\t\t\t\t\tid=\"map-place-getter\"\r\n\t\t\t\t\tstyle=\"border-radius: 20px; width: 50vw; min-height: 450px;\">\r\n\t\t\t\t\t<ClosePopup />\r\n\r\n\t\t\t\t\t<LeafletMap\r\n\t\t\t\t\t\tstyle=\"width:100%;height:450px;margin:0;\"\r\n\t\t\t\t\t\tmapStyle={mapStyle || \"satellite-streets-v11\"}\r\n\t\t\t\t\t\tzoom={18}>\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Suspense>\r\n\t\t\t\t\t\t\t\t<GeoArea areaId={areaId} fillColor=\"var (--theme-color)\" />\r\n\t\t\t\t\t\t\t</Suspense>\r\n\r\n\t\t\t\t\t\t\t<LeafletPane>\r\n\t\t\t\t\t\t\t\t<div style=\"min-width:80%\">\r\n\t\t\t\t\t\t\t\t\t<AutoComplete\r\n\t\t\t\t\t\t\t\t\t\tcontainerStyle=\"display:flex;min-width:80%;\"\r\n\t\t\t\t\t\t\t\t\t\tinputStyle=\"padding:10px 15px; border-radius:20px;border:2px solid black;outline:none;flex-basis:70%;flex-grow:1\"\r\n\t\t\t\t\t\t\t\t\t\tplaceChanged={place => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetPlaceID(place.place_id);\r\n\t\t\t\t\t\t\t\t\t\t\tsetPlace(place);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"border-radius:20px;border:2px solid black;background-color:black;color:#fff;margin-left:-35px;outline:none;cursor:pointer\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n                        if(place()) \r\n                          setShowResult(true);\r\n                      }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{buttonCaption}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</AutoComplete>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</LeafletPane>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t</LeafletMap>\r\n\t\t\t\t</div>\r\n\t\t\t</Show>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n","import { render } from \"solid-js/web\";\r\n//import { lazy } from \"solid-js\";\r\n\r\nimport {\r\n\tinitAutocomplete,\r\n\tsearchAddress,\r\n\tinitMaps,\r\n\tbuildMap,\r\n\tcreateLead,\r\n\tupdateLead,\r\n\tuseSettings,\r\n\tContext4Settings,\r\n\tlandingPageData,\r\n\tcurrency,\r\n  addDynamicPopup,\r\n  getCtaData,\r\n  formatFormNote,\r\n  InsensitiveURLSearchParams\r\n} from \"@/utilities\";\r\n\r\nimport \"@/index.css\";\r\n\r\nimport Gallery from \"@/components/_Gallery\";\r\nimport HomeValuation from \"@/components/_HomeValuation\";\r\nimport LeadCtaTag from \"@/components/_LeadCtaTag\";\r\n\r\nconst VIEWED = \"Viewed Landing Page\";\r\n\r\nexport default () => {\r\n\twindow.gHub.searchAddress = searchAddress;\r\n\r\n\twindow.gHub.lazyLoader = selector => {\r\n\t\tconst lazyImages = [].slice.call(document.querySelectorAll(selector));\r\n\r\n\t\tconst lazyImageObserver = new IntersectionObserver(entries => {\r\n\t\t\tentries.forEach(entry => {\r\n\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\tconst lazyImage = entry.target;\r\n\t\t\t\t\tlazyImage.src = lazyImage.dataset.src;\r\n\t\t\t\t\tlazyImage.classList.remove(\"lazy\");\r\n\t\t\t\t\tlazyImageObserver.unobserve(lazyImage);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tlazyImages.forEach(lazyImage => lazyImageObserver.observe(lazyImage));\r\n\t};\r\n\r\n\twindow.gHub.currency = c => currency(c);\r\n\r\n\twindow.gHub.makeMap = async (id, options = null, layers = null) => {\r\n\t\tawait initMaps();\r\n\r\n\t\tconst map = buildMap(\r\n\t\t\ttypeof id === \"string\" ? document.getElementById(id) : id,\r\n\t\t\toptions\r\n\t\t);\r\n\r\n\t\tif (layers && layers.listings) {\r\n\t\t\tconst group = new window.L.featureGroup();\r\n\r\n\t\t\tlayers.listings.forEach(l => {\r\n\t\t\t\tif (!isNaN(l.lat) && !isNaN(l.lng)) {\r\n\t\t\t\t\tlet datatURI, size, anchor;\r\n\r\n\t\t\t\t\tconst color =\r\n\t\t\t\t\t\tl.color ||\r\n\t\t\t\t\t\twindow.gHub.getCssVar(`--${l.state}`, document.body).trim();\r\n\r\n\t\t\t\t\tswitch (l.iconType ?? \"circle\") {\r\n\t\t\t\t\t\tcase \"flag\":\r\n\t\t\t\t\t\t\tsize = [55 * scale, 38 * scale];\r\n\t\t\t\t\t\t\tanchor = [27 * scale, 38 * scale];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.flagURI(\r\n\t\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\t\twindow.gHub.currency(\r\n\t\t\t\t\t\t\t\t\tparseInt(l.state == \"sold\" ? l.salePrice : l.listPrice)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"dot\":\r\n\t\t\t\t\t\t\tsize = [15, 15];\r\n\t\t\t\t\t\t\tanchor = [9, 9];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.circleURI(color, \"\", 8);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tsize = [34, 34];\r\n\t\t\t\t\t\t\tanchor = [12, 12];\r\n\t\t\t\t\t\t\tdatatURI = window.gHub.circleURI(color, l.caption || i + 1, 12);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar icon = window.L.icon({\r\n\t\t\t\t\t\ticonUrl: datatURI,\r\n\t\t\t\t\t\ticonSize: size,\r\n\t\t\t\t\t\ticonAnchor: anchor,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\twindow.L.marker([l.lat, l.lng], { icon: icon }).addTo(group);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroup.addTo(map);\r\n\r\n\t\t\tif (options.fitMarkers && Object.keys(group.getBounds()).length > 0) {\r\n\t\t\t\tmap.fitBounds(group.getBounds(), { padding: [60, 60] });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layers && layers.geoJson && options.fitMarkers) {\r\n\t\t\twindow.L.geoJSON(layers.geoJson, {\r\n\t\t\t\tonEachFeature: (feature, layer) => {\r\n\t\t\t\t\tmap.fitBounds(layer.getBounds(), { zoom: 22 });\r\n\t\t\t\t\tmap.invalidateSize();\r\n\t\t\t\t},\r\n\t\t\t}).addTo(map);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t};\r\n\r\n\twindow.gHub.autoComplete = (input, setPlace, bounds = null) => {\r\n\t\tinitAutocomplete(() => {\r\n\t\t\t/*var defaultBounds = new google.maps.LatLngBounds(\r\n\t\t\t\tnew google.maps.LatLng(40.518, 29.215),\r\n\t\t\t\tnew google.maps.LatLng(41.242, 30.37)\r\n\t\t\t);*/\r\n\r\n\t\t\tconst places = new google.maps.places.Autocomplete(input, {\r\n\t\t\t\tcomponentRestrictions: { country: \"us\" },\r\n\t\t\t\ttypes: [\"address\"],\r\n\t\t\t});\r\n\t\t\tgoogle.maps.event.addListener(\r\n\t\t\t\tplaces,\r\n\t\t\t\t\"place_changed\",\r\n\t\t\t\t() => setPlace && setPlace(places.getPlace())\r\n\t\t\t);\r\n\t\t});\r\n\t};\r\n\r\n\twindow.gHub.spinner = (fill, style = \"\") => {\r\n\t\tlet petals = \"\";\r\n\r\n\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\tpetals += `<g transform=\"rotate(${\r\n\t\t\t\ti * 30\r\n\t\t\t} 50 50)\"><rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"white\"><animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"${\r\n\t\t\t\t-0.9166 - i * -0.08333\r\n\t\t\t}s\" repeatCount=\"indefinite\"></animate></rect></g>`;\r\n\t\t}\r\n\r\n\t\treturn `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" style=\"${style}\"><circle cx=\"50\" cy=\"50\" r=\"47\" fill=\"${fill}\"/>${petals}</svg>`;\r\n\t};\r\n\r\n\twindow.gHub.getCssVar = (name, el) =>\r\n\t\tgetComputedStyle(el ?? document.body).getPropertyValue(name);\r\n\r\n\twindow.gHub.hex2rgba = (hex, alpha = 1) => {\r\n\t\tconst re = hex.length === 6 || hex.length === 8 ? /\\w\\w/g : /\\w/g;\r\n\t\tconst [r, g, b] = hex.match(re).map(x => parseInt(x, 16));\r\n\t\treturn `rgba(${r},${g},${b},${alpha})`;\r\n\t};\r\n\r\n\twindow.gHub.circleURI = (color, caption = \"\", size = 12) => {\r\n\t\tconst text =\r\n\t\t\tcaption === \"\"\r\n\t\t\t\t? \"\"\r\n\t\t\t\t: `<text x=\"12\" y=\"16\" fill=\"#fff\" text-anchor=\"middle\" style=\"font-family:sans-serif;font-weight:800;font-size:12px\">${caption}</text>`;\r\n\r\n\t\tconst svg = `\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size * 2 + 4}\" height=\"${\r\n\t\t\tsize * 2 + 4\r\n\t\t}\">\r\n\t\t<defs>\r\n\t\t\t<filter id=\"shadow\" x=\"0\" y=\"0\" width=\"${size}\" height=\"${size}\">\r\n\t\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/> \r\n\t\t\t\t<feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\r\n\t\t\t\t<feComponentTransfer>\r\n\t\t\t\t\t<feFuncA type=\"linear\" slope=\"0.5\"/>\r\n\t\t\t\t</feComponentTransfer>\r\n\t\t\t\t<feMerge> \r\n\t\t\t\t\t<feMergeNode/> \r\n\t\t\t\t\t<feMergeNode in=\"SourceGraphic\"/> \r\n\t\t\t\t</feMerge>\r\n\t\t\t</filter>\r\n\t\t</defs>\r\n\t\t<circle fill=\"${color}\" cx=\"${size}\" cy=\"${size}\" r=\"${size}\" filter=\"url(#shadow)\" />\r\n\t\t${text}\r\n\t</svg>`;\r\n\r\n\t\treturn \"data:image/svg+xml,\" + encodeURIComponent(svg);\r\n\t};\r\n\r\n\twindow.gHub.flagURI = (color, price) => {\r\n\t\tconst svg = `\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11\" height=\"7.5\" viewBox=\"0 0 110 75\">\r\n\t\t<defs>\r\n\t\t\t<filter id=\"f1\" x=\"0\" y=\"0\" width=\"12\" height=\"12\">\r\n\t\t\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/> \r\n\t\t\t<feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\r\n\t\t\t<feComponentTransfer>\r\n\t\t\t<feFuncA type=\"linear\" slope=\"0.5\"/>\r\n\t\t\t</feComponentTransfer>\r\n\t\t\t<feMerge> \r\n\t\t\t<feMergeNode/> \r\n\t\t\t<feMergeNode in=\"SourceGraphic\"/> \r\n\t\t\t</feMerge>\r\n\t\t\t</filter>\r\n\t\t</defs>\r\n\t\t<path fill=\"${color}\" stroke=\"#fff\" stroke-width=\"3\" filter=\"url(#f1)\" d=\"M105.333,0.5H5.5c-2.75,0-5,2.25-5,5v38.333c0,2.75,2.25,5,5,5h38.733l10.101,20.834l12.152-20.834h38.848c2.75,0,5-2.25,5-5V5.5C110.333,2.75,108.083,0.5,105.333,0.5z\"/>\r\n\r\n\t\t<text x=\"55\" y=\"35\" style=\"font-size:28px;font-weight:bold;font-family:sans-serif\" text-anchor=\"middle\" fill=\"#FFFFFF\">${price}</text>\r\n\t</svg>`;\r\n\r\n\t\treturn \"data:image/svg+xml,\" + encodeURIComponent(svg);\r\n\t};\r\n\r\n\twindow.gHub.redirectToParentAsset = (additionalParams = {}) => {\r\n\t\tconst url = `${window.location.origin}${window.location.pathname\r\n\t\t\t.replace(\"/index.html\", \"\")\r\n\t\t\t.split(\"/\")\r\n\t\t\t.slice(0, -1)\r\n\t\t\t.join(\"/\")}/index.html`;\r\n\t\tconst urlParams = new URLSearchParams(window.location.search);\r\n\r\n\t\t// Remove the override\r\n\t\turlParams.delete(\"lpo\");\r\n\r\n\t\t// Add any additional params\r\n\t\tObject.keys(additionalParams).forEach(key =>\r\n\t\t\turlParams.append(key, additionalParams[key])\r\n\t\t);\r\n\r\n\t\twindow.location.href = `${url}?${urlParams.toString()}`;\r\n\t};\r\n\r\n\twindow.gHub.randomPriceString = (max = 2000001, min = 200000 ) => {\r\n\t\t// Format a random number\r\n\t\tconst formattedNumber = Math.floor(Math.random() * (max - min) + min).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n\t\r\n\t\t// Replace numbers with letters\r\n\t\treturn formattedNumber.replace(/1/g, 'I').replace(/2/g, 'A').replace(/3/g, 'E').replace(/4/g, 'H').replace(/5/g, 'S').replace(/7/g, 'I').replace(/8/g, 'B').replace(/9/g, 'G');\r\n\t}\r\n\r\n  //this was the one giving casing issues so just want to centralize it.\r\n  window.gHub.getPropertyIdFromUrl = () => {\r\n    return new InsensitiveURLSearchParams(window.location.search).get(\"propertyId\")\r\n  }\r\n\r\n  window.gHub.getLeadId = (settings = useSettings(Context4Settings)) => {\r\n    return settings.leadId || settings.genieLeadId || window.gHub.leadId;\r\n  };\r\n\r\n\tdocument.addEventListener(\"trigger-update-lead\", async e => {\r\n    const leadId = window.gHub.getLeadId();\r\n\t\tif (leadId) {\r\n\t\t\tawait updateLead({\r\n\t\t\t\tgenieLeadId:leadId,\r\n\t\t\t\t...e.detail,\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\twindow.gHub.getLandingPageData = async (skipLeadCreate = false) => {\r\n\t\tconst urlParams = Object.fromEntries(\r\n\t\t\tnew URLSearchParams(window.location.search)\r\n\t\t);\r\n\r\n\t\turlParams.agentId = window.gHub.agentId;\r\n\t\turlParams.hideAVM = window.gHub.hideAVM ?? false;\r\n\t\turlParams.skipLeadCreate = skipLeadCreate;\r\n\r\n    //since we are converting to an object here we want in format of propertyId but from url it could be either Id or id\r\n    const propertyId = window.gHub.getPropertyIdFromUrl();\r\n\r\n    if(propertyId) {\r\n      //just in case it was lower in the URL remove it to avoid confusion\r\n      delete urlParams.propertyid; \r\n      urlParams.propertyId = propertyId;\r\n    }\r\n\r\n\t\treturn await landingPageData(urlParams);\r\n\t};\r\n\r\n  window.gHub.mergeTrackingData = (postTracking = {}, settings = useSettings(Context4Settings)) =>{\r\n    const defaultTrackingData = window.gHub.defaults.trackingData || {};\r\n\r\n    //I think this was legacy since it is going to utm_ while our create lead expects utmX, however this should handle all utmSource, utmsource, utm_source\r\n    let trackingDataFromSettings = settings.trackingdata ? \r\n        Object.keys(settings.trackingdata).reduce((destination, key) => {\r\n            destination[key.toLowerCase().replace(\"_\", \"\").replace(\"utm\", \"utm_\")] = settings.trackingdata[key];\r\n            return destination;\r\n        }, {}) : {};\r\n\r\n    // if we have tracking data then source will be populated\r\n    if (trackingDataFromSettings.utm_source) {\r\n      trackingDataFromSettings = {\r\n        utmSource: capture.utm_source ?? null,\r\n        utmMedium: capture.utm_medium ?? null,\r\n        utmCampaign: capture.utm_campaign ?? null,\r\n        utmTerm: capture.utm_term ?? null,\r\n        utmContent: capture.utm_content ?? null\r\n      };\r\n    }\r\n\r\n    postTracking = {\r\n    ...defaultTrackingData,\r\n    ...trackingDataFromSettings,\r\n    ...postTracking,\r\n    };\r\n\r\n    if (!postTracking.utmSource || postTracking.utmSource === \"url\") {\r\n      \r\n      //in the event someone lands on the page that was not driven by a short URL with tracking data\r\n      const pageUtmSource = document.getElementById(\"pageUtmSource\");\r\n      const pageUtmCampaign = document.getElementById(\"pageUtmCampaign\");\r\n      postTracking.utmSource = pageUtmSource?.value || window.location.href;\r\n      postTracking.utmCampaign = pageUtmCampaign?.value;\r\n    }\r\n\r\n    return postTracking;\r\n  };\r\n\r\n  window.gHub.formatNewLeadReferringUrl = (postedData, settings) => {\r\n      let referringUrl = `${window.location.origin}${window.location.pathname}?referral=true`;\r\n\r\n      if (postedData.propertyId) {\r\n          referringUrl += `&propertyId=${postedData.propertyId}`;\r\n      }\r\n\r\n      if (settings.mlsNumber) {\r\n          referringUrl += `&mlsNumber=${settings.mlsNumber}`;\r\n      }\r\n\r\n      if (settings.mlsId) {\r\n          referringUrl += `&mlsId=${settings.mlsId}`;\r\n      }\r\n\r\n      return referringUrl;\r\n  };\r\n\r\n  //TODO: not sure if the best spot and if we should be string stuff like this on the gHub but \r\n  //setting here so the can prepop form inputs if desired.\r\n  window.gHub.setFormPrepopInputs = (email, phone) => {\r\n    if(email)\r\n      window.gHub.leadEmailAddress = email;\r\n\r\n    if(phone)\r\n      window.gHub.leadPhoneNumber = phone;\r\n  };\r\n  \r\n\twindow.gHub.addLead = async (note, data = null) => {\r\n\t\tconst settings = useSettings(Context4Settings);\r\n\r\n\t\twindow.gHub.defaults = window.gHub.defaults || {};\r\n\r\n\t\tlet postedData = {\r\n\t\t\tagentId: settings.agentId,\r\n\t\t\tareaId: settings.leadareaId || settings.areaId,\r\n\t\t\tpropertyId:\r\n\t\t\t\tsettings.propertyId ??\r\n\t\t\t\twindow.gHub.defaults.leadPropertyId ??\r\n        window.gHub.getPropertyIdFromUrl(),\r\n\t\t\tfirstName: settings.firstname ?? null,\r\n\t\t\tlastName: settings.lastname ?? null,\r\n\t\t\tfullName: window.gHub.defaults.fullName ?? null,\r\n\t\t\temailAddress: settings.emailaddress ?? null,\r\n\t\t\tnote: note,\r\n\t\t\t...data,\r\n\t\t};\r\n\r\n    const leadId = window.gHub.getLeadId(settings);\r\n\t\t\r\n    if (leadId) {\r\n\t\t\tif (note !== VIEWED) {\r\n\t\t\t\tpostedData.genieLeadId = leadId;\r\n\t\t\t\tpostedData.email = postedData.emailAddress;\r\n        \r\n\t\t\t\tawait updateLead(postedData);\r\n\t\t\t}\r\n\t\t} else {\r\n      postedData.referringUrl = window.gHub.formatNewLeadReferringUrl(postedData, settings);\t\t\t\t\r\n      postedData.trackingData = window.gHub.mergeTrackingData(postedData.trackingData, settings);\r\n\r\n\t\t\t// Merge in any additional default settings\r\n\t\t\tif (window.gHub.defaults.notePrompt) {\r\n\t\t\t\tpostedData.note = `${window.gHub.defaults.notePrompt}: ${postedData.note}`;\r\n\t\t\t}     \t\t\t\r\n      \r\n\t\t\tconst r = await createLead(postedData);\r\n\r\n\t\t\tif (r.result?.key) {\r\n\t\t\t\twindow.gHub.leadId = r.result.key;\r\n        window.gHub.setFormPrepopInputs(postedData.emailAddress, postedData.phoneNumber);        \r\n\t\t\t}\r\n\r\n\t\t\treturn r.result;\r\n\t\t}\r\n\t};   \r\n\r\n\t/***********************\r\n\t *\r\n\t * Home Valuation component in popup\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\".request-home-value\").forEach(el => {\r\n\t\tel.addEventListener(\"click\", event => {\r\n\t\t\tevent.preventDefault();    \r\n      window.gHub.popHomeValue();\r\n\t\t});\r\n\t});\r\n\r\n  window.gHub.popHomeValue = () => {\r\n    const dynamicPopupId = \"genie-homeValuePopup\";\r\n      \r\n      if(addDynamicPopup(dynamicPopupId)) {        \r\n        const settings = useSettings(Context4Settings);\t\t\t\r\n\t\t\t\tconst App = () => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Context4Settings.Provider value={settings}>\r\n\t\t\t\t\t\t\t<HomeValuation />\r\n\t\t\t\t\t\t</Context4Settings.Provider>\r\n\t\t\t\t\t);\r\n\t\t\t\t};\r\n\r\n\t\t\t\trender(App, document.getElementById(dynamicPopupId));\r\n\t\t\t}\r\n  };\r\n\r\n  /***********************\r\n\t *\r\n\t * Opt-in timed popup\r\n\t *\r\n\t ***********************/\r\n  window.gHub.showOptIn = (ctaIdUrlParam, ctaIdShortDataValue, hasLeadData) => { \r\n    //url param will take precedence over what is supplied in short data\r\n    const ctaId = parseInt(ctaIdUrlParam) || ctaIdShortDataValue;      \r\n    const data = getCtaData(ctaId);\r\n\r\n    if(!data.enabled)\r\n      return;\r\n\r\n    const ctaHomeValueKey = 1; //home value has special handling and just pops an existing modal\r\n\r\n    if(ctaId === ctaHomeValueKey)\r\n      setTimeout(() => { window.gHub.popHomeValue() }, data.delay);\r\n    else if (hasLeadData){\r\n      //the delay for the popup, I am making the assumption that this would also allow the lead to be created first so that we have\r\n      //a leadId when it actually fires.\r\n      setTimeout(() => { \r\n        const settings = useSettings(Context4Settings);           \r\n        //to test you can explicitly set the user and leadId     \r\n        if (window.gHub.getLeadId(settings)) {\r\n          const dynamicPopupId = \"genie-leadCtaTagPopup\";\r\n          if(addDynamicPopup(dynamicPopupId)) {        \r\n            const App = () => {\r\n              return (\r\n                <Context4Settings.Provider value={settings}>\r\n                  <LeadCtaTag ctaData={data} />\r\n                </Context4Settings.Provider>\r\n              );\r\n            };\r\n      \r\n            render(App, document.getElementById(dynamicPopupId));\r\n          }\r\n        }\r\n      }, data.delay); \r\n    } \r\n  };  \r\n\r\n  /***********************\r\n\t *\r\n\t * Get short/qr data\r\n\t *\r\n\t ***********************/\r\n  window.gHub.initLandingPageData = () => {\r\n    (async () => {\r\n      const lpData = await window.gHub.getLandingPageData();  \r\n            \r\n      if(lpData.lead && lpData.lead.genieLeadId) {         \r\n        const settings = useSettings(Context4Settings);\r\n        settings.trackingdata = lpData.lead.trackingData; //unsure on the casing descrepancy here but add lead maps it;\r\n        window.gHub.leadId = lpData.lead.genieLeadId;\r\n        window.gHub.setFormPrepopInputs(lpData.lead.emailAddress, lpData.lead.phoneNumber);        \r\n        window.gHub.showOptIn(urlParams.ctaid, lpData.lead.ctaId, true);\r\n      }     \r\n    })();\r\n  };\r\n\r\n  /***********************\r\n\t *\r\n\t * Global Url Param hook\r\n\t *\r\n\t ***********************/\r\n\tconst urlParams = new InsensitiveURLSearchParams(window.location.search).getObjectLower();   \r\n\r\n\tif (parseInt(urlParams.crlead) === 1) {\r\n\t\tconst pid = urlParams.propertyid;\r\n\r\n\t\tif (pid) {\r\n      //only found the crLead in one spot so adding an applicable note\r\n\t\t\twindow.gHub.addLead('Manually entered address property comparison', { propertyId: pid } );\r\n\t\t}\r\n\t} else if (urlParams.token) {\r\n    window.gHub.initLandingPageData();\r\n  } else {\r\n    window.gHub.showOptIn(urlParams.ctaid, null, false);    \r\n  }  \r\n  \r\n  /***********************\r\n\t *\r\n\t * Vanilla version of the jQuery slide toggle\r\n\t *\r\n\t * Toggling element needs a data-container attrbute with selector, eg <a data-container=\"#my-sliding-div\">, <a data-container=\".a-sliding-ul\">\r\n\t * Note that with a class-based selector, only the first element matched will toggle.\r\n\t *\r\n\t * Toggled element can have a a --toggle-height css var to set a minimum height when closed, eg <a style=\"--toggle-height: 200px;\">\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\".toggle\").forEach(el => {\r\n\t\tconst container = document.querySelector(el.dataset.container);\r\n\r\n\t\tif (container) {\r\n\t\t\tcontainer.classList.add(\"toggle-container\");\r\n\r\n\t\t\tel.addEventListener(\"click\", event => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (!container.classList.contains(\"active\")) {\r\n\t\t\t\t\tcontainer.classList.add(\"active\");\r\n\t\t\t\t\tcontainer.style.height = \"auto\";\r\n\r\n\t\t\t\t\tconst height = container.clientHeight + \"px\";\r\n\r\n\t\t\t\t\tcontainer.style.height = \"0px\";\r\n\r\n\t\t\t\t\tsetTimeout(() => (container.style.height = height), 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.style.height = \"0px\";\r\n\r\n\t\t\t\t\tcontainer.addEventListener(\r\n\t\t\t\t\t\t\"transitionend\",\r\n\t\t\t\t\t\t() => container.classList.remove(\"active\"),\r\n\t\t\t\t\t\t{ once: true }\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t/***********************\r\n\t *\r\n\t * Scroll-to wrapper\r\n\t *\r\n\t * Add data-scroll-to attribute with selector, eg <a data-scroll-to=\"#my-sliding-div\">, <a data-scroll-to=\".a-sliding-ul\">\r\n\t *\r\n\t ***********************/\r\n\tdocument.querySelectorAll(\"[data-scroll-to]\").forEach(el =>\r\n\t\tel.addEventListener(\"click\", e => {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst target = document.querySelector(el.getAttribute(\"data-scroll-to\"));\r\n\r\n\t\t\tif (target) {\r\n\t\t\t\tconst y = target.getBoundingClientRect().top;\r\n\r\n\t\t\t\twindow.scrollTo({\r\n\t\t\t\t\ttop: y + window.pageYOffset - 80,\r\n\t\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t);\r\n\r\n\tdocument.querySelectorAll(\".funnel-create-lead\").forEach(el =>\r\n\t\tel.addEventListener(\"submit\", e => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t(async () => {\r\n\t\t\t\tconst popup = document.getElementById(\r\n\t\t\t\t\tel.dataset[\"thank-you\"] || \"form-thank-you\"\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (popup) {\r\n\t\t\t\t\tconst hidePopup = () => {\r\n\t\t\t\t\t\tpopup.classList.remove(\"visible\");\r\n\t\t\t\t\t\tdocument\r\n\t\t\t\t\t\t\t.getElementById(\"fl-thankyou-modal\")\r\n\t\t\t\t\t\t\t.classList.remove(\"hide\");\r\n\t\t\t\t\t\tpopup\r\n\t\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t\t.removeEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\t\t\t// These really need removing and some generic event code running instead\r\n\t\t\t\t\t\tconst modal = document.querySelector( \".modal.in\" )\r\n\t\t\t\t\t\t\r\n            if(modal) {\r\n              modal.classList.remove( \"in\" );\r\n              modal.style.display = \"none\";\r\n            }\r\n\r\n\t\t\t\t\t\tconst backdrop = document.getElementById(\"backdrop\");\r\n\r\n            if(backdrop)\r\n              backdrop.style.display = \"none\";\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tpopup.classList.add(\"visible\");\r\n\r\n          const thankModal = document.getElementById(\"fl-thankyou-modal\");\r\n\r\n          if(thankModal)\r\n\t\t\t\t\t  thankModal.classList.add(\"hide\");\r\n          \r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t.addEventListener(\"click\", hidePopup);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet data = {};\r\n\r\n\t\t\t\tnew FormData(e.target).forEach((value, key) => (data[key] = value));\r\n        \r\n        //some forms are more complex so we want to format a more applicable message, if a formatter is not provided it will take what is given\r\n        formatFormNote(data);        \r\n        \r\n\t\t\t\tconst lead = await window.gHub.addLead(data.note, data);\r\n\r\n        //window.gHub.leadId is set in addLead in success so adding a check here, a lot of hooks on this event do not have null handling\r\n        if(window.gHub.leadId)\r\n\t\t\t\t  document.dispatchEvent(new CustomEvent(\"genie-lead-created\", { detail: lead }));\r\n\t\t\t})();\r\n\t\t})\r\n\t);\r\n\r\n\tconst tagsAttr = \"data-genie-tags\";\r\n\tconst downloadAttr = \"data-download-url\";\r\n\tdocument.querySelectorAll(`[${downloadAttr}]`).forEach(el => {\r\n\t\tel.addEventListener(\"click\", event => {\r\n\t\t\tevent.preventDefault();\r\n\r\n      let downloadedNote;\r\n      \r\n\t\t\tconst downloadFile = () => {\r\n\t\t\t\tconst anchor = document.createElement(\"a\");         \r\n\t\t\t\tanchor.href = el.getAttribute(downloadAttr);\r\n\t\t\t\tanchor.target = \"_blank\";\r\n\t\t\t\tanchor.download = el.getAttribute(downloadAttr);\r\n\t\t\t\tanchor.click();\r\n\r\n        let downloadUrl = anchor.href;\r\n\r\n        if(downloadUrl && downloadUrl.startsWith(\"/\"))\r\n          downloadUrl = `${window.location.origin}${downloadUrl}`;\r\n\r\n        downloadedNote =  `File Downloaded - ${downloadUrl}`;\r\n\t\t\t};\r\n\r\n\t\t\tconst popup = document.getElementById(\"download-report\");\r\n\t\t\tif (popup && window.gHub.isLeadCapture) {\r\n\t\t\t\tconst hidePopup = () => {\r\n\t\t\t\t\tpopup.classList.remove(\"visible\");\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t\t.removeEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\t\tpopup\r\n\t\t\t\t\t\t.querySelector(\"#download-report-submit\")\r\n\t\t\t\t\t\t.removeEventListener(\"click\", submitForm);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst submitForm = event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tconst address = document.getElementById(\"popup-email\").value;\r\n\r\n\t\t\t\t\tif (address) {\r\n            downloadFile();\r\n\t\t\t\t\t\thidePopup();\r\n            \r\n\t\t\t\t\t\twindow.gHub.addLead(downloadedNote, {\r\n\t\t\t\t\t\t\temailAddress: address,\r\n\t\t\t\t\t\t\tgenieTags: el.getAttribute(tagsAttr), // Support tags on the element\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.getElementById(\"popup-valid-email\").style.display =\r\n\t\t\t\t\t\t\t\"block\";\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tpopup.classList.add(\"visible\");\r\n\r\n\t\t\t\tpopup\r\n\t\t\t\t\t.querySelector(\".close-popup\")\r\n\t\t\t\t\t.addEventListener(\"click\", hidePopup);\r\n\r\n\t\t\t\tpopup\r\n\t\t\t\t\t.querySelector(\"#download-report-submit\")\r\n\t\t\t\t\t.addEventListener(\"click\", submitForm);\r\n\t\t\t} else {\r\n\t\t\t\tdownloadFile();\r\n\r\n        if(window.gHub.getLeadId()) {\r\n          //no lead capture here but we want to record the activty by passing the tags along\r\n          window.gHub.addLead(downloadedNote, {          \r\n            genieTags: el.getAttribute(tagsAttr), // Support tags on the element\r\n          });\r\n        }\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tdocument.querySelectorAll(`[${tagsAttr}]`).forEach(el => {\r\n\t\t// Skip if managed by the downloadUrl handler\r\n\t\tif (!el.hasAttribute(downloadAttr)) {\r\n\t\t\tel.addEventListener(\"click\", () => {\r\n        \r\n        //the downloadUrl handler captures the email so this one is a bit different in that we MUST have lead in context\r\n        //to fire of the update here.\r\n        if(window.gHub.getLeadId()) {\r\n\r\n          //TODO: consolidate duplicate code          \r\n          let downloadedNote = 'File Downloaded';\r\n          let downloadUrl = el.getAttribute(\"href\");\r\n\r\n          if(downloadUrl) {\r\n            if(downloadUrl.startsWith(\"/\"))\r\n              downloadUrl = `${window.location.origin}${downloadUrl}`;          \r\n\r\n            downloadedNote = `${downloadedNote} - ${downloadUrl}`;\r\n          } \r\n\r\n          window.gHub.addLead(downloadedNote, {\r\n            genieTags: el.getAttribute(tagsAttr),\r\n          });\r\n        }\r\n\t\t\t});\r\n\t\t}\r\n\t} );\r\n\t\r\n\tdocument.querySelectorAll( `.genie-alternate:nth-child(odd)` ).forEach( el =>\r\n\t\tel.classList.add( window.gHub.alternateShade && window.gHub.alternateShade !== '' ? window.gHub.alternateShade : 'dark' ) );  \r\n\r\n\twindow.requestAnimationFrame(() => window.gHub.lazyLoader(\"img.lazy\"));\r\n\r\n\twindow.gHub.galleryButton = (button, gallery) => {\r\n\t\tlet v = 1;\r\n\t\tconst captions = [\"Show Fewer\", \"Show More\"];\r\n\t\tbutton.addEventListener(\r\n\t\t\t\"click\",\r\n\t\t\te => (e.target.innerText = captions[(v ^= 1)])\r\n\t\t);\r\n\r\n\t\t/*\r\n\t\t ToDo: hide button when the container doesn't overflow\r\n\t\tconst resizeObserver = new ResizeObserver(() => {\r\n\t\t\tbutton.style.display = gallery.clientHeight === gallery.scrollHeight ? \"none\" : \"block\";\r\n\t\t});\r\n\t\tresizeObserver.observe(gallery);\r\n\t\t*/\r\n\t};\r\n\r\n\tif (typeof window.gHub.galleryImages !== \"undefined\") {\r\n\t\tconst gallery = document.getElementById(\"property-gallery\");\r\n\r\n\t\tif (gallery) {\r\n\t\t\t//const Gallery = lazy(() => import(\"@/components/_Gallery\"));\r\n\t\t\tconst GalleryComponent = () => (\r\n\t\t\t\t<Gallery images={window.gHub.galleryImages} />\r\n\t\t\t);\r\n\r\n\t\t\trender(GalleryComponent, gallery);\r\n\t\t}\r\n\t}\r\n\r\n\tconst timedPopup = document.querySelector(\".timed-popup\");\r\n\tif (timedPopup) {\r\n\t\tsetTimeout(() => {\r\n\t\t\ttimedPopup.style.display = \"block\";\r\n\t\t}, 30000);\r\n\r\n\t\ttimedPopup\r\n\t\t\t.querySelectorAll(\"[data-dismiss='modal']\")\r\n\t\t\t.forEach(\r\n\t\t\t\tel =>\r\n\t\t\t\t\tel.addEventListener(\r\n\t\t\t\t\t\t\"click\",\r\n\t\t\t\t\t\t() => (timedPopup.style.display = \"none\")\r\n\t\t\t\t\t),\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t}\r\n\r\n\tdocument.dispatchEvent(new Event(\"genie-landing-loaded\"), true);    \r\n\treturn null;\r\n};\r\n"],"names":["props","currentPhoto","setCurrentPhoto","createSignal","photos","setPhotoCount","onMount","document","querySelectorAll","length","createEffect","left","offsetLeft","getElementById","style","moveGallery","direction","Math","min","max","current","_$createComponent","For","each","images","children","img","index","_el$3","_tmpl$2","_el$4","firstChild","_el$5","_el$6","_el$7","nextSibling","_el$8","$$click","body","classList","toggle","_el$","_tmpl$","_el$2","_$delegateEvents","AutoComplete","acInput","window","gHub","autoComplete","placeChanged","_ref$","_$use","_$insert","_$effect","_p$","_v$","containerStyle","_v$2","inputStyle","e","_$style","t","undefined","HomeValuationResult","place","property","withLeadCapture","leadCaptured","setLeadCaptured","getLeadNote","formattedNote","propertyID","address","zip","siteAddress","siteAddressZip","formatted_address","_tmpl$3","ClosePopup","LeafletMap","id","mapStyle","center","geometry","location","lat","lng","zoom","Marker","position","_tmpl$4","Show","when","LeadCaptureForm","leadNote","genieTags","existingData","_$memo","propertyId","PropertyResponse","_tmpl$5","Signature","_el$10","_tmpl$6","_el$11","_c$","firstOwnerFirstName","_el$18","_tmpl$10","toLowerCase","_tmpl$7","_el$14","_tmpl$8","value","Intl","NumberFormat","format","sumBuildingSqFt","title","bedrooms","bathrooms","yearBuilt","saleDate","dateFormat","Date","parse","map","s","i","_el$20","_tmpl$11","_el$21","_el$22","_el$23","_$setAttribute","_el$15","_tmpl$9","_el$16","_el$17","currency","avmLow","avmHigh","agent","useAgentData","loading","_tmpl$12","displayName","phone","email","buttonCaption","areaId","useSettings","Context4Settings","showResult","setShowResult","setPlace","placeID","setPlaceID","createResource","searchAddress","Suspense","GeoArea","fillColor","LeafletPane","place_id","VIEWED","_LandingPages","lazyLoader","selector","lazyImages","slice","call","lazyImageObserver","IntersectionObserver","entries","forEach","entry","isIntersecting","lazyImage","target","src","dataset","remove","unobserve","observe","c","makeMap","options","layers","initMaps","buildMap","listings","group","L","featureGroup","l","isNaN","datatURI","size","anchor","color","getCssVar","state","trim","iconType","scale","flagURI","parseInt","salePrice","listPrice","circleURI","caption","icon","iconUrl","iconSize","iconAnchor","marker","addTo","fitMarkers","Object","keys","getBounds","fitBounds","padding","geoJson","geoJSON","onEachFeature","feature","layer","invalidateSize","input","bounds","initAutocomplete","places","google","maps","Autocomplete","componentRestrictions","country","types","event","addListener","getPlace","spinner","fill","petals","name","el","getComputedStyle","getPropertyValue","hex2rgba","hex","alpha","re","r","g","b","match","x","text","svg","encodeURIComponent","price","redirectToParentAsset","additionalParams","url","origin","pathname","replace","split","join","urlParams","URLSearchParams","search","delete","key","append","href","toString","randomPriceString","floor","random","getPropertyIdFromUrl","InsensitiveURLSearchParams","get","getLeadId","settings","leadId","genieLeadId","addEventListener","updateLead","detail","getLandingPageData","skipLeadCreate","fromEntries","agentId","hideAVM","propertyid","landingPageData","mergeTrackingData","postTracking","defaultTrackingData","defaults","trackingData","trackingDataFromSettings","trackingdata","reduce","destination","utm_source","utmSource","capture","utmMedium","utm_medium","utmCampaign","utm_campaign","utmTerm","utm_term","utmContent","utm_content","pageUtmSource","pageUtmCampaign","formatNewLeadReferringUrl","postedData","referringUrl","mlsNumber","mlsId","setFormPrepopInputs","leadEmailAddress","leadPhoneNumber","addLead","note","data","leadareaId","leadPropertyId","firstName","firstname","lastName","lastname","fullName","emailAddress","emailaddress","notePrompt","createLead","result","phoneNumber","preventDefault","popHomeValue","dynamicPopupId","addDynamicPopup","render","App","Provider","HomeValuation","showOptIn","ctaIdUrlParam","ctaIdShortDataValue","hasLeadData","ctaId","getCtaData","enabled","setTimeout","delay","LeadCtaTag","ctaData","initLandingPageData","lpData","lead","ctaid","getObjectLower","crlead","pid","token","container","querySelector","add","contains","height","once","clientHeight","getAttribute","y","getBoundingClientRect","top","scrollTo","pageYOffset","behavior","popup","hidePopup","removeEventListener","modal","display","backdrop","thankModal","FormData","formatFormNote","dispatchEvent","CustomEvent","tagsAttr","downloadAttr","downloadedNote","downloadFile","createElement","download","click","downloadUrl","startsWith","isLeadCapture","submitForm","hasAttribute","alternateShade","requestAnimationFrame","galleryButton","button","gallery","v","captions","innerText","galleryImages","GalleryComponent","Gallery","timedPopup","Event"],"mappings":"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"}