import{c as g,o as b,a as i,u as L,s as v,n as x,e as S,f as z,b as c,S as C,h as M,z as w,i as E,t as y,x as O}from"./index.js";import{y as B}from"./index2.js";const G=t=>{if(document.getElementById("google-maps-script"))t();else{var e=document.createElement("script");e.async=!0,e.src=`https://maps.googleapis.com/maps/api/js?key=${window.gHub.googleKey}&libraries=places`,e.id="google-maps-script",e.onload=()=>t();var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}},N=async()=>{await new Promise(t=>{if(document.getElementById("leaflet-script"))(async()=>{for(;!window.L;)await new Promise(n=>setTimeout(n,250));t(!0)})();else{var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css",document.head.appendChild(e);var a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js",a.id="leaflet-script",a.onload=()=>t(!0),document.head.appendChild(a)}})},$=(t,e={})=>{if(window.L&&t&&!t.classList.contains("leaflet-container")){const a=e.center||{lat:32.715,lng:-117.1611},n=e.mapStyle||window.gHub.mapStyle,o=window.L.tileLayer(`https://api.mapbox.com/styles/v1/mapbox/${n}/tiles/{z}/{x}/{y}?access_token=${window.gHub.mapboxKey}`,{attribution:'&copy; <a href="https://www.mapbox.com/feedback/">Mapbox</a>',tileSize:512,zoomOffset:-1});try{return window.L.map(t,{center:[a.lat,a.lng],zoomControl:!1,scrollWheelZoom:!1,layers:[o],attributionControl:!1,zoom:13,dragging:!1,...e})}catch{}}};var J=y("<div>"),P=y("<div class=leaflet-pane style=position:absolute;width:100%;height:100%;display:flex;align-Items:center;justify-Content:center;z-index:9999;>");const u=O(),j=t=>{const[e,a]=g(),{id:n="genie-map",center:o,cssClasses:d,style:p,mapStyle:m,zoom:h}=t;let l;return b(()=>{(async()=>{await N();const s=$(l,{mapStyle:m,center:o?new window.L.LatLng(o[0],o[1]):null,zoom:h,dragPan:!1});s&&a(s);const r=()=>{e()&&e().invalidateSize()};l.addEventListener("transitionend",r),new ResizeObserver(r).observe(document.getElementById(n))})()}),i(()=>{e()&&o&&window.L&&e().panTo(new window.L.LatLng(o[0],o[1]))}),[(()=>{var s=J(),r=l;return typeof r=="function"?L(r,s):l=s,v(s,"id",n),x(s,d),S(f=>z(s,p,f)),s})(),c(C,{get when(){return e()},get children(){return c(u.Provider,{value:e,get children(){return t.children}})}})]},k=t=>{const[e]=M(t.areaId,B);return c(T,{get polygon(){return e()},get color(){return t.color}})},T=t=>{const[e,a]=g(),n=w(u),{fitBounds:o=!0,fillColor:d="#E9B760"}=t;return i(()=>{n&&t.polygon&&typeof t.polygon.geoJSON<"u"&&a(JSON.parse(t.polygon.geoJSON))}),i(()=>{e()&&window.L.geoJSON(e(),{style:()=>({color:d}),onEachFeature:(p,m)=>{o&&(n().fitBounds(m.getBounds(),{zoom:22}),n().invalidateSize())}}).addTo(n())}),null},H=t=>(()=>{var e=P();return E(e,()=>t.children),e})(),R=({color:t,caption:e,position:a})=>c(_,{position:a}),_=t=>{const e=w(u),{position:a}=t;return i(()=>{e()&&a&&window.L&&window.L.marker(a,{...t}).addTo(e())}),null};export{R as C,k as G,j as L,_ as M,H as a,$ as b,G as c,N as i};
//# sourceMappingURL=LeafletMap.js.map
