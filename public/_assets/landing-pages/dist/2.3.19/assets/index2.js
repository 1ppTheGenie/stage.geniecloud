import{$ as g,p as q,q as M,v as U,c as A,w as W,h as T,a as h,o as z,x as _}from"./index.js";const K="genie-embed/v2/",G=async e=>(await y("get-agent-data",{agent_id:e})).result.agent,Q=async e=>{const t=await y("get-area-data",e);return{stats:t.result.statistics,areaName:t.result.areaName}},Z=async(e,t,o)=>(t=!isNaN(t)&&parseInt(t)>0?t:12,(await y("get-area-properties",{areaId:e,areaPeriod:t,agentId:o})).result),J=async e=>{const t=await y("get-area-monthly",e,"POST");return{stats:t.result.statistics,areaName:t.result.areaName}},pe=async e=>{const t=await y("get-area-polygon",{areaId:e});return t.success?t.result.polygon:{}},ye=async e=>await y("add-lead",e,"POST"),me=async e=>await y("update-lead",e,"POST"),ge=async e=>await y("get-landing-data",e),he=async e=>{if(e){const t=await y("address-search",{place_id:e});if(t.success===!0&&t.result.properties&&t.result.properties.length>0)return t.result.properties[0]}};async function y(e,t=null,o="GET"){let a=`${window.gHub.apiUrl}${K}${e}`;const n=new Headers;n.append("Content-Type","application/json"),n.append("Accept","application/json");const r={method:o,mode:"cors",cache:"no-cache",headers:n,referrerPolicy:"no-referrer"};return o==="POST"?r.body=t&&JSON.stringify(t):t&&(a+=`?${new URLSearchParams(Object.entries(t)).toString()}`),(await fetch(a,r)).json()}const L=Symbol("store-raw"),w=Symbol("store-node"),p=Symbol("store-has"),B=Symbol("store-self");function x(e){let t=e[g];if(!t&&(Object.defineProperty(e,g,{value:t=new Proxy(e,te)}),!Array.isArray(e))){const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let n=0,r=o.length;n<r;n++){const s=o[n];a[s].get&&Object.defineProperty(e,s,{enumerable:a[s].enumerable,get:a[s].get.bind(t)})}}return t}function P(e){let t;return e!=null&&typeof e=="object"&&(e[g]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function D(e,t=new Set){let o,a,n,r;if(o=e!=null&&e[L])return o;if(!P(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,u=e.length;s<u;s++)n=e[s],(a=D(n,t))!==n&&(e[s]=a)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let c=0,i=s.length;c<i;c++)r=s[c],!u[r].get&&(n=e[r],(a=D(n,t))!==n&&(e[r]=a))}return e}function N(e,t){let o=e[t];return o||Object.defineProperty(e,t,{value:o=Object.create(null)}),o}function C(e,t,o){if(e[t])return e[t];const[a,n]=A(o,{equals:!1,internal:!0});return a.$=n,e[t]=a}function X(e,t){const o=Reflect.getOwnPropertyDescriptor(e,t);return!o||o.get||!o.configurable||t===g||t===w||(delete o.value,delete o.writable,o.get=()=>e[g][t]),o}function H(e){M()&&C(N(e,w),B)()}function ee(e){return H(e),Reflect.ownKeys(e)}const te={get(e,t,o){if(t===L)return e;if(t===g)return o;if(t===q)return H(e),o;const a=N(e,w),n=a[t];let r=n?n():e[t];if(t===w||t===p||t==="__proto__")return r;if(!n){const s=Object.getOwnPropertyDescriptor(e,t);M()&&(typeof r!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(r=C(a,t,r)())}return P(r)?x(r):r},has(e,t){return t===L||t===g||t===q||t===w||t===p||t==="__proto__"?!0:(M()&&C(N(e,p),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ee,getOwnPropertyDescriptor:X};function O(e,t,o,a=!1){if(!a&&e[t]===o)return;const n=e[t],r=e.length;o===void 0?(delete e[t],e[p]&&e[p][t]&&n!==void 0&&e[p][t].$()):(e[t]=o,e[p]&&e[p][t]&&n===void 0&&e[p][t].$());let s=N(e,w),u;if((u=C(s,t,n))&&u.$(()=>o),Array.isArray(e)&&e.length!==r){for(let c=e.length;c<r;c++)(u=s[c])&&u.$();(u=C(s,"length",r))&&u.$(e.length)}(u=s[B])&&u.$()}function Y(e,t){const o=Object.keys(t);for(let a=0;a<o.length;a+=1){const n=o[a];O(e,n,t[n])}}function oe(e,t){if(typeof t=="function"&&(t=t(e)),t=D(t),Array.isArray(t)){if(e===t)return;let o=0,a=t.length;for(;o<a;o++){const n=t[o];e[o]!==n&&O(e,o,n)}O(e,"length",a)}else Y(e,t)}function S(e,t,o=[]){let a,n=e;if(t.length>1){a=t.shift();const s=typeof a,u=Array.isArray(e);if(Array.isArray(a)){for(let c=0;c<a.length;c++)S(e,[a[c]].concat(t),o);return}else if(u&&s==="function"){for(let c=0;c<e.length;c++)a(e[c],c)&&S(e,[c].concat(t),o);return}else if(u&&s==="object"){const{from:c=0,to:i=e.length-1,by:f=1}=a;for(let l=c;l<=i;l+=f)S(e,[l].concat(t),o);return}else if(t.length>1){S(e[a],t,[a].concat(o));return}n=e[a],o=[a].concat(o)}let r=t[0];typeof r=="function"&&(r=r(n,o),r===n)||a===void 0&&r==null||(r=D(r),a===void 0||P(n)&&P(r)&&!Array.isArray(r)?Y(n,r):O(e,a,r))}function I(...[e,t]){const o=D(e||{}),a=Array.isArray(o),n=x(o);function r(...s){U(()=>{a&&s.length===1?oe(o,s[0]):S(o,s)})}return[n,r]}const be=(e=!1)=>(window.gHub.propertyCaptions??"homes,home").split(",")[e?1:0],v=window.gHub.areaId,$=window.gHub.agentId,[m,ae]=I({period:parseInt(window?.gHub?.areaPeriod??(document.getElementsByClassName("genie-embed").length?parseInt(document.getElementsByClassName("genie-embed")[0].getAttribute("data-genie-areaperiod")):12),10),propertyType:parseInt(window?.gHub?.propertyType??0,10)}),[we,R]=I({loading:!0,listings:[],get active(){return[this.listings.reduce(b([1],0),0),this.listings.reduce(b([1],1),0)]},get sold(){return[this.listings.reduce(b([2],0),0),this.listings.reduce(b([2],1),0)]},get pending(){return[this.listings.reduce(b([3,4],0),0),this.listings.reduce(b([3,4],1),0)]}}),[Se,k]=I({loading:!0,propertyTypeID:m.propertyType,stats:{},get propertyStats(){return this.stats.propertyTypeData&&this.stats.propertyTypeData[m.propertyType].statistics},get bedroomStats(){return this.propertyStats&&this.propertyStats.bedroomStats},get topSize(){return typeof this.bedroomStats<"u"?this.bedroomStats.reduce((e,t)=>e.sold>t.sold?e:t):{}},get percentChange(){return this.propertyStats&&this.propertyStats.avgSalePrice/this.propertyStats.previousPeriod.avgSalePrice-1},get totalSold(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.sold+this.stats.propertyTypeData[1].statistics.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.sold},get totalSoldLastPeriod(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.previousPeriod.sold+this.stats.propertyTypeData[1].statistics.previousPeriod.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.previousPeriod.sold},get soldDelta(){return this.totalSold/this.totalSoldLastPeriod-1},areaPeriod:m.period,areaId:v}),[De,re]=I({loading:!0,propertyTypeID:m.propertyType,stats:{}});W(()=>{const[e,t]=A(m.period),[o]=T(e,async r=>{if(!isNaN(r))return await Q({areaId:v,agentId:$,areaPeriod:r})}),[a]=T(v,async r=>await J({areaId:r,agentId:$})),[n]=T(e,async r=>{if(!isNaN(r))return await Z(v,r,$)});return h(()=>{t(m.period),k({loading:!0,areaPeriod:m.period})}),h(()=>{k({propertyTypeID:m.propertyType})}),h(()=>{!o.loading&&typeof o()<"u"&&k({loading:!1,areaName:o().areaName,overall:o().stats.overall,stats:o().stats})}),h(()=>{!a.loading&&typeof a()<"u"&&re({loading:!1,areaName:a().areaName,stats:[...a().stats]})}),h(()=>{!n.loading&&typeof n()<"u"&&R({listings:n()})}),h(()=>{R({loading:n.loading})}),[o,a,n,r=>t(r)]});const b=(e,t)=>(o,{statusTypeID:a,propertyTypeID:n})=>e.indexOf(a)>-1&&n===t?o+=1:o;function V(e){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(e)}function F(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function j(e){F(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||V(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var ne=36e5;function se(e,t){return F(2,arguments),j(e).getTime()-j(t).getTime()}var E={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},ie="trunc";function ce(e){return e?E[e]:E[ie]}function ue(e,t,o){F(2,arguments);var a=se(e,t)/ne;return ce(o?.roundingMethod)(a)}const le=_(),Ce=(e,t={month:"2-digit",day:"2-digit",year:"numeric"})=>new Intl.DateTimeFormat("en-US",t).format(e),Te=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}).format(e),ve=e=>new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2}).format(e),Ae=(e,t)=>getComputedStyle(t??document.body).getPropertyValue(e),Pe=e=>`${e.streetNumber} ${e.streetName}`,Ne=()=>{},Oe=(e=10,t=1)=>{const[o,a]=A(e),[n,r]=A(t);return{pageSize:o,setPageSize:a,currentPage:n,setPage:r,pageOffset:()=>(n()-1)*o()}},de=e=>{const o={...typeof window.gHub<"u"?window.gHub:{},...e};z(()=>{o.areaPeriod&&ae({period:parseInt(o.areaPeriod)})});const a=r=>r.toLowerCase().replaceAll("_","");return Object.keys(o).forEach(r=>delete Object.assign(o,{[a(r)]:o[r]})[r]),new Proxy(o,{get(r,s){return r[a(s)]},set(r,s,u){return Reflect.set(r,a(s),u)}})},Ie=(e,t,o,a="active",n)=>{let r,s;const u=new Date;u.setMonth(u.getMonth()-o);const c=new Date;switch(a.toString().toLocaleLowerCase()){case"sold":s=(i,f)=>{const l=Date.parse(i.soldDate),d=Date.parse(f.soldDate);return l<d?1:l>d?-1:0},r=e.filter(i=>i.statusType.toLowerCase()==="sold"&&i.propertyTypeID===t&&i.soldDate!==null&&Date.parse(i.soldDate)>=u.getTime());break;case"new":r=e.filter(i=>i.statusType.toLowerCase()==="active"&&Math.floor(ue(Date.parse(i.listDate),c)/24)>-30&&i.propertyTypeID===t),s=(i,f)=>{const l=Date.parse(i.listDate),d=Date.parse(f.listDate);return l>d?-1:l<d?1:0};break;case"pending":s=(i,f)=>{const l=Date.parse(i.listDate),d=Date.parse(f.listDate);return l<d?1:l>d?-1:0},r=e.filter(i=>(i.statusType.toLowerCase()==="pending"||i.statusType.toLowerCase()==="contingent")&&i.propertyTypeID===t);break;case"active":default:s=(i,f)=>{const l=Date.parse(i.listDate),d=Date.parse(f.listDate);return l<d?1:l>d?-1:0},r=e.filter(i=>i.statusType.toLowerCase()===a.toLowerCase()&&i.propertyTypeID===t);break}return r.sort(s),r},$e=()=>{const{agentId:e}=de(le),[t]=T(e,G);return t},ke=e=>{if(document.getElementById(e))return!1;document.body.classList.add("hasPopup");const t=document.createElement("div");return t.id=e,t.classList.add("popup-dialog","visible"),document.body.appendChild(t),!0},Me=e=>{switch(e){case 1:return{delay:2e3,enabled:!1};case 2:return{ctaTitle:"Personalized Home Value Estimate",ctaSubTitle:"Discover Your Home's True Worth",ctaBody:"Interested in a personalized valuation of your home?",ctaTags:`RequestCustomValuation, OptInContact, Cta${e}Accept`,ctaDisplayTags:`Cta${e}Display`,ctaDisplayNote:"Prompt for a home valuation was displayed",ctaVerifiedNote:"Contact information was confirmed after requesting a home evaluation",ctaVerifyTags:"CtaContactVerfied",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/025d77d8-0d14-47d0-3ec9-71e68d9cd400/public",ctaNote:"I would like a custom home valuation",ctaNoteIncludeArea:!0,ctaNoteIncludeAddress:!0,ctaDisclaimer:["By continuing, you consent to receive communications from us, including but not limited to updates, promotional offers, and other marketing materials. We value your privacy and will use your information solely for the purpose of contacting you as per your request or interest. You can opt out of these communications at any time by following the unsubscribe instructions provided in our emails or by contacting us directly. Your information will not be shared with third parties without your explicit consent."],ctaResponse:"Great! Your request has been submitted!",ctaSubmitButtonText:"Absolutely!",ctaShowContactForm:!0,ctaContactFormBody:"Please confirm or update your contact information to ensure you receive accurate updates.",ctaContactFormResponse:"Thanks for confirming, you're all set!",ctaVerifyButtonText:"Confirm",ctaContactMeMessage:"If you need further assistance, please don't hesitate to reach out.",delay:2e3,enabled:!0};case 3:return{ctaTitle:"Accurate Home Valuation",ctaSubTitle:"Uncover Your Property's Market Value",ctaBody:"Would you like to get an accurate valuation for your home?",ctaTags:`RequestCustomValuation, OptInContact, Cta${e}Accept`,ctaDisplayTags:`Cta${e}Display`,ctaDisplayNote:"Prompt for a home valuation was displayed",ctaVerifiedNote:"Contact information was confirmed after requesting a home evaluation",ctaVerifyTags:"CtaContactVerfied",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/1595044b-819f-45b5-892f-0a55704e3c00/public",ctaNote:"I would like a custom home valuation",ctaNoteIncludeArea:!0,ctaNoteIncludeAddress:!0,ctaDisclaimer:["By continuing, you consent to receive communications from us, including but not limited to updates, promotional offers, and other marketing materials. We value your privacy and will use your information solely for the purpose of contacting you as per your request or interest. You can opt out of these communications at any time by following the unsubscribe instructions provided in our emails or by contacting us directly. Your information will not be shared with third parties without your explicit consent."],ctaResponse:"Awesome! We've received your request!",ctaSubmitButtonText:"Yes, please!",ctaShowContactForm:!0,ctaContactFormBody:"Ensure your contact details are correct so we can keep you informed.",ctaContactFormResponse:"Thanks for updating, you're all set!",ctaVerifyButtonText:"Verify",ctaContactMeMessage:"Need more information? Feel free to contact me anytime.",delay:2e3,enabled:!0};case 4:return{ctaTitle:"Personalized Home Value Estimate",ctaSubTitle:"Discover Your Home's True Worth",ctaBody:"Interested in a personalized valuation of your home?",ctaTags:`RequestCustomValuation, OptInContact, Cta${e}Accept`,ctaDisplayTags:`Cta${e}Display`,ctaDisplayNote:"Prompt for a home valuation was displayed",ctaVerifiedNote:"Contact information was confirmed after requesting a home evaluation",ctaVerifyTags:"CtaContactVerfied",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/025d77d8-0d14-47d0-3ec9-71e68d9cd400/public",ctaNote:"I would like a custom home valuation",ctaNoteIncludeArea:!0,ctaNoteIncludeAddress:!0,ctaDisclaimer:["By continuing, you consent to receive communications from us, including but not limited to updates, promotional offers, and other marketing materials. We value your privacy and will use your information solely for the purpose of contacting you as per your request or interest. You can opt out of these communications at any time by following the unsubscribe instructions provided in our emails or by contacting us directly. Your information will not be shared with third parties without your explicit consent."],ctaResponse:"Great! Your request has been submitted!",ctaSubmitButtonText:"Absolutely!",ctaShowContactForm:!0,ctaContactFormBody:"Please confirm or update your contact information to ensure you receive accurate updates.",ctaContactFormResponse:"Thanks for confirming, you're all set!",ctaVerifyButtonText:"Confirm",ctaContactMeMessage:"If you need further assistance, please don't hesitate to reach out.",delay:2e3,enabled:!0};case 5:return{ctaTitle:"Accurate Home Valuation",ctaSubTitle:"Uncover Your Property's Market Value",ctaBody:"Would you like to get an accurate valuation for your home?",ctaTags:`RequestCustomValuation, OptInContact, Cta${e}Accept`,ctaDisplayTags:`Cta${e}Display`,ctaDisplayNote:"Prompt for a home valuation was displayed",ctaVerifiedNote:"Contact information was confirmed after requesting a home evaluation",ctaVerifyTags:"CtaContactVerfied",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/1595044b-819f-45b5-892f-0a55704e3c00/public",ctaNote:"I would like a custom home valuation",ctaNoteIncludeArea:!0,ctaNoteIncludeAddress:!0,ctaDisclaimer:["By continuing, you consent to receive communications from us, including but not limited to updates, promotional offers, and other marketing materials. We value your privacy and will use your information solely for the purpose of contacting you as per your request or interest. You can opt out of these communications at any time by following the unsubscribe instructions provided in our emails or by contacting us directly. Your information will not be shared with third parties without your explicit consent."],ctaResponse:"Awesome! We've received your request!",ctaSubmitButtonText:"Yes, please!",ctaShowContactForm:!0,ctaContactFormBody:"Ensure your contact details are correct so we can keep you informed.",ctaContactFormResponse:"Thanks for updating, you're all set!",ctaVerifyButtonText:"Verify",ctaContactMeMessage:"Need more information? Feel free to contact me anytime.",delay:2e3,enabled:!0};default:return{enabled:!1}}},Le=e=>{if(!e.noteFormatter){e.note=e.note||"Form Submission";return}switch(e.noteFormatter.toLowerCase()){case"RequestShowing".toLowerCase():let o=`Showing request for ${e.formListingAddress}`;const a=e["meta[availableDate]"],n=e["meta[alternativeDate]"];if(a||n){const c=[];a&&c.push(a),n&&c.push(n),o+=` availability: ${c.join(", ")}`,delete e["meta[availableDate]"],delete e["meta[alternativeDate]"]}e.note?e.note=`${o}.  Message: ${e.note}`:e.note=o;break;case"RequestMoreInfoMoving".toLowerCase():const r=e["meta[movingDate]"]||"not moving",s=e["meta[reachMe]"],u=`More information requested for ${e.formListingAddress} 
Moving Date: ${r} 
Best way to reach: ${s} 
Message: ${e.note||"please follow up"} `;e.note=u,delete e["meta[movingDate]"],delete e["meta[reachMe]"];break;case"RequestCustomValuation".toLowerCase():e.note=`Custom valuation request for ${e.notePropertyAddress}.

Additional property details: ${e.note||"none provided"} `;break}};class Ve{constructor(t){this.params=new URLSearchParams(t),this.map=new Map;for(const[o,a]of this.params.entries())this.map.set(o.toLowerCase(),a)}get(t){return this.map.get(t.toLowerCase())}getObjectLower(){return Object.fromEntries(this.map)}}export{Ne as A,le as C,Ve as I,V as _,de as a,me as b,Te as c,Ce as d,ye as e,ke as f,Le as g,Me as h,Oe as i,m as j,Se as k,ge as l,we as m,D as n,Ie as o,ve as p,De as q,Ae as r,he as s,Pe as t,$e as u,be as v,F as w,j as x,pe as y,ae as z};
//# sourceMappingURL=index2.js.map
