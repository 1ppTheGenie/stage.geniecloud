import{$ as m,p as R,q as $,v as z,c as O,w as G,j as P,a as h,o as K,x as Y}from"./index.js";const V="genie-embed/v2/",W=async e=>(await g("get-agent-data",{agent_id:e})).result.agent,Q=async e=>{const t=await g("get-area-data",e);return{stats:t.result.statistics,areaName:t.result.areaName}},Z=async(e,t,s)=>(t=!isNaN(t)&&parseInt(t)>0?t:12,(await g("get-area-properties",{areaId:e,areaPeriod:t,agentId:s})).result),J=async e=>{const t=await g("get-area-monthly",e,"POST");return{stats:t.result.statistics,areaName:t.result.areaName}},pe=async e=>{const t=await g("get-area-polygon",{areaId:e});return t.success?t.result.polygon:{}},ge=async e=>await g("add-lead",e,"POST"),ye=async e=>await g("update-lead",e,"POST"),me=async e=>await g("get-landing-data",e),he=async e=>{if(e){const t=await g("address-search",{place_id:e});if(t.success===!0&&t.result.properties&&t.result.properties.length>0)return t.result.properties[0]}};async function g(e,t=null,s="GET"){let r=`${window.gHub.apiUrl}${V}${e}`;const o=new Headers;o.append("Content-Type","application/json"),o.append("Accept","application/json");const n={method:s,mode:"cors",cache:"no-cache",headers:o,referrerPolicy:"no-referrer"};return s==="POST"?n.body=t&&JSON.stringify(t):t&&(r+=`?${new URLSearchParams(Object.entries(t)).toString()}`),(await fetch(r,n)).json()}const M=Symbol("store-raw"),w=Symbol("store-node"),p=Symbol("store-has"),U=Symbol("store-self");function _(e){let t=e[m];if(!t&&(Object.defineProperty(e,m,{value:t=new Proxy(e,te)}),!Array.isArray(e))){const s=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,n=s.length;o<n;o++){const a=s[o];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function I(e){let t;return e!=null&&typeof e=="object"&&(e[m]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function D(e,t=new Set){let s,r,o,n;if(s=e!=null&&e[M])return s;if(!I(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,l=e.length;a<l;a++)o=e[a],(r=D(o,t))!==o&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let c=0,i=a.length;c<i;c++)n=a[c],!l[n].get&&(o=e[n],(r=D(o,t))!==o&&(e[n]=r))}return e}function C(e,t){let s=e[t];return s||Object.defineProperty(e,t,{value:s=Object.create(null)}),s}function T(e,t,s){if(e[t])return e[t];const[r,o]=O(s,{equals:!1,internal:!0});return r.$=o,e[t]=r}function X(e,t){const s=Reflect.getOwnPropertyDescriptor(e,t);return!s||s.get||!s.configurable||t===m||t===w||(delete s.value,delete s.writable,s.get=()=>e[m][t]),s}function x(e){$()&&T(C(e,w),U)()}function ee(e){return x(e),Reflect.ownKeys(e)}const te={get(e,t,s){if(t===M)return e;if(t===m)return s;if(t===R)return x(e),s;const r=C(e,w),o=r[t];let n=o?o():e[t];if(t===w||t===p||t==="__proto__")return n;if(!o){const a=Object.getOwnPropertyDescriptor(e,t);$()&&(typeof n!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(n=T(r,t,n)())}return I(n)?_(n):n},has(e,t){return t===M||t===m||t===R||t===w||t===p||t==="__proto__"?!0:($()&&T(C(e,p),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ee,getOwnPropertyDescriptor:X};function v(e,t,s,r=!1){if(!r&&e[t]===s)return;const o=e[t],n=e.length;s===void 0?(delete e[t],e[p]&&e[p][t]&&o!==void 0&&e[p][t].$()):(e[t]=s,e[p]&&e[p][t]&&o===void 0&&e[p][t].$());let a=C(e,w),l;if((l=T(a,t,o))&&l.$(()=>s),Array.isArray(e)&&e.length!==n){for(let c=e.length;c<n;c++)(l=a[c])&&l.$();(l=T(a,"length",n))&&l.$(e.length)}(l=a[U])&&l.$()}function B(e,t){const s=Object.keys(t);for(let r=0;r<s.length;r+=1){const o=s[r];v(e,o,t[o])}}function se(e,t){if(typeof t=="function"&&(t=t(e)),t=D(t),Array.isArray(t)){if(e===t)return;let s=0,r=t.length;for(;s<r;s++){const o=t[s];e[s]!==o&&v(e,s,o)}v(e,"length",r)}else B(e,t)}function S(e,t,s=[]){let r,o=e;if(t.length>1){r=t.shift();const a=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)S(e,[r[c]].concat(t),s);return}else if(l&&a==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&S(e,[c].concat(t),s);return}else if(l&&a==="object"){const{from:c=0,to:i=e.length-1,by:f=1}=r;for(let u=c;u<=i;u+=f)S(e,[u].concat(t),s);return}else if(t.length>1){S(e[r],t,[r].concat(s));return}o=e[r],s=[r].concat(s)}let n=t[0];typeof n=="function"&&(n=n(o,s),n===o)||r===void 0&&n==null||(n=D(n),r===void 0||I(o)&&I(n)&&!Array.isArray(n)?B(o,n):v(e,r,n))}function N(...[e,t]){const s=D(e||{}),r=Array.isArray(s),o=_(s);function n(...a){z(()=>{r&&a.length===1?se(s,a[0]):S(s,a)})}return[o,n]}const be=(e=!1)=>(window.gHub.propertyCaptions??"homes,home").split(",")[e?1:0],A=window.gHub.areaId,L=window.gHub.agentId,[y,re]=N({period:parseInt(window?.gHub?.areaPeriod??(document.getElementsByClassName("genie-embed").length?parseInt(document.getElementsByClassName("genie-embed")[0].getAttribute("data-genie-areaperiod")):12),10),propertyType:parseInt(window?.gHub?.propertyType??0,10)}),[we,F]=N({loading:!0,listings:[],get active(){return[this.listings.reduce(b([1],0),0),this.listings.reduce(b([1],1),0)]},get sold(){return[this.listings.reduce(b([2],0),0),this.listings.reduce(b([2],1),0)]},get pending(){return[this.listings.reduce(b([3,4],0),0),this.listings.reduce(b([3,4],1),0)]}}),[Se,k]=N({loading:!0,propertyTypeID:y.propertyType,stats:{},get propertyStats(){return this.stats.propertyTypeData&&this.stats.propertyTypeData[y.propertyType].statistics},get bedroomStats(){return this.propertyStats&&this.propertyStats.bedroomStats},get topSize(){return typeof this.bedroomStats<"u"?this.bedroomStats.reduce((e,t)=>e.sold>t.sold?e:t):{}},get percentChange(){return this.propertyStats&&this.propertyStats.avgSalePrice/this.propertyStats.previousPeriod.avgSalePrice-1},get totalSold(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.sold+this.stats.propertyTypeData[1].statistics.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.sold},get totalSoldLastPeriod(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.previousPeriod.sold+this.stats.propertyTypeData[1].statistics.previousPeriod.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.previousPeriod.sold},get soldDelta(){return this.totalSold/this.totalSoldLastPeriod-1},areaPeriod:y.period,areaId:A}),[De,ne]=N({loading:!0,propertyTypeID:y.propertyType,stats:{}});G(()=>{const[e,t]=O(y.period),[s]=P(e,async n=>{if(!isNaN(n))return await Q({areaId:A,agentId:L,areaPeriod:n})}),[r]=P(A,async n=>await J({areaId:n,agentId:L})),[o]=P(e,async n=>{if(!isNaN(n))return await Z(A,n,L)});return h(()=>{t(y.period),k({loading:!0,areaPeriod:y.period})}),h(()=>{k({propertyTypeID:y.propertyType})}),h(()=>{!s.loading&&typeof s()<"u"&&k({loading:!1,areaName:s().areaName,overall:s().stats.overall,stats:s().stats})}),h(()=>{!r.loading&&typeof r()<"u"&&ne({loading:!1,areaName:r().areaName,stats:[...r().stats]})}),h(()=>{!o.loading&&typeof o()<"u"&&F({listings:o()})}),h(()=>{F({loading:o.loading})}),[s,r,o,n=>t(n)]});const b=(e,t)=>(s,{statusTypeID:r,propertyTypeID:o})=>e.indexOf(r)>-1&&o===t?s+=1:s;function j(e){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(e)}function E(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function q(e){E(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||j(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var oe=36e5;function ae(e,t){return E(2,arguments),q(e).getTime()-q(t).getTime()}var H={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},ie="trunc";function ce(e){return e?H[e]:H[ie]}function le(e,t,s){E(2,arguments);var r=ae(e,t)/oe;return ce(s?.roundingMethod)(r)}const ue=Y(),Te=(e,t={month:"2-digit",day:"2-digit",year:"numeric"})=>new Intl.DateTimeFormat("en-US",t).format(e),Pe=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}).format(e),Ae=e=>new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2}).format(e),Oe=(e,t)=>getComputedStyle(t??document.body).getPropertyValue(e),Ie=e=>`${e.streetNumber} ${e.streetName}`,Ce=()=>{},ve=(e=10,t=1)=>{const[s,r]=O(e),[o,n]=O(t);return{pageSize:s,setPageSize:r,currentPage:o,setPage:n,pageOffset:()=>(o()-1)*s()}},de=e=>{const s={...typeof window.gHub<"u"?window.gHub:{},...e};K(()=>{s.areaPeriod&&re({period:parseInt(s.areaPeriod)})});const r=n=>n.toLowerCase().replaceAll("_","");return Object.keys(s).forEach(n=>delete Object.assign(s,{[r(n)]:s[n]})[n]),new Proxy(s,{get(n,a){return n[r(a)]},set(n,a,l){return Reflect.set(n,r(a),l)}})},Ne=(e,t,s,r="active",o)=>{let n,a;const l=new Date;l.setMonth(l.getMonth()-s);const c=new Date;switch(r.toString().toLocaleLowerCase()){case"sold":a=(i,f)=>{const u=Date.parse(i.soldDate),d=Date.parse(f.soldDate);return u<d?1:u>d?-1:0},n=e.filter(i=>i.statusType.toLowerCase()==="sold"&&i.propertyTypeID===t&&i.soldDate!==null&&Date.parse(i.soldDate)>=l.getTime());break;case"new":n=e.filter(i=>i.statusType.toLowerCase()==="active"&&Math.floor(le(Date.parse(i.listDate),c)/24)>-30&&i.propertyTypeID===t),a=(i,f)=>{const u=Date.parse(i.listDate),d=Date.parse(f.listDate);return u>d?-1:u<d?1:0};break;case"pending":a=(i,f)=>{const u=Date.parse(i.listDate),d=Date.parse(f.listDate);return u<d?1:u>d?-1:0},n=e.filter(i=>(i.statusType.toLowerCase()==="pending"||i.statusType.toLowerCase()==="contingent")&&i.propertyTypeID===t);break;case"active":default:a=(i,f)=>{const u=Date.parse(i.listDate),d=Date.parse(f.listDate);return u<d?1:u>d?-1:0},n=e.filter(i=>i.statusType.toLowerCase()===r.toLowerCase()&&i.propertyTypeID===t);break}return n.sort(a),n},Le=()=>{const{agentId:e}=de(ue),[t]=P(e,W);return t},ke=e=>{if(document.getElementById(e))return!1;document.body.classList.add("hasPopup");const t=document.createElement("div");return t.id=e,t.classList.add("popup-dialog","visible"),document.body.appendChild(t),!0},$e=e=>{switch(e){case 1:return{ctaTitle:"Market Insider Offer",ctaSubTitle:"What's happening in YOUR market?",ctaBody:"Do you want your market insider report delivered monthly?",ctaTags:"MarketInsiderSubscribe, OptInContact",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/b05063b4-514a-41ed-8dfa-5faa4acddb00/public",ctaNote:"I would like monthly market update for ",ctaSubmitText:"Yes!",ctaResponse:"All set, we submitted your request!",delay:5};default:return{ctaTitle:"Market Insider Subscription",ctaSubTitle:"Stay on top of the latest TRENDS",ctaBody:"Get your market insider report delivered monthly.",ctaTags:"MarketInsiderSubscribe, OptInContact",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/b05063b4-514a-41ed-8dfa-5faa4acddb00/public",ctaNote:"I would like monthly market update for ",ctaSubmitText:"Yes Please!",ctaResponse:"All set, we submitted your request!",delay:5}}},Me=e=>{if(!e.noteFormatter){e.note=e.note||"Form Submission";return}switch(e.noteFormatter.toLowerCase()){case"RequestShowing".toLowerCase():let s=`Showing request for ${e.formListingAddress}`;const r=e["meta[availableDate]"],o=e["meta[alternativeDate]"];if(r||o){const c=[];r&&c.push(r),o&&c.push(o),s+=` availability: ${c.join(", ")}`,e.meta&&(delete e.meta.availableDate,delete e.meta.alternativeDate)}e.note?e.note=`${s}.  Message: ${e.note}`:e.note=s;break;case"RequestMoreInfoMoving".toLowerCase():const n=e["meta[movingDate]"]||"not moving",a=e["meta[reachMe]"],l=`More information requested for ${e.formListingAddress} 
Moving Date: ${n} 
Best way to reach: ${a} 
Message: ${e.note||"please follow up"} `;e.note=l,e.meta&&(delete e.meta.movingDate,delete e.meta.reachMe);break;case"RequestCustomValuation".toLowerCase():e.note=`Custom valuation request for ${e.notePropertyAddress}.

Additional property details: ${e.note||"none provided"} `;break}};class je{constructor(t){this.params=new URLSearchParams(t),this.map=new Map;for(const[s,r]of this.params.entries())this.map.set(s.toLowerCase(),r)}get(t){return this.map.get(t.toLowerCase())}getObjectLower(){return Object.fromEntries(this.map)}}export{Ce as A,ue as C,je as I,j as _,de as a,ye as b,Pe as c,Te as d,ge as e,ke as f,Me as g,ve as h,y as i,Se as j,we as k,me as l,$e as m,D as n,Ne as o,Ae as p,De as q,Oe as r,he as s,Ie as t,Le as u,be as v,E as w,q as x,pe as y,re as z};
//# sourceMappingURL=index2.js.map
