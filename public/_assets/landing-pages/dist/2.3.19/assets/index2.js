import{$ as m,p as F,q as L,v as _,c as A,w as Y,h as C,a as h,o as z,x as W}from"./index.js";const G="genie-embed/v2/",K=async e=>(await y("get-agent-data",{agent_id:e})).result.agent,Q=async e=>{const t=await y("get-area-data",e);return{stats:t.result.statistics,areaName:t.result.areaName}},Z=async(e,t,r)=>(t=!isNaN(t)&&parseInt(t)>0?t:12,(await y("get-area-properties",{areaId:e,areaPeriod:t,agentId:r})).result),J=async e=>{const t=await y("get-area-monthly",e,"POST");return{stats:t.result.statistics,areaName:t.result.areaName}},pe=async e=>{const t=await y("get-area-polygon",{areaId:e});return t.success?t.result.polygon:{}},ye=async e=>await y("add-lead",e,"POST"),ge=async e=>await y("update-lead",e,"POST"),me=async e=>await y("get-landing-data",e),he=async e=>{if(e){const t=await y("address-search",{place_id:e});if(t.success===!0&&t.result.properties&&t.result.properties.length>0)return t.result.properties[0]}};async function y(e,t=null,r="GET"){let o=`${window.gHub.apiUrl}${G}${e}`;const n=new Headers;n.append("Content-Type","application/json"),n.append("Accept","application/json");const s={method:r,mode:"cors",cache:"no-cache",headers:n,referrerPolicy:"no-referrer"};return r==="POST"?s.body=t&&JSON.stringify(t):t&&(o+=`?${new URLSearchParams(Object.entries(t)).toString()}`),(await fetch(o,s)).json()}const $=Symbol("store-raw"),w=Symbol("store-node"),p=Symbol("store-has"),U=Symbol("store-self");function x(e){let t=e[m];if(!t&&(Object.defineProperty(e,m,{value:t=new Proxy(e,te)}),!Array.isArray(e))){const r=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let n=0,s=r.length;n<s;n++){const a=r[n];o[a].get&&Object.defineProperty(e,a,{enumerable:o[a].enumerable,get:o[a].get.bind(t)})}}return t}function v(e){let t;return e!=null&&typeof e=="object"&&(e[m]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function D(e,t=new Set){let r,o,n,s;if(r=e!=null&&e[$])return r;if(!v(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,u=e.length;a<u;a++)n=e[a],(o=D(n,t))!==n&&(e[a]=o)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let c=0,i=a.length;c<i;c++)s=a[c],!u[s].get&&(n=e[s],(o=D(n,t))!==n&&(e[s]=o))}return e}function O(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function T(e,t,r){if(e[t])return e[t];const[o,n]=A(r,{equals:!1,internal:!0});return o.$=n,e[t]=o}function X(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===m||t===w||(delete r.value,delete r.writable,r.get=()=>e[m][t]),r}function H(e){L()&&T(O(e,w),U)()}function ee(e){return H(e),Reflect.ownKeys(e)}const te={get(e,t,r){if(t===$)return e;if(t===m)return r;if(t===F)return H(e),r;const o=O(e,w),n=o[t];let s=n?n():e[t];if(t===w||t===p||t==="__proto__")return s;if(!n){const a=Object.getOwnPropertyDescriptor(e,t);L()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=T(o,t,s)())}return v(s)?x(s):s},has(e,t){return t===$||t===m||t===F||t===w||t===p||t==="__proto__"?!0:(L()&&T(O(e,p),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ee,getOwnPropertyDescriptor:X};function I(e,t,r,o=!1){if(!o&&e[t]===r)return;const n=e[t],s=e.length;r===void 0?(delete e[t],e[p]&&e[p][t]&&n!==void 0&&e[p][t].$()):(e[t]=r,e[p]&&e[p][t]&&n===void 0&&e[p][t].$());let a=O(e,w),u;if((u=T(a,t,n))&&u.$(()=>r),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(u=a[c])&&u.$();(u=T(a,"length",s))&&u.$(e.length)}(u=a[U])&&u.$()}function V(e,t){const r=Object.keys(t);for(let o=0;o<r.length;o+=1){const n=r[o];I(e,n,t[n])}}function re(e,t){if(typeof t=="function"&&(t=t(e)),t=D(t),Array.isArray(t)){if(e===t)return;let r=0,o=t.length;for(;r<o;r++){const n=t[r];e[r]!==n&&I(e,r,n)}I(e,"length",o)}else V(e,t)}function S(e,t,r=[]){let o,n=e;if(t.length>1){o=t.shift();const a=typeof o,u=Array.isArray(e);if(Array.isArray(o)){for(let c=0;c<o.length;c++)S(e,[o[c]].concat(t),r);return}else if(u&&a==="function"){for(let c=0;c<e.length;c++)o(e[c],c)&&S(e,[c].concat(t),r);return}else if(u&&a==="object"){const{from:c=0,to:i=e.length-1,by:f=1}=o;for(let l=c;l<=i;l+=f)S(e,[l].concat(t),r);return}else if(t.length>1){S(e[o],t,[o].concat(r));return}n=e[o],r=[o].concat(r)}let s=t[0];typeof s=="function"&&(s=s(n,r),s===n)||o===void 0&&s==null||(s=D(s),o===void 0||v(n)&&v(s)&&!Array.isArray(s)?V(n,s):I(e,o,s))}function N(...[e,t]){const r=D(e||{}),o=Array.isArray(r),n=x(r);function s(...a){_(()=>{o&&a.length===1?re(r,a[0]):S(r,a)})}return[n,s]}const be=(e=!1)=>(window.gHub.propertyCaptions??"homes,home").split(",")[e?1:0],P=window.gHub.areaId,k=window.gHub.agentId,[g,oe]=N({period:parseInt(window?.gHub?.areaPeriod??(document.getElementsByClassName("genie-embed").length?parseInt(document.getElementsByClassName("genie-embed")[0].getAttribute("data-genie-areaperiod")):12),10),propertyType:parseInt(window?.gHub?.propertyType??0,10)}),[we,E]=N({loading:!0,listings:[],get active(){return[this.listings.reduce(b([1],0),0),this.listings.reduce(b([1],1),0)]},get sold(){return[this.listings.reduce(b([2],0),0),this.listings.reduce(b([2],1),0)]},get pending(){return[this.listings.reduce(b([3,4],0),0),this.listings.reduce(b([3,4],1),0)]}}),[Se,M]=N({loading:!0,propertyTypeID:g.propertyType,stats:{},get propertyStats(){return this.stats.propertyTypeData&&this.stats.propertyTypeData[g.propertyType].statistics},get bedroomStats(){return this.propertyStats&&this.propertyStats.bedroomStats},get topSize(){return typeof this.bedroomStats<"u"?this.bedroomStats.reduce((e,t)=>e.sold>t.sold?e:t):{}},get percentChange(){return this.propertyStats&&this.propertyStats.avgSalePrice/this.propertyStats.previousPeriod.avgSalePrice-1},get totalSold(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.sold+this.stats.propertyTypeData[1].statistics.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.sold},get totalSoldLastPeriod(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.previousPeriod.sold+this.stats.propertyTypeData[1].statistics.previousPeriod.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.previousPeriod.sold},get soldDelta(){return this.totalSold/this.totalSoldLastPeriod-1},areaPeriod:g.period,areaId:P}),[De,se]=N({loading:!0,propertyTypeID:g.propertyType,stats:{}});Y(()=>{const[e,t]=A(g.period),[r]=C(e,async s=>{if(!isNaN(s))return await Q({areaId:P,agentId:k,areaPeriod:s})}),[o]=C(P,async s=>await J({areaId:s,agentId:k})),[n]=C(e,async s=>{if(!isNaN(s))return await Z(P,s,k)});return h(()=>{t(g.period),M({loading:!0,areaPeriod:g.period})}),h(()=>{M({propertyTypeID:g.propertyType})}),h(()=>{!r.loading&&typeof r()<"u"&&M({loading:!1,areaName:r().areaName,overall:r().stats.overall,stats:r().stats})}),h(()=>{!o.loading&&typeof o()<"u"&&se({loading:!1,areaName:o().areaName,stats:[...o().stats]})}),h(()=>{!n.loading&&typeof n()<"u"&&E({listings:n()})}),h(()=>{E({loading:n.loading})}),[r,o,n,s=>t(s)]});const b=(e,t)=>(r,{statusTypeID:o,propertyTypeID:n})=>e.indexOf(o)>-1&&n===t?r+=1:r;function j(e){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(e)}function R(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function q(e){R(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||j(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var ne=36e5;function ae(e,t){return R(2,arguments),q(e).getTime()-q(t).getTime()}var B={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},ie="trunc";function ce(e){return e?B[e]:B[ie]}function ue(e,t,r){R(2,arguments);var o=ae(e,t)/ne;return ce(r?.roundingMethod)(o)}const le=W(),Te=(e,t={month:"2-digit",day:"2-digit",year:"numeric"})=>new Intl.DateTimeFormat("en-US",t).format(e),Ce=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}).format(e),Pe=e=>new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2}).format(e),Ae=(e,t)=>getComputedStyle(t??document.body).getPropertyValue(e),ve=e=>`${e.streetNumber} ${e.streetName}`,Oe=()=>{},Ie=(e=10,t=1)=>{const[r,o]=A(e),[n,s]=A(t);return{pageSize:r,setPageSize:o,currentPage:n,setPage:s,pageOffset:()=>(n()-1)*r()}},de=e=>{const r={...typeof window.gHub<"u"?window.gHub:{},...e};z(()=>{r.areaPeriod&&oe({period:parseInt(r.areaPeriod)})});const o=s=>s.toLowerCase().replaceAll("_","");return Object.keys(r).forEach(s=>delete Object.assign(r,{[o(s)]:r[s]})[s]),new Proxy(r,{get(s,a){return s[o(a)]},set(s,a,u){return Reflect.set(s,o(a),u)}})},Ne=(e,t,r,o="active",n)=>{let s,a;const u=new Date;u.setMonth(u.getMonth()-r);const c=new Date;switch(o.toString().toLocaleLowerCase()){case"sold":a=(i,f)=>{const l=Date.parse(i.soldDate),d=Date.parse(f.soldDate);return l<d?1:l>d?-1:0},s=e.filter(i=>i.statusType.toLowerCase()==="sold"&&i.propertyTypeID===t&&i.soldDate!==null&&Date.parse(i.soldDate)>=u.getTime());break;case"new":s=e.filter(i=>i.statusType.toLowerCase()==="active"&&Math.floor(ue(Date.parse(i.listDate),c)/24)>-30&&i.propertyTypeID===t),a=(i,f)=>{const l=Date.parse(i.listDate),d=Date.parse(f.listDate);return l>d?-1:l<d?1:0};break;case"pending":a=(i,f)=>{const l=Date.parse(i.listDate),d=Date.parse(f.listDate);return l<d?1:l>d?-1:0},s=e.filter(i=>(i.statusType.toLowerCase()==="pending"||i.statusType.toLowerCase()==="contingent")&&i.propertyTypeID===t);break;case"active":default:a=(i,f)=>{const l=Date.parse(i.listDate),d=Date.parse(f.listDate);return l<d?1:l>d?-1:0},s=e.filter(i=>i.statusType.toLowerCase()===o.toLowerCase()&&i.propertyTypeID===t);break}return s.sort(a),s},ke=()=>{const{agentId:e}=de(le),[t]=C(e,K);return t},Me=e=>{if(document.getElementById(e))return!1;document.body.classList.add("hasPopup");const t=document.createElement("div");return t.id=e,t.classList.add("popup-dialog","visible"),document.body.appendChild(t),!0},Le=e=>{switch(e){case 1:return{delay:2e3,enabled:!1};case 2:return{ctaTitle:"Market Insider Offer",ctaSubTitle:"What's happening in YOUR market?",ctaBody:"Do you want your market insider report delivered monthly?",ctaTags:"MarketInsiderSubscribe, OptInContact, Cta1Accept",ctaDisplayTags:"Cta1Display",ctaDisplayNote:"Prompt for a market insider report was displayed",ctaVerifiedNote:"Contact information was confirmed after requesting a market insider subscription",ctaVerifyTags:"CtaContactVerfied",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/1595044b-819f-45b5-892f-0a55704e3c00/public",ctaNote:"I would like to subscribe to your monthly market update",ctaNoteIncludeArea:!0,ctaDisclaimer:["By continuing, you consent to receive communications from us, including but not limited to updates, promotional offers, and other marketing materials. We value your privacy and will use your information solely for the purpose of contacting you as per your request or interest. You can opt out of these communications at any time by following the unsubscribe instructions provided in our emails or by contacting us directly. Your information will not be shared with third parties without your explicit consent."],ctaResponse:"All set, we submitted your request!",ctaSubmitButtonText:"Yes!",ctaShowContactForm:!0,ctaContactFormBody:"Please verify or update your contact information to ensure we have the correct details for future communications",ctaContactFormResponse:"Thanks for verifying, you are all set!",ctaVerifyButtonText:"Update",ctaContactMeMessage:"If you need any additonal information please reach out.",delay:2e3,enabled:!0};case 3:return{ctaTitle:"Market Insider Subscription",ctaSubTitle:"Stay on top of the latest TRENDS",ctaBody:"Get your market insider report delivered monthly.",ctaTags:"MarketInsiderSubscribe, OptInContact, CtaAccept",ctaDisplayTags:"CtaDisplay",ctaDisplayNote:"Prompt for a market insider report was displayed",ctaVerifiedNote:"Contact information was confirmed after requesting a market insider subscription",ctaVerifyTags:"CtaContactVerfied",ctaImage:"https://imagedelivery.net/C4KZEiOQLExN0SnSaqUP4A/1595044b-819f-45b5-892f-0a55704e3c00/public",ctaNote:"I would like to subscribe to your monthly market update",ctaNoteIncludeArea:!0,ctaDisclaimer:["By continuing, you consent to receive communications from us, including but not limited to updates, promotional offers, and other marketing materials. We value your privacy and will use your information solely for the purpose of contacting you as per your request or interest. You can opt out of these communications at any time by following the unsubscribe instructions provided in our emails or by contacting us directly. Your information will not be shared with third parties without your explicit consent."],ctaResponse:"All set, we submitted your request!",ctaSubmitButtonText:"Yes!",ctaShowContactForm:!0,ctaContactFormBody:"Please verify or update your contact information to ensure we have the correct details for future communications",ctaContactFormResponse:"Thanks for verifying, you are all set!",ctaVerifyButtonText:"Update",ctaContactMeMessage:"If you need any additonal information please reach out.",delay:2e3,enabled:!0};default:return{enabled:!1}}},$e=e=>{if(!e.noteFormatter){e.note=e.note||"Form Submission";return}switch(e.noteFormatter.toLowerCase()){case"RequestShowing".toLowerCase():let r=`Showing request for ${e.formListingAddress}`;const o=e["meta[availableDate]"],n=e["meta[alternativeDate]"];if(o||n){const c=[];o&&c.push(o),n&&c.push(n),r+=` availability: ${c.join(", ")}`,delete e["meta[availableDate]"],delete e["meta[alternativeDate]"]}e.note?e.note=`${r}.  Message: ${e.note}`:e.note=r;break;case"RequestMoreInfoMoving".toLowerCase():const s=e["meta[movingDate]"]||"not moving",a=e["meta[reachMe]"],u=`More information requested for ${e.formListingAddress} 
Moving Date: ${s} 
Best way to reach: ${a} 
Message: ${e.note||"please follow up"} `;e.note=u,delete e["meta[movingDate]"],delete e["meta[reachMe]"];break;case"RequestCustomValuation".toLowerCase():e.note=`Custom valuation request for ${e.notePropertyAddress}.

Additional property details: ${e.note||"none provided"} `;break}};class je{constructor(t){this.params=new URLSearchParams(t),this.map=new Map;for(const[r,o]of this.params.entries())this.map.set(r.toLowerCase(),o)}get(t){return this.map.get(t.toLowerCase())}getObjectLower(){return Object.fromEntries(this.map)}}export{Oe as A,le as C,je as I,j as _,de as a,ge as b,Ce as c,Te as d,ye as e,Me as f,$e as g,Le as h,Ie as i,g as j,Se as k,me as l,we as m,D as n,Ne as o,Pe as p,De as q,Ae as r,he as s,ve as t,ke as u,be as v,R as w,q as x,pe as y,oe as z};
//# sourceMappingURL=index2.js.map
