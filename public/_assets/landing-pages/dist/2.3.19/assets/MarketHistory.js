import{h as E,g as P,c,a as H,b as h,i as b,e as j,n as u,S as I,t as v,d as q}from"./index.js";import{t as M,n as d}from"./index2.js";import{f as S,H as F}from"./_LeadCtaTag.js";import{E as L}from"./Editable.js";let C;const D=a=>{const[r]=E(T);return P(()=>P(()=>!r.loading)()&&C.draw("90%","70%",a.data,a.element))},T=()=>new Promise(a=>{if(document.getElementById("genie-charts"))a(!0);else{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css",document.head.appendChild(r);var l=document.createElement("script");l.src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js",l.id="chartist-script",l.onload=()=>{var o=document.createElement("script");o.src=`${window.gHub.siteUrl}_assets/_js/charts.js`,o.id="genie-charts",o.onload=()=>{C=window.genieChart.initCharts(),a(!0)},document.head.appendChild(o)},document.head.appendChild(l)}});var R=v("<h1>A History of the<br>&#160;Market"),N=v("<div class=curved-tabs><span>Price per sq/ft</span><span>Price history</span><span>Sales history"),V=v("<div class=market-history-chart>");const m=document.createElement("link");m.rel="stylesheet";m.type="text/css";m.href="https://cdn.rawgit.com/tiaanduplessis/wenk/master/dist/wenk.css";document.head.appendChild(m);const X=()=>{const[a,r]=c("averagePricePerSqFt"),[l,o]=c(),[k,$]=c(),[x,g]=c(),[_,p]=c();return H(()=>{if(M.loading==!1){const t=M.stats.filter(e=>e.propertyTypeId===d.propertyTypeID);$(t.slice(Math.max(t.length-d.areaPeriod,1)).map(e=>S(new Date(e.yearPart,e.monthPart-1,1),"MMM yy")));const s=t.slice(Math.max(t.length-d.areaPeriod,1)).map(e=>({name:S(new Date(e.yearPart,e.monthPart-1,1),"MMM yy"),value:e[a()]}));o(s);const n=Math.min.apply(9999999999999,s.map(e=>e.value)),i=Math.max.apply(0,s.map(e=>e.value));switch(a){case"averagePricePerSqFt":p(Math.round(n/1.4/25e4)*25e4),g(Math.ceil(i*1.3/25e4)*25e4);break;case"averageSalePrice":p(Math.round(n/1.4/250)*250),g(Math.ceil(i*1.3/250)*250);break;default:p(n/1.4),g(i*1.3);break}}}),[h(L,{style:"text-align:center",id:"market-history-title",get children(){var t=R(),s=t.firstChild,n=s.nextSibling,i=n.nextSibling;return b(t,()=>d.areaName,i),t}}),h(F,{container:"MarketHistory-"}),(()=>{var t=N(),s=t.firstChild,n=s.nextSibling,i=n.nextSibling;return s.$$click=()=>r("averagePricePerSqFt"),n.$$click=()=>r("averageSalePrice"),i.$$click=()=>r("soldCount"),j(e=>{var y=a()==="averagePricePerSqFt"?"active":"",f=a()==="averageSalePrice"?"active":"",w=a()==="soldCount"?"active":"";return y!==e.e&&u(s,e.e=y),f!==e.t&&u(n,e.t=f),w!==e.a&&u(i,e.a=w),e},{e:void 0,t:void 0,a:void 0}),t})(),(()=>{var t=V();return b(t,h(I,{get when(){return l()},get children(){return h(D,{element:".market-history-chart",margin:{top:15,right:15,bottom:15,left:15},width:900,height:300,get data(){return{data:{labels:k(),series:[l()]},options:{width:"100%",height:"100%",axisX:{scaleLabel:"Month",onlyInteger:!1},axisY:{high:x(),low:_(),offset:60,onlyInteger:!0,labelInterpolationFnc:a()==="soldCount"?window.genieChart.number:window.genieChart.dollarRound,scaleLabel:a()==="soldCount"?"Total Sold":"Price"}}}}})}})),t})()]};q(["click"]);export{X as default};
//# sourceMappingURL=MarketHistory.js.map
