import{g as E,i as e,b as n,e as B,s as S,F as W,t as v,y as j,c as M,a as N,S as V,f as O,d as Y}from"./index.js";import{H as Z,b as q,P as K}from"./_LeadCtaTag.js";import{c as Q,w as J,a as X,C as ee,k as te,r as ie,n as u,o as ne,v as ae}from"./index2.js";import{G as le,C as se,L as re}from"./LeafletMap.js";import{L as oe}from"./ListingsShowing.js";const ce=v('<div id="listing-grid-view">'),de=v('<svg viewBox="0 0 100 50"><image width="100%" height="100%" preserveAspectRatio="xMinYMid slice"></image><circle cx="5" cy="5" r="3.5" fill-opacity="0.6"></circle><text font-size="5" x="5" y="5" text-anchor="middle" dominant-baseline="middle" fill="#fff"></text><polygon points="275,0 424,0 0,425 0,275" fill-opacity="0.6"></polygon><clipPath id="polyClip1" clipPathUnits="objectBoundingBox"><path d="m 0 0 h 1 v 1 h -0.7 c -0.3 0 -0.3 0 -0.3 -1"></path></clipPath><rect x="50%" width="50%" height="30%" clip-path="url(#polyClip1)" fill-opacity="0.6"></rect><text text-anchor="end" font-size="5" x="95" y="2" dominant-baseline="hanging" fill="#fff"></text><text text-anchor="end" font-size="7" x="95" y="8" dominant-baseline="hanging" fill="#fff"></text><g transform="translate(0,38)"><rect height="12" width="100" fill-opacity="0.6"></rect><text x="50" y="4" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="5"></text><text x="50" y="10" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="4"><tspan></tspan><tspan>BR | </tspan><tspan></tspan><tspan>BA | </tspan><tspan font-size="3"> SQFT'),T={active:"--active-green",new:"--new-blue",pending:"--pending-yellow",sold:"--sold-red"},U="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=",ge=({listings:a,mode:l})=>{const y=E(()=>`var(${T[l().toLowerCase()]})`);return(()=>{const w=ce();return e(w,n(W,{get each(){return a()},children:(s,z)=>(()=>{const _=de(),d=_.firstChild,f=d.nextSibling,C=f.nextSibling,g=C.nextSibling,x=g.nextSibling,p=x.nextSibling,$=p.nextSibling,o=$.nextSibling,h=o.nextSibling,b=h.firstChild,i=b.nextSibling,r=i.nextSibling,L=r.firstChild,A=L.nextSibling,k=A.nextSibling,H=k.nextSibling,P=H.nextSibling;return d.addEventListener("error",t=>{t.target.getAttribute("href")!==U&&t.target.setAttribute("href",U)}),e(C,()=>z()+1),e($,l=="Sold"?"Sold at":"Asking"),e(o,()=>Q(s.priceHigh)),e(i,()=>J(s)),e(L,()=>s.bedrooms),e(k,()=>s.bathroomsTotal),e(r,()=>Intl.NumberFormat("en-US").format(s.sqft),P),B(t=>{const c=`${s.mlsNumber}:${s.latitude}:${s.longitude}`,m=s.photoPrimaryUrl,G=y(),I=y(),R=y(),D=`var(${T[l]})`;return c!==t._v$&&S(_,"key",t._v$=c),m!==t._v$2&&S(d,"href",t._v$2=m),G!==t._v$3&&S(f,"fill",t._v$3=G),I!==t._v$4&&S(g,"fill",t._v$4=I),R!==t._v$5&&S(p,"fill",t._v$5=R),D!==t._v$6&&S(b,"fill",t._v$6=D),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),_})()})),w})()},he=v('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="var(--theme-heading-color)" d="M96 288H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM96 96H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z">'),ve=(a={})=>(()=>{const l=he();return j(l,a,!0,!0),l})(),pe=v('<svg viewBox="0 0 512 512"><path fill="var(--theme-heading-color)" d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z">'),me=(a={})=>(()=>{const l=pe();return j(l,a,!0,!0),l})();const ue=v('<h4 class="center upper subheading-market-activity" style="margin-bottom:5px"> '),fe=v('<h1 class="center upper heading-market-activity" style="margin:0">Market Activity'),xe=v("<div>"),$e=v('<div style="display:flex;flex-direction:row;justify-content:space-between;margin:1vh 0;font-size:85%;align-items:center;width:100%"><span>View Option</span><span>Status</span><select style="padding:0.25rem 0.5rem"></select><span>Sort By</span><select style="padding:0.25rem 0.5rem"></select><span>'),F=v('<option style="text-transform:capitalize">'),ye=v('<div class="map-key" style="position:absolute;z-index:700;top:65px"><svg style="width:380px;height:270px"><rect width="100%" height="15%" fill="var(--theme-body-background)"></rect><rect width="100%" height="80%" fill="#000" fill-opacity="0.57" y="15%"></rect><text x="20" y="27" style="font-size:150%" fill="var(--theme-body-color)"></text><g style="transform:translate(20px, 70px)">'),_e=v('<svg><g><circle cx="20" cy="5" r="17"></circle><text x="20" y="5" fill="var(--white)" text-Anchor="middle" dominant-Baseline="middle" style="font-size:100%;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></text><text x="50" y="7" fill="var(--white)" dominant-Baseline="middle" style="font-size:100%;font-weight:700;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></svg>',!1,!0),ke=()=>{const a=X(ee),[l,y]=M("Most Recent"),[w,s]=M("List"),[z,_]=M([]),[d,f]=M([]),[C]=M(!1),{currentPage:g,setPage:x,pageOffset:p,pageSize:$,setPageSize:o}=te(8),[h,b]=M(a.mode?a.mode.charAt(0).toUpperCase()+a.mode.slice(1):"New");return N(()=>h()&&x(1)),N(()=>_(ie(ne.listings,u.propertyTypeID,u.areaPeriod,h(),l()))),N(()=>f(z().slice(p(),p()+$()))),[(()=>{const i=ue(),r=i.firstChild;return e(i,()=>u.areaName,r),e(i,()=>u.propertyTypeID===0?"Homes":"Condos",null),i})(),fe(),n(Z,{get container(){return`MarketActivity-${a.areaid}`},style:""}),(()=>{const i=xe();return e(i,n(be,{setStatus:b}),null),e(i,n(re,{get mapStyle(){return a.mapstyle||"satellite-streets-v11"},zoomControl:!0,style:"width:100%;height:100%;",get children(){return[n(le,{get areaId(){return a.areaid},style:"color:#feff00;fill-opacity:0"}),n(V,{get when(){return d().length},get children(){return d().map((r,L)=>n(se,{get color(){return ae(`--${h().toLowerCase()}`,document.getElementsByClassName("genie-wrap marketactivity")[0]).trim()},caption:L+1,key:L+p*$,get position(){return[r.latitude,r.longitude]}}))}})]}}),null),B(r=>O(i,`position:relative;width:100%;height:${C?"650px":"400px"}`,r)),i})(),E((()=>{const i=E(()=>d().length>0);return()=>i()&&(()=>{const r=$e(),L=r.firstChild,A=L.nextSibling,k=A.nextSibling,H=k.nextSibling,P=H.nextSibling,t=P.nextSibling;return e(r,n(me,{style:"width:20px;height:auto",onClick:()=>{o(10),s("List")}}),A),e(r,n(ve,{style:"width:20px;height:auto",onClick:()=>{o(8),s("Grid")}}),A),k.addEventListener("change",c=>{x(1),b(c.target.value)}),e(k,()=>["Pending","New","Active","Sold"].map(c=>(()=>{const m=F();return m.value=c,e(m,c),m})())),P.addEventListener("change",c=>{x(1),y(c.target.value)}),e(P,()=>["Most Recent","Price High","Price Low","Days on Market"].map(c=>(()=>{const m=F();return m.value=c,e(m,c),m})())),e(t,n(oe,{pageSize:$,currentPage:g,pageOffset:p,data:z,mode:h,get period(){return u.areaPeriod}})),B(()=>k.value=h()),B(()=>P.value=l()),r})()})()),n(V,{get when(){return w()==="List"},get children(){return n(q,{mode:h,listings:d,style:"width: 100%; color: var(--theme-body-color)"})}}),n(V,{get when(){return w()==="Grid"},get children(){return n(ge,{mode:h,listings:d,style:"width: 100%; color: var(--theme-body-color)"})}}),n(K,{data:z,currentPage:g,pageSize:$,pageChange:i=>x(i),style:"align-self: flex-end"})]},be=({setStatus:a})=>{const l=[{total:u?.overall?.new,label:"New (active)",status:"new"},{total:u?.overall?.active,label:"Active",status:"active"},{total:u?.overall?.pending,label:"Pending",status:"pending"},{total:u.overall?.sold,label:"Sold",status:"sold"}];return(()=>{const y=ye(),w=y.firstChild,s=w.firstChild,z=s.nextSibling,_=z.nextSibling,d=_.nextSibling;return e(_,()=>u.areaName),e(d,()=>l.map((f,C)=>(()=>{const g=_e(),x=g.firstChild,p=x.nextSibling,$=p.nextSibling;return g.$$click=o=>a(f.status),S(g,"key",C),e(p,()=>f.total),e($,()=>f.label),B(o=>{const h=`transform: translateY(${C*50}px)`,b=`var(--${f.status})`;return o._v$=O(g,h,o._v$),b!==o._v$2&&S(x,"fill",o._v$2=b),o},{_v$:void 0,_v$2:void 0}),g})())),y})()};Y(["click"]);export{ke as default};
//# sourceMappingURL=MarketActivity.js.map
