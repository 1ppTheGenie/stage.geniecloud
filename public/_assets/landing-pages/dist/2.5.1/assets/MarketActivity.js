import{g as D,i as e,b as n,e as B,s as w,F as W,t as p,y as j,c as M,a as N,S as V,f as O,d as Y}from"./index.js";import{H as Z,b as q,P as K}from"./_LeadCtaTag.js";import{c as Q,w as J,a as X,C as ee,k as te,r as ie,n as o,o as ne,v as ae}from"./index2.js";import{G as le,C as re,L as se}from"./LeafletMap.js";import{L as oe}from"./ListingsShowing.js";const ce=p('<div id="listing-grid-view">'),de=p('<svg viewBox="0 0 100 50"><image width="100%" height="100%" preserveAspectRatio="xMinYMid slice"></image><circle cx="5" cy="5" r="3.5" fill-opacity="0.6"></circle><text font-size="5" x="5" y="5" text-anchor="middle" dominant-baseline="middle" fill="#fff"></text><polygon points="275,0 424,0 0,425 0,275" fill-opacity="0.6"></polygon><clipPath id="polyClip1" clipPathUnits="objectBoundingBox"><path d="m 0 0 h 1 v 1 h -0.7 c -0.3 0 -0.3 0 -0.3 -1"></path></clipPath><rect x="50%" width="50%" height="30%" clip-path="url(#polyClip1)" fill-opacity="0.6"></rect><text text-anchor="end" font-size="5" x="95" y="2" dominant-baseline="hanging" fill="#fff"></text><text text-anchor="end" font-size="7" x="95" y="8" dominant-baseline="hanging" fill="#fff"></text><g transform="translate(0,38)"><rect height="12" width="100" fill-opacity="0.6"></rect><text x="50" y="4" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="5"></text><text x="50" y="10" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="4"><tspan></tspan><tspan>BR | </tspan><tspan></tspan><tspan>BA | </tspan><tspan font-size="3"> SQFT'),T={active:"--active-green",new:"--new-blue",pending:"--pending-yellow",sold:"--sold-red"},U="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=",ge=({listings:a,mode:l})=>{const y=D(()=>`var(${T[l().toLowerCase()]})`);return(()=>{const z=ce();return e(z,n(W,{get each(){return a()},children:(r,C)=>(()=>{const _=de(),g=_.firstChild,m=g.nextSibling,b=m.nextSibling,v=b.nextSibling,x=v.nextSibling,u=x.nextSibling,$=u.nextSibling,c=$.nextSibling,h=c.nextSibling,S=h.firstChild,i=S.nextSibling,s=i.nextSibling,L=s.firstChild,A=L.nextSibling,k=A.nextSibling,H=k.nextSibling,P=H.nextSibling;return g.addEventListener("error",t=>{t.target.getAttribute("href")!==U&&t.target.setAttribute("href",U)}),e(b,()=>C()+1),e($,l=="Sold"?"Sold at":"Asking"),e(c,()=>Q(r.priceHigh)),e(i,()=>J(r)),e(L,()=>r.bedrooms),e(k,()=>r.bathroomsTotal),e(s,()=>Intl.NumberFormat("en-US").format(r.sqft),P),B(t=>{const d=`${r.mlsNumber}:${r.latitude}:${r.longitude}`,f=r.photoPrimaryUrl,E=y(),G=y(),I=y(),R=`var(${T[l]})`;return d!==t._v$&&w(_,"key",t._v$=d),f!==t._v$2&&w(g,"href",t._v$2=f),E!==t._v$3&&w(m,"fill",t._v$3=E),G!==t._v$4&&w(v,"fill",t._v$4=G),I!==t._v$5&&w(u,"fill",t._v$5=I),R!==t._v$6&&w(S,"fill",t._v$6=R),t},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),_})()})),z})()},ve=p('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="var(--theme-heading-color)" d="M96 288H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM96 96H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z">'),he=(a={})=>(()=>{const l=ve();return j(l,a,!0,!0),l})(),pe=p('<svg viewBox="0 0 512 512"><path fill="var(--theme-heading-color)" d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z">'),me=(a={})=>(()=>{const l=pe();return j(l,a,!0,!0),l})();const ue=p('<h4 class="center upper subheading-market-activity" style="margin-bottom:5px"> '),fe=p('<h1 class="center upper heading-market-activity" style="margin:0">Market Activity'),xe=p("<div>"),$e=p('<div style="display:flex;flex-direction:row;justify-content:space-between;margin:1vh 0;font-size:85%;align-items:center;width:100%"><span>View Option</span><span>Status</span><select style="padding:0.25rem 0.5rem"></select><span>Sort By</span><select style="padding:0.25rem 0.5rem"></select><span>'),F=p('<option style="text-transform:capitalize">'),ye=p('<div class="map-key" style="position:absolute;z-index:700;top:65px"><svg style="width:380px;height:270px"><rect width="100%" height="15%" fill="var(--theme-body-background)"></rect><rect width="100%" height="80%" fill="#000" fill-opacity="0.57" y="15%"></rect><text x="20" y="27" style="font-size:150%" fill="var(--theme-body-color)"></text><g style="transform:translate(20px, 70px)">'),_e=p('<svg><g><circle cx="20" cy="5" r="17"></circle><text x="20" y="5" fill="var(--white)" text-Anchor="middle" dominant-Baseline="middle" style="font-size:100%;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></text><text x="50" y="7" fill="var(--white)" dominant-Baseline="middle" style="font-size:100%;font-weight:700;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></svg>',!1,!0),ke=()=>{const a=X(ee),[l,y]=M("Most Recent"),[z,r]=M("List"),[C,_]=M([]),[g,m]=M([]),[b]=M(!1),{currentPage:v,setPage:x,pageOffset:u,pageSize:$,setPageSize:c}=te(8),[h,S]=M(a.mode?a.mode.charAt(0).toUpperCase()+a.mode.slice(1):"New");return N(()=>h()&&x(1)),N(()=>_(ie(ne.listings,o.propertyTypeID,o.areaPeriod,h(),l()))),N(()=>m(C().slice(u(),u()+$()))),[(()=>{const i=ue(),s=i.firstChild;return e(i,()=>o.areaName,s),e(i,()=>o.propertyTypeID===0?"Homes":"Condos",null),i})(),fe(),n(Z,{get container(){return`MarketActivity-${a.areaid}`},style:""}),(()=>{const i=xe();return e(i,n(be,{setStatus:S}),null),e(i,n(se,{get mapStyle(){return a.mapstyle||"satellite-streets-v11"},zoomControl:!0,style:"width:100%;height:100%;",get children(){return[n(le,{get areaId(){return a.areaid},style:"color:#feff00;fill-opacity:0"}),n(V,{get when(){return g().length},get children(){return g().map((s,L)=>n(re,{get color(){return ae(`--${h().toLowerCase()}`,document.getElementsByClassName("genie-wrap marketactivity")[0]).trim()},caption:L+1,key:L+u*$,get position(){return[s.latitude,s.longitude]}}))}})]}}),null),B(s=>O(i,`position:relative;width:100%;height:${b?"650px":"400px"}`,s)),i})(),D((()=>{const i=D(()=>g().length>0);return()=>i()&&(()=>{const s=$e(),L=s.firstChild,A=L.nextSibling,k=A.nextSibling,H=k.nextSibling,P=H.nextSibling,t=P.nextSibling;return e(s,n(me,{style:"width:20px;height:auto",onClick:()=>{c(10),r("List")}}),A),e(s,n(he,{style:"width:20px;height:auto",onClick:()=>{c(8),r("Grid")}}),A),k.addEventListener("change",d=>{x(1),S(d.target.value)}),e(k,()=>["Pending","New","Active","Sold"].map(d=>(()=>{const f=F();return f.value=d,e(f,d),f})())),P.addEventListener("change",d=>{x(1),y(d.target.value)}),e(P,()=>["Most Recent","Price High","Price Low","Days on Market"].map(d=>(()=>{const f=F();return f.value=d,e(f,d),f})())),e(t,n(oe,{pageSize:$,currentPage:v,pageOffset:u,data:C,mode:h,get period(){return o.areaPeriod}})),B(()=>k.value=h()),B(()=>P.value=l()),s})()})()),n(V,{get when(){return z()==="List"},get children(){return n(q,{mode:h,listings:g,style:"width: 100%; color: var(--theme-body-color)"})}}),n(V,{get when(){return z()==="Grid"},get children(){return n(ge,{mode:h,listings:g,style:"width: 100%; color: var(--theme-body-color)"})}}),n(K,{data:C,currentPage:v,pageSize:$,pageChange:i=>x(i),style:"align-self: flex-end"})]},be=({setStatus:a})=>{console.log("areaDataStore.overall:",o?.overall?.new,o?.overall?.active,o?.overall?.pending);const l=[{total:o?.overall?.new,label:"New (active)",status:"new"},{total:o?.overall?.active,label:"Active",status:"active"},{total:o?.overall?.pending,label:"Pending",status:"pending"},{total:o.overall?.sold,label:"Sold",status:"sold"}];return(()=>{const y=ye(),z=y.firstChild,r=z.firstChild,C=r.nextSibling,_=C.nextSibling,g=_.nextSibling;return e(_,()=>o.areaName),e(g,()=>l.map((m,b)=>(console.log(`Label ${b}:`,m.total),(()=>{const v=_e(),x=v.firstChild,u=x.nextSibling,$=u.nextSibling;return v.$$click=c=>a(m.status),w(v,"key",b),e(u,()=>m.total),e($,()=>m.label),B(c=>{const h=`transform: translateY(${b*50}px)`,S=`var(--${m.status})`;return c._v$=O(v,h,c._v$),S!==c._v$2&&w(x,"fill",c._v$2=S),c},{_v$:void 0,_v$2:void 0}),v})()))),y})()};Y(["click"]);export{ke as default};
//# sourceMappingURL=MarketActivity.js.map
