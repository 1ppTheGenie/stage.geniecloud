{"version":3,"file":"ListingMapStyleTwo.js","sources":["../../../../../../genie-components/src/embeds/ListingMapStyleTwo.jsx"],"sourcesContent":["import { format } from \"date-fns\";\r\n/* prettier-ignore */\r\nimport { HomeTypes, LeafletMap,GeoArea,\tListingsTable, ListingsShowing, Pagination,CircleMarker } from \"@/components\";\r\nimport { usePagination, filterListings } from \"@/utilities\";\r\n\r\nexport default () => {\r\n\tconst { currentPage, setPage, pageOffset, pageSize } = usePagination();\r\n\r\n\tuseEffect(() => {\r\n\t\tsetPage(1);\r\n\t}, [period, setPage]);\r\n\r\n\tconst currentListings = filterListings(\r\n\t\tlistings,\r\n\t\tpropertyTypeID,\r\n\t\tperiod,\r\n\t\tsettings.mode\r\n\t);\r\n\tconst visibleListings = currentListings.slice(\r\n\t\tpageOffset,\r\n\t\tpageOffset + pageSize\r\n\t);\r\n\tconst color = window.gHub\r\n\t\t.getCssVar(`--${settings.mode.toLowerCase()}`, document.body)\r\n\t\t.trim();\r\n\r\n\tlet icon, subtitle;\r\n\tswitch (settings.mode.toLowerCase()) {\r\n\t\tcase \"active\":\r\n\t\t\ticon = \"home-speaker\";\r\n\t\t\tsubtitle = \"Active Listings\";\r\n\t\t\tbreak;\r\n\t\tcase \"pending\":\r\n\t\t\ticon = \"home-dot\";\r\n\t\t\tsubtitle = \"Pending Listings\";\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\ticon = \"home-speaker\";\r\n\t\t\tsubtitle = `${period} Month Sales`;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div style={{ display: \"flex\", width: \"100%\", marginBottom: 0 }}>\r\n\t\t\t\t<svg\r\n\t\t\t\t\tstyle={{ width: \"8vw\", height: \"8vw\", marginRight: \"2rem\" }}\r\n\t\t\t\t\tviewBox=\"0 0 200 200\">\r\n\t\t\t\t\t<rect\r\n\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\trx=\"15\"\r\n\t\t\t\t\t\tfillOpacity=\"100%\"\r\n\t\t\t\t\t\tfill={color}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M0 0 L0 140 L160 0 Z\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\"\r\n\t\t\t\t\t\tfillOpacity=\"0.1\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx=\"5%\"\r\n\t\t\t\t\t\ty=\"10%\"\r\n\t\t\t\t\t\tfont-size=\"165%\"\r\n\t\t\t\t\t\tfont-weight=\"bold\"\r\n\t\t\t\t\t\tdominantBaseline=\"hanging\"\r\n\t\t\t\t\t\tstyle=\"text-transform: uppercase\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\">\r\n\t\t\t\t\t\t{settings.mode}\r\n\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx=\"5%\"\r\n\t\t\t\t\t\ty=\"30%\"\r\n\t\t\t\t\t\tfont-weight=\"900\"\r\n\t\t\t\t\t\tfont-size=\"400%\"\r\n\t\t\t\t\t\tdominantBaseline=\"hanging\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\">\r\n\t\t\t\t\t\t{currentListings.length}\r\n\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t<image\r\n\t\t\t\t\t\tx=\"60%\"\r\n\t\t\t\t\t\ty=\"35%\"\r\n\t\t\t\t\t\twidth=\"35%\"\r\n\t\t\t\t\t\tpreserveAspectRatio=\"xMidYMid meet\"\r\n\t\t\t\t\t\thref={`/_assets/_img/icons/${icon}.svg`}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<rect\r\n\t\t\t\t\t\tid=\"rounded-rect\"\r\n\t\t\t\t\t\twidth=\"12%\"\r\n\t\t\t\t\t\theight=\"5%\"\r\n\t\t\t\t\t\tfill=\"var(--theme-heading-color)\"\r\n\t\t\t\t\t\tfillOpacity=\"0.1\"\r\n\t\t\t\t\t\ty=\"19%\"\r\n\t\t\t\t\t\tx=\"1%\"\r\n\t\t\t\t\t\trx=\"0.5%\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx=\"50%\"\r\n\t\t\t\t\t\ty=\"90%\"\r\n\t\t\t\t\t\tfill=\"var(--theme-body-background)\"\r\n\t\t\t\t\t\tfont-size=\"180%\"\r\n\t\t\t\t\t\tfont-weight=\"bold\"\r\n\t\t\t\t\t\ttextAnchor=\"middle\">\r\n\t\t\t\t\t\t{format(new Date(), \"MMM yyyy\")}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h2\r\n\t\t\t\t\t\tclass=\"upper\"\r\n\t\t\t\t\t\tstyle={`margin-bottom: 0.5rem; font-size: 220%; font-weight: 99; align-self: self-start; color: ${color}`}>\r\n\t\t\t\t\t\t{areaName}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<h4\r\n\t\t\t\t\t\tclass=\"upper\"\r\n\t\t\t\t\t\tstyle={`margin: 0.5rem 0; font-weight: 300; align-self: self-start; color: ${color}`}>\r\n\t\t\t\t\t\tMarket Report\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\ttextAlign: \"right\",\r\n\t\t\t\t\t\tflexGrow: 1,\r\n\t\t\t\t\t\tcolor: color,\r\n\t\t\t\t\t\talignSelf: \"flex-end\",\r\n\t\t\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<h3 style=\"font-size: 175%\">{subtitle}</h3>\r\n\t\t\t\t\t<h4 style=\"font-weight: 300; font-size: 100%; color: var(--theme-body-color)\">\r\n\t\t\t\t\t\t{format(new Date(), \"EEEE, MMMM d, yyyy\")}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<HomeTypes\r\n\t\t\t\tcontainer={`MarketActivity-${settings.areaid}`}\r\n\t\t\t\tstyle=\"margin: 0.5rem\"\r\n\t\t\t\tshowPeriod={settings.mode.toLowerCase() === \"sold\"}\r\n\t\t\t/>\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\twidth: `100%`,\r\n\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\tgridTemplateColumns: \"300px 1fr\",\r\n\t\t\t\t\tborderRadius: \"15px\",\r\n\t\t\t\t\tborder: \"2px solid\",\r\n\t\t\t\t\tborderColor: color,\r\n\t\t\t\t\tmarginBottom: \"0.25rem\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<LeafletMap\r\n\t\t\t\t\tmapStyle={settings.mapstyle || \"satellite-streets-v11\"}\r\n\t\t\t\t\tzoomControl={true}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: `100%`,\r\n\t\t\t\t\t\theight: `100%`,\r\n\t\t\t\t\t\tborderRadius: \"15px\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<GeoArea\r\n\t\t\t\t\t\tareaId={settings.areaid}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: \"#feff00\",\r\n\t\t\t\t\t\t\tfillOpacity: 0,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{visibleListings &&\r\n\t\t\t\t\t\tvisibleListings.map((l, i) => (\r\n\t\t\t\t\t\t\t<CircleMarker\r\n\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\tcaption={pageOffset * pageSize + i + 1}\r\n\t\t\t\t\t\t\t\tkey={i + pageOffset * pageSize}\r\n\t\t\t\t\t\t\t\tposition={[l.latitude, l.longitude]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</LeafletMap>\r\n\t\t\t\t<ListingsTable\r\n\t\t\t\t\tmode={() => settings.mode}\r\n\t\t\t\t\tlistings={visibleListings}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\tcolor: \"var(--theme-body-color)\",\r\n\t\t\t\t\t\tborderRadius: \"15px\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t}}>\r\n\t\t\t\t<div style=\"font-size:80%\">\r\n\t\t\t\t\t<ListingsShowing\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\tpageOffset={pageOffset}\r\n\t\t\t\t\t\tdata={currentListings}\r\n\t\t\t\t\t\tmode={() => settings.mode}\r\n\t\t\t\t\t\tperiod={period}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Pagination\r\n\t\t\t\t\tdata={() => currentListings.length}\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\tpageChange={page => setPage(page)}\r\n\t\t\t\t\tstyle=\"align-self:flex-end; margin: 0.25rem 0\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n"],"names":["ListingMapStyleTwo","currentPage","setPage","pageOffset","pageSize","usePagination","useEffect","period","currentListings","filterListings","listings","propertyTypeID","settings","mode","visibleListings","slice","color","window","gHub","getCssVar","toLowerCase","document","body","trim","icon","subtitle","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_el$7","_el$8","_el$9","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","style","setProperty","_$setAttribute","_$insert","length","format","Date","areaName","removeProperty","_$effect","_p$","_v$","_v$2","_$style","undefined","_$createComponent","HomeTypes","container","areaid","showPeriod","_el$16","_tmpl$2","LeafletMap","mapStyle","mapstyle","zoomControl","width","height","borderRadius","children","GeoArea","areaId","fillOpacity","_$memo","map","l","i","CircleMarker","caption","key","position","latitude","longitude","ListingsTable","_el$17","_tmpl$3","_el$18","ListingsShowing","data","Pagination","pageChange","page"],"mappings":"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"}