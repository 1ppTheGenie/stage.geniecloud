import{$ as h,p as H,q as L,v as B,c as O,w as G,j as P,a as b,o as K,x as V}from"./index.js";const W="genie-embed/v2/",J=async e=>(await f("get-agent-data",{agent_id:e})).result.agent,X=async e=>{const t=await f("get-area-data",e);return{stats:t.result.statistics,areaName:t.result.areaName}},Y=async(e,t,s)=>(t=!isNaN(t)&&parseInt(t)>0?t:12,(await f("get-area-properties",{areaId:e,areaPeriod:t,agentId:s})).result),Q=async e=>{const t=await f("get-area-monthly",e,"POST");return{stats:t.result.statistics,areaName:t.result.areaName}},pe=async e=>{const t=await f("get-area-polygon",{areaId:e});return t.success?t.result.polygon:{}},ge=async e=>await f("add-lead",e,"POST"),ye=async e=>await f("update-lead",e,"POST"),he=async e=>await f("get-landing-data",e),be=async e=>{if(e){const t=await f("address-search",{place_id:e});if(t.success===!0&&t.result.properties&&t.result.properties.length>0)return t.result.properties[0]}};async function f(e,t=null,s="GET"){let r=`${window.gHub.apiUrl}${W}${e}`;const a=new Headers;a.append("Content-Type","application/json"),a.append("Accept","application/json");const n={method:s,mode:"cors",cache:"no-cache",headers:a,referrerPolicy:"no-referrer"};return s==="POST"?n.body=t&&JSON.stringify(t):t&&(r+=`?${new URLSearchParams(Object.entries(t)).toString()}`),(await fetch(r,n)).json()}const k=Symbol("store-raw"),S=Symbol("store-node"),d=Symbol("store-has"),U=Symbol("store-self");function z(e){let t=e[h];if(!t&&(Object.defineProperty(e,h,{value:t=new Proxy(e,te)}),!Array.isArray(e))){const s=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let a=0,n=s.length;a<n;a++){const o=s[a];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function N(e){let t;return e!=null&&typeof e=="object"&&(e[h]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function m(e,t=new Set){let s,r,a,n;if(s=e!=null&&e[k])return s;if(!N(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,i=e.length;o<i;o++)a=e[o],(r=m(a,t))!==a&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let c=0,l=o.length;c<l;c++)n=o[c],!i[n].get&&(a=e[n],(r=m(a,t))!==a&&(e[n]=r))}return e}function I(e,t){let s=e[t];return s||Object.defineProperty(e,t,{value:s=Object.create(null)}),s}function T(e,t,s){if(e[t])return e[t];const[r,a]=O(s,{equals:!1,internal:!0});return r.$=a,e[t]=r}function Z(e,t){const s=Reflect.getOwnPropertyDescriptor(e,t);return!s||s.get||!s.configurable||t===h||t===S||(delete s.value,delete s.writable,s.get=()=>e[h][t]),s}function x(e){L()&&T(I(e,S),U)()}function ee(e){return x(e),Reflect.ownKeys(e)}const te={get(e,t,s){if(t===k)return e;if(t===h)return s;if(t===H)return x(e),s;const r=I(e,S),a=r[t];let n=a?a():e[t];if(t===S||t===d||t==="__proto__")return n;if(!a){const o=Object.getOwnPropertyDescriptor(e,t);L()&&(typeof n!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(n=T(r,t,n)())}return N(n)?z(n):n},has(e,t){return t===k||t===h||t===H||t===S||t===d||t==="__proto__"?!0:(L()&&T(I(e,d),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ee,getOwnPropertyDescriptor:Z};function j(e,t,s,r=!1){if(!r&&e[t]===s)return;const a=e[t],n=e.length;s===void 0?(delete e[t],e[d]&&e[d][t]&&a!==void 0&&e[d][t].$()):(e[t]=s,e[d]&&e[d][t]&&a===void 0&&e[d][t].$());let o=I(e,S),i;if((i=T(o,t,a))&&i.$(()=>s),Array.isArray(e)&&e.length!==n){for(let c=e.length;c<n;c++)(i=o[c])&&i.$();(i=T(o,"length",n))&&i.$(e.length)}(i=o[U])&&i.$()}function q(e,t){const s=Object.keys(t);for(let r=0;r<s.length;r+=1){const a=s[r];j(e,a,t[a])}}function se(e,t){if(typeof t=="function"&&(t=t(e)),t=m(t),Array.isArray(t)){if(e===t)return;let s=0,r=t.length;for(;s<r;s++){const a=t[s];e[s]!==a&&j(e,s,a)}j(e,"length",r)}else q(e,t)}function D(e,t,s=[]){let r,a=e;if(t.length>1){r=t.shift();const o=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)D(e,[r[c]].concat(t),s);return}else if(i&&o==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&D(e,[c].concat(t),s);return}else if(i&&o==="object"){const{from:c=0,to:l=e.length-1,by:y=1}=r;for(let u=c;u<=l;u+=y)D(e,[u].concat(t),s);return}else if(t.length>1){D(e[r],t,[r].concat(s));return}a=e[r],s=[r].concat(s)}let n=t[0];typeof n=="function"&&(n=n(a,s),n===a)||r===void 0&&n==null||(n=m(n),r===void 0||N(a)&&N(n)&&!Array.isArray(n)?q(a,n):j(e,r,n))}function $(...[e,t]){const s=m(e||{}),r=Array.isArray(s),a=z(s);function n(...o){B(()=>{r&&o.length===1?se(s,o[0]):D(s,o)})}return[a,n]}const we=(e=!1)=>(window.gHub.propertyCaptions??"homes,home").split(",")[e?1:0],A=window.gHub.areaId,C=window.gHub.agentId,[g,re]=$({period:parseInt(window?.gHub?.areaPeriod??(document.getElementsByClassName("genie-embed").length?parseInt(document.getElementsByClassName("genie-embed")[0].getAttribute("data-genie-areaperiod")):12),10),propertyType:parseInt(window?.gHub?.propertyType??0,10)}),[Se,R]=$({loading:!0,listings:[],get active(){return[this.listings.reduce(w([1],0),0),this.listings.reduce(w([1],1),0)]},get sold(){return[this.listings.reduce(w([2],0),0),this.listings.reduce(w([2],1),0)]},get pending(){return[this.listings.reduce(w([3,4],0),0),this.listings.reduce(w([3,4],1),0)]}}),[De,M]=$({loading:!0,propertyTypeID:g.propertyType,stats:{},get propertyStats(){return this.stats.propertyTypeData&&this.stats.propertyTypeData[g.propertyType].statistics},get bedroomStats(){return this.propertyStats&&this.propertyStats.bedroomStats},get topSize(){return typeof this.bedroomStats<"u"?this.bedroomStats.reduce((e,t)=>e.sold>t.sold?e:t):{}},get percentChange(){return this.propertyStats&&this.propertyStats.avgSalePrice/this.propertyStats.previousPeriod.avgSalePrice-1},get totalSold(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.sold+this.stats.propertyTypeData[1].statistics.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.sold},get totalSoldLastPeriod(){if(this.stats.propertyTypeData)return this.propertyTypeID===-1?this.stats.propertyTypeData[0].statistics.previousPeriod.sold+this.stats.propertyTypeData[1].statistics.previousPeriod.sold:this.stats.propertyTypeData[this.propertyTypeID].statistics.previousPeriod.sold},get soldDelta(){return this.totalSold/this.totalSoldLastPeriod-1},areaPeriod:g.period,areaId:A}),[me,ne]=$({loading:!0,propertyTypeID:g.propertyType,stats:{}});G(()=>{const[e,t]=O(g.period),[s]=P(e,async n=>{if(!isNaN(n))return await X({areaId:A,agentId:C,areaPeriod:n})}),[r]=P(A,async n=>await Q({areaId:n,agentId:C})),[a]=P(e,async n=>{if(!isNaN(n))return await Y(A,n,C)});return b(()=>{t(g.period),M({loading:!0,areaPeriod:g.period})}),b(()=>{M({propertyTypeID:g.propertyType})}),b(()=>{!s.loading&&typeof s()<"u"&&M({loading:!1,areaName:s().areaName,overall:s().stats.overall,stats:s().stats})}),b(()=>{!r.loading&&typeof r()<"u"&&ne({loading:!1,areaName:r().areaName,stats:[...r().stats]})}),b(()=>{!a.loading&&typeof a()<"u"&&R({listings:a()})}),b(()=>{R({loading:a.loading})}),[s,r,a,n=>t(n)]});const w=(e,t)=>(s,{statusTypeID:r,propertyTypeID:a})=>e.indexOf(r)>-1&&a===t?s+=1:s;function E(e){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(e)}function v(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function F(e){v(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||E(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var ae=36e5;function oe(e,t){return v(2,arguments),F(e).getTime()-F(t).getTime()}var _={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},ie="trunc";function ce(e){return e?_[e]:_[ie]}function le(e,t,s){v(2,arguments);var r=oe(e,t)/ae;return ce(s?.roundingMethod)(r)}const ue=V(),Te=(e,t={month:"2-digit",day:"2-digit",year:"numeric"})=>new Intl.DateTimeFormat("en-US",t).format(e),Pe=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0}).format(e),Ae=e=>new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2,minimumFractionDigits:2}).format(e),Oe=(e,t)=>getComputedStyle(t??document.body).getPropertyValue(e),Ne=e=>`${e.streetNumber} ${e.streetName}`,Ie=()=>{},je=(e=10,t=1)=>{const[s,r]=O(e),[a,n]=O(t);return{pageSize:s,setPageSize:r,currentPage:a,setPage:n,pageOffset:()=>(a()-1)*s()}},de=e=>{const s={...typeof window.gHub<"u"?window.gHub:{},...e};K(()=>{s.areaPeriod&&re({period:parseInt(s.areaPeriod)})});const r=n=>n.toLowerCase().replaceAll("_","");return Object.keys(s).forEach(n=>delete Object.assign(s,{[r(n)]:s[n]})[n]),new Proxy(s,{get(n,o){return n[r(o)]},set(n,o,i){return Reflect.set(n,r(o),i)}})},$e=(e,t,s,r="active",a)=>{let n,o;const i=new Date;i.setMonth(i.getMonth()-s);const c=new Date;switch(r.toLocaleLowerCase()){case"sold":o=(l,y)=>{const u=Date.parse(l.soldDate),p=Date.parse(y.soldDate);return u<p?1:u>p?-1:0},n=e.filter(l=>l.statusType.toLowerCase()==="sold"&&l.propertyTypeID===t&&l.soldDate!==null&&Date.parse(l.soldDate)>=i.getTime());break;case"new":n=e.filter(l=>l.statusType.toLowerCase()==="active"&&Math.floor(le(Date.parse(l.listDate),c)/24)>-30&&l.propertyTypeID===t),o=(l,y)=>{const u=Date.parse(l.listDate),p=Date.parse(y.listDate);return u>p?-1:u<p?1:0};break;case"pending":case"active":default:o=(l,y)=>{const u=Date.parse(l.listDate),p=Date.parse(y.listDate);return u<p?1:u>p?-1:0},n=e.filter(l=>l.statusType.toLowerCase()===r.toLowerCase()&&l.propertyTypeID===t);break}return n.sort(o),n},Ce=()=>{const{agentId:e}=de(ue),[t]=P(e,J);return t};export{ue as C,E as _,de as a,ye as b,Pe as c,Te as d,ge as e,je as f,g,De as h,Se as i,m as j,$e as k,he as l,me as m,Oe as n,Ne as o,Ae as p,we as q,v as r,be as s,F as t,Ce as u,pe as v,re as w,Ie as x};
//# sourceMappingURL=index2.js.map
