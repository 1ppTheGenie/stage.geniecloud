import{g as E,i as e,b as a,e as B,s as y,F as W,t as h,y as j,c as k,a as H,S as V,f as O,d as Y}from"./index.js";import{H as Z,b as q,P as K}from"./_LeadCtaTag.js";import{c as Q,w as J,a as X,C as ee,k as te,r as ie,n as u,o as ne,v as ae}from"./index2.js";import{G as le,C as se,L as re}from"./LeafletMap.js";import{L as oe}from"./ListingsShowing.js";const ce=h('<div id="listing-grid-view">'),de=h('<svg viewBox="0 0 100 50"><image width="100%" height="100%" preserveAspectRatio="xMinYMid slice"></image><circle cx="5" cy="5" r="3.5" fill-opacity="0.6"></circle><text font-size="5" x="5" y="5" text-anchor="middle" dominant-baseline="middle" fill="#fff"></text><polygon points="275,0 424,0 0,425 0,275" fill-opacity="0.6"></polygon><clipPath id="polyClip1" clipPathUnits="objectBoundingBox"><path d="m 0 0 h 1 v 1 h -0.7 c -0.3 0 -0.3 0 -0.3 -1"></path></clipPath><rect x="50%" width="50%" height="30%" clip-path="url(#polyClip1)" fill-opacity="0.6"></rect><text text-anchor="end" font-size="5" x="95" y="2" dominant-baseline="hanging" fill="#fff"></text><text text-anchor="end" font-size="7" x="95" y="8" dominant-baseline="hanging" fill="#fff"></text><g transform="translate(0,38)"><rect height="12" width="100" fill-opacity="0.6"></rect><text x="50" y="4" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="5"></text><text x="50" y="10" fill="var(--theme-body-background)" text-anchor="middle" dominant-baseline="middle" font-size="4"><tspan></tspan><tspan>BR | </tspan><tspan></tspan><tspan>BA | </tspan><tspan font-size="3"> SQFT'),T={active:"--active-green",new:"--new-blue",pending:"--pending-yellow",sold:"--sold-red"},U="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz4=",ge=({listings:l,mode:s})=>{const _=E(()=>`var(${T[s().toLowerCase()]})`);return(()=>{const x=ce();return e(x,a(W,{get each(){return l()},children:(r,b)=>(()=>{const S=de(),c=S.firstChild,P=c.nextSibling,f=P.nextSibling,$=f.nextSibling,d=$.nextSibling,v=d.nextSibling,p=v.nextSibling,w=p.nextSibling,n=w.nextSibling,z=n.firstChild,t=z.nextSibling,o=t.nextSibling,C=o.firstChild,A=C.nextSibling,L=A.nextSibling,N=L.nextSibling,M=N.nextSibling;return c.addEventListener("error",i=>{i.target.getAttribute("href")!==U&&i.target.setAttribute("href",U)}),e(f,()=>b()+1),e(p,s=="Sold"?"Sold at":"Asking"),e(w,()=>Q(r.priceHigh)),e(t,()=>J(r)),e(C,()=>r.bedrooms),e(L,()=>r.bathroomsTotal),e(o,()=>Intl.NumberFormat("en-US").format(r.sqft),M),B(i=>{const g=`${r.mlsNumber}:${r.latitude}:${r.longitude}`,m=r.photoPrimaryUrl,G=_(),I=_(),R=_(),D=`var(${T[s]})`;return g!==i._v$&&y(S,"key",i._v$=g),m!==i._v$2&&y(c,"href",i._v$2=m),G!==i._v$3&&y(P,"fill",i._v$3=G),I!==i._v$4&&y($,"fill",i._v$4=I),R!==i._v$5&&y(v,"fill",i._v$5=R),D!==i._v$6&&y(z,"fill",i._v$6=D),i},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),S})()})),x})()},he=h('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="var(--theme-heading-color)" d="M96 288H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM96 96H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm160 0h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z">'),ve=(l={})=>(()=>{const s=he();return j(s,l,!0,!0),s})(),pe=h('<svg viewBox="0 0 512 512"><path fill="var(--theme-heading-color)" d="M48 48a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm0 160a48 48 0 1 0 48 48 48 48 0 0 0-48-48zm448 16H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z">'),me=(l={})=>(()=>{const s=pe();return j(s,l,!0,!0),s})();const ue=h('<h4 class="center upper subheading-market-activity" style="margin-bottom:5px"> '),fe=h('<h1 class="center upper heading-market-activity" style="margin:0">Market Activity'),xe=h("<div>"),$e=h('<div style="display:flex;flex-direction:row;justify-content:space-between;margin:1vh 0;font-size:85%;align-items:center;width:100%"><span>View Option</span><span>Status</span><select style="padding:0.25rem 0.5rem"></select><span>Sort By</span><select style="padding:0.25rem 0.5rem"></select><span>'),F=h('<option style="text-transform:capitalize">'),ye=h('<div class="map-key" style="position:absolute;z-index:700;top:65px"><svg style="width:380px;height:270px"><rect width="100%" height="15%" fill="var(--theme-body-background)"></rect><rect width="100%" height="80%" fill="#000" fill-opacity="0.57" y="15%"></rect><text x="20" y="27" style="font-size:150%" fill="var(--theme-body-color)"></text><g style="transform:translate(20px, 70px)">'),_e=h('<svg><g><circle cx="20" cy="5" r="17"></circle><text x="20" y="5" fill="var(--white)" text-Anchor="middle" dominant-Baseline="middle" style="font-size:100%;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></text><text x="50" y="7" fill="var(--white)" dominant-Baseline="middle" style="font-size:100%;font-weight:700;text-Shadow:4px 4px 5px rgba(44, 44, 44, 0.5)"></svg>',!1,!0),ke=()=>{const l=X(ee),[s,_]=k("Most Recent"),[x,r]=k("List"),[b,S]=k([]),[c,P]=k([]),[f]=k(!1),{currentPage:$,setPage:d,pageOffset:v,pageSize:p,setPageSize:w}=te(8),[n,z]=k(l.mode?l.mode.charAt(0).toUpperCase()+l.mode.slice(1):"New");return H(()=>n()&&d(1)),H(()=>S(ie(ne.listings,u.propertyTypeID,u.areaPeriod,n(),s()))),H(()=>P(b().slice(v(),v()+p()))),[(()=>{const t=ue(),o=t.firstChild;return e(t,()=>u.areaName,o),e(t,()=>u.propertyTypeID===0?"Homes":"Condos",null),t})(),fe(),a(Z,{get container(){return`MarketActivity-${l.areaid}`},style:""}),(()=>{const t=xe();return e(t,a(be,{setStatus:z}),null),e(t,a(re,{get mapStyle(){return l.mapstyle||"satellite-streets-v11"},zoomControl:!0,style:"width:100%;height:100%;",get children(){return[a(le,{get areaId(){return l.areaid},style:"color:#feff00;fill-opacity:0"}),a(V,{get when(){return c().length},get children(){return c().map((o,C)=>a(se,{get color(){return ae(`--${n().toLowerCase()}`,document.getElementsByClassName("genie-wrap marketactivity")[0]).trim()},caption:C+1,key:C+v*p,get position(){return[o.latitude,o.longitude]}}))}})]}}),null),B(o=>O(t,`position:relative;width:100%;height:${f?"650px":"400px"}`,o)),t})(),E((()=>{const t=E(()=>c().length>0);return()=>t()&&(()=>{const o=$e(),C=o.firstChild,A=C.nextSibling,L=A.nextSibling,N=L.nextSibling,M=N.nextSibling,i=M.nextSibling;return e(o,a(me,{style:"width:20px;height:auto",onClick:()=>{w(10),r("List")}}),A),e(o,a(ve,{style:"width:20px;height:auto",onClick:()=>{w(8),r("Grid")}}),A),L.addEventListener("change",g=>{d(1),z(g.target.value)}),e(L,()=>["Pending","New","Active","Sold"].map(g=>(()=>{const m=F();return m.value=g,e(m,g),m})())),M.addEventListener("change",g=>{d(1),_(g.target.value)}),e(M,()=>["Most Recent","Price High","Price Low","Days on Market"].map(g=>(()=>{const m=F();return m.value=g,e(m,g),m})())),e(i,a(oe,{pageSize:p,currentPage:$,pageOffset:v,data:b,mode:n,get period(){return u.areaPeriod}})),B(()=>L.value=n()),B(()=>M.value=s()),o})()})()),a(V,{get when(){return x()==="List"},get children(){return a(q,{mode:n,listings:c,style:"width: 100%; color: var(--theme-body-color)"})}}),a(V,{get when(){return x()==="Grid"},get children(){return a(ge,{mode:n,listings:c,style:"width: 100%; color: var(--theme-body-color)"})}}),a(K,{data:b,currentPage:$,pageSize:p,pageChange:t=>d(t),style:"align-self: flex-end"})]},be=({setStatus:l})=>{const[s,_]=k([]);return H(()=>_([{total:u?.overall?.new,label:"New (active)",status:"new"},{total:u?.overall?.active,label:"Active",status:"active"},{total:u?.overall?.pending,label:"Pending",status:"pending"},{total:u.overall?.sold,label:"Sold",status:"sold"}])),(()=>{const x=ye(),r=x.firstChild,b=r.firstChild,S=b.nextSibling,c=S.nextSibling,P=c.nextSibling;return e(c,()=>u.areaName),e(P,()=>s().map((f,$)=>(()=>{const d=_e(),v=d.firstChild,p=v.nextSibling,w=p.nextSibling;return d.$$click=()=>l(f.status),y(d,"key",$),e(p,()=>f.total),e(w,()=>f.label),B(n=>{const z=`transform: translateY(${$*50}px)`,t=`var(--${f.status})`;return n._v$=O(d,z,n._v$),t!==n._v$2&&y(v,"fill",n._v$2=t),n},{_v$:void 0,_v$2:void 0}),d})())),x})()};Y(["click"]);export{ke as default};
//# sourceMappingURL=MarketActivity.js.map
