import{c as g,o as b,a as i,u as L,s as x,h as v,e as S,f as z,b as c,S as C,j as M,z as w,i as E,t as y,x as O}from"./index.js";import{v as B}from"./index2.js";const A=t=>{if(document.getElementById("google-maps-script"))t();else{var e=document.createElement("script");e.async=!0,e.src=`https://maps.googleapis.com/maps/api/js?key=${window.gHub.googleKey}&libraries=places`,e.id="google-maps-script",e.onload=()=>t();var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}},N=async()=>{await new Promise(t=>{if(document.getElementById("leaflet-script"))(async()=>{for(;!window.L;)await new Promise(o=>setTimeout(o,250));t(!0)})();else{var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css",document.head.appendChild(e);var a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js",a.id="leaflet-script",a.onload=()=>t(!0),document.head.appendChild(a)}})},$=(t,e={})=>{if(window.L&&t&&!t.classList.contains("leaflet-container")){const a=e.center||{lat:32.715,lng:-117.1611},o=e.mapStyle||window.gHub.mapStyle,n=window.L.tileLayer(`https://api.mapbox.com/styles/v1/mapbox/${o}/tiles/{z}/{x}/{y}?access_token=${window.gHub.mapboxKey}`,{attribution:'&copy; <a href="https://www.mapbox.com/feedback/">Mapbox</a>',tileSize:512,zoomOffset:-1});try{return window.L.map(t,{center:[a.lat,a.lng],zoomControl:!1,scrollWheelZoom:!1,layers:[n],attributionControl:!1,zoom:13,dragging:!1,...e})}catch{}}},J=y("<div>"),P=y('<div class="leaflet-pane" style="position:absolute;width:100%;height:100%;display:flex;align-Items:center;justify-Content:center;z-index:9999;">'),p=O(),G=t=>{const[e,a]=g(),{id:o="genie-map",center:n,cssClasses:d,style:u,mapStyle:m,zoom:h}=t;let l;return b(()=>{(async()=>{await N();const s=$(l,{mapStyle:m,center:n?new window.L.LatLng(n[0],n[1]):null,zoom:h,dragPan:!1});s&&a(s);const r=()=>{e()&&e().invalidateSize()};l.addEventListener("transitionend",r),new ResizeObserver(r).observe(document.getElementById(o))})()}),i(()=>{e()&&n&&window.L&&e().panTo(new window.L.LatLng(n[0],n[1]))}),[(()=>{const s=J(),r=l;return typeof r=="function"?L(r,s):l=s,x(s,"id",o),v(s,d),S(f=>z(s,u,f)),s})(),c(C,{get when(){return e()},get children(){return c(p.Provider,{value:e,get children(){return t.children}})}})]},k=t=>{const[e]=M(t.areaId,B);return c(T,{get polygon(){return e()},get color(){return t.color}})},T=t=>{const[e,a]=g(),o=w(p),{fitBounds:n=!0,fillColor:d="#E9B760"}=t;return i(()=>{o&&t.polygon&&typeof t.polygon.geoJSON<"u"&&a(JSON.parse(t.polygon.geoJSON))}),i(()=>{e()&&window.L.geoJSON(e(),{style:()=>({color:d}),onEachFeature:(u,m)=>{n&&(o().fitBounds(m.getBounds(),{zoom:22}),o().invalidateSize())}}).addTo(o())}),null},H=t=>(()=>{const e=P();return E(e,()=>t.children),e})(),R=({color:t,caption:e,position:a})=>c(_,{position:a}),_=t=>{const e=w(p),{position:a}=t;return i(()=>{e()&&a&&window.L&&window.L.marker(a,{...t}).addTo(e())}),null};export{R as C,k as G,G as L,_ as M,H as a,$ as b,A as c,N as i};
//# sourceMappingURL=LeafletMap.js.map
