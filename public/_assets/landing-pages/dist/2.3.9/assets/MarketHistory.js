import{j as E,g as w,c as o,a as j,b as d,i as P,e as H,h as u,S as I,t as v,d as q}from"./index.js";import{m as _,k as h}from"./index2.js";import{f as b,H as F}from"./Pagination.js";import{E as L}from"./Editable.js";let M;const D=a=>{const[r]=E(T);return w((()=>{const s=w(()=>!r.loading);return()=>s()&&M.draw("90%","70%",a.data,a.element)})())},T=()=>new Promise(a=>{if(document.getElementById("genie-charts"))a(!0);else{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css",document.head.appendChild(r);var s=document.createElement("script");s.src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js",s.id="chartist-script",s.onload=()=>{var c=document.createElement("script");c.src=`${window.gHub.siteUrl}_assets/_js/charts.js`,c.id="genie-charts",c.onload=()=>{M=window.genieChart.initCharts(),a(!0)},document.head.appendChild(c)},document.head.appendChild(s)}});const R=v("<h1>A History of the<br>&#160;Market"),N=v('<div class="curved-tabs"><span>Price per sq/ft</span><span>Price history</span><span>Sales history'),V=v('<div class="market-history-chart">'),m=document.createElement("link");m.rel="stylesheet";m.type="text/css";m.href="https://cdn.rawgit.com/tiaanduplessis/wenk/master/dist/wenk.css";document.head.appendChild(m);const X=()=>{const[a,r]=o("averagePricePerSqFt"),[s,c]=o(),[S,C]=o(),[k,g]=o(),[x,p]=o();return j(()=>{if(_.loading==!1){const t=_.stats.filter(e=>e.propertyTypeId===h.propertyTypeID);C(t.slice(Math.max(t.length-h.areaPeriod,1)).map(e=>b(new Date(e.yearPart,e.monthPart-1,1),"MMM yy")));const n=t.slice(Math.max(t.length-h.areaPeriod,1)).map(e=>({name:b(new Date(e.yearPart,e.monthPart-1,1),"MMM yy"),value:e[a()]}));c(n);const i=Math.min.apply(9999999999999,n.map(e=>e.value)),l=Math.max.apply(0,n.map(e=>e.value));switch(a){case"averagePricePerSqFt":p(Math.round(i/1.4/25e4)*25e4),g(Math.ceil(l*1.3/25e4)*25e4);break;case"averageSalePrice":p(Math.round(i/1.4/250)*250),g(Math.ceil(l*1.3/250)*250);break;default:p(i/1.4),g(l*1.3);break}}}),[d(L,{style:"text-align:center",id:"market-history-title",get children(){const t=R(),n=t.firstChild,i=n.nextSibling,l=i.nextSibling;return P(t,()=>h.areaName,l),t}}),d(F,{container:"MarketHistory-"}),(()=>{const t=N(),n=t.firstChild,i=n.nextSibling,l=i.nextSibling;return n.$$click=()=>r("averagePricePerSqFt"),i.$$click=()=>r("averageSalePrice"),l.$$click=()=>r("soldCount"),H(e=>{const y=a()==="averagePricePerSqFt"?"active":"",f=a()==="averageSalePrice"?"active":"",$=a()==="soldCount"?"active":"";return y!==e._v$&&u(n,e._v$=y),f!==e._v$2&&u(i,e._v$2=f),$!==e._v$3&&u(l,e._v$3=$),e},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})(),(()=>{const t=V();return P(t,d(I,{get when(){return s()},get children(){return d(D,{element:".market-history-chart",margin:{top:15,right:15,bottom:15,left:15},width:900,height:300,get data(){return{data:{labels:S(),series:[s()]},options:{width:"100%",height:"100%",axisX:{scaleLabel:"Month",onlyInteger:!1},axisY:{high:k(),low:x(),offset:60,onlyInteger:!0,labelInterpolationFnc:a()==="soldCount"?window.genieChart.number:window.genieChart.dollarRound,scaleLabel:a()==="soldCount"?"Total Sold":"Price"}}}}})}})),t})()]};q(["click"]);export{X as default};
//# sourceMappingURL=MarketHistory.js.map
